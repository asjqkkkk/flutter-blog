[{"articleName":"éªšå¹´ï¼Œä½ è¿˜æ²¡å¼€å§‹å­¦Flutterå—ï¼Ÿ","createTime":"2019-05-04T21:49:47.000","lastModifiedTime":"2020-02-03T10:17:41.000","tag":"Flutter","summary":" å¼€åœºé—²èŠ\n\nåœ¨å»å¹´12æœˆä»½çš„Flutter Live 2018ä¸Šï¼Œè°·æ­Œçš„Flutterå›¢é˜Ÿå®£å¸ƒ*","imageAddress":"/img/study_flutter.png","articleAddress":"/config/study/éªšå¹´ï¼Œä½ è¿˜æ²¡å¼€å§‹å­¦Flutterå—ï¼Ÿ.md","articleContent":"---\ntitle: éªšå¹´ï¼Œä½ è¿˜æ²¡å¼€å§‹å­¦Flutterå—ï¼Ÿ\ndate: 2019-05-04 21:49:47\nindex_img: /img/study_flutter.png\ntags: Flutter\n---\n\n# å¼€åœºé—²èŠ\n\nåœ¨å»å¹´12æœˆä»½çš„Flutter Live 2018ä¸Šï¼Œè°·æ­Œçš„Flutterå›¢é˜Ÿå®£å¸ƒ**Flutter 1.0 releaseç‰ˆ**æ­£å¼å‘å¸ƒã€‚\n\næƒ³å¿…å¾ˆå¤šå°ä¼™ä¼´å’Œæˆ‘ä¸€æ ·ï¼Œéƒ½æ˜¯ä»é‚£ä¸ªæ—¶å€™å¼€å§‹äº†è§£åˆ°Flutterçš„ï¼Œè€Œæˆ‘ä¹Ÿæ˜¯é¡ºå¸¦ä»é‚£ä¸ªæ—¶å€™å…¥äº†Flutterçš„å‘ã€‚\n\nä¸è¿‡åº”è¯¥è¿˜æœ‰ä¸€éƒ¨åˆ†å°ä¼™ä¼´å¯¹Flutteråªæ˜¯ç•¥æœ‰è€³é—»ï¼Œç”šè‡³é—»æ‰€æœªé—»ã€‚ä¸ºäº†æŠŠè¿™éƒ¨åˆ†å°ä¼™ä¼´æ‹‰åˆ°è¿™ä¸ª **â€œå¤§å‘â€** é‡Œé¢æ¥ï¼Œæˆ‘ä¸å¾—ä¸åœ¨è¿™é‡Œå‘ä½ ä»¬å±•ç¤º**Flutterçš„é­…åŠ›**æ‰€åœ¨ï¼ŒåŒæ—¶ä¸ºäº†ä¿æŒå®¢è§‚å…¬æ­£ï¼Œæˆ‘ä¹Ÿä¼šä»‹ç»ä¸€äº›æˆ‘é‡åˆ°è¿‡çš„**Flutterçš„éº»çƒ¦**ä¹‹å¤„ã€‚  \nå°±åƒè°ˆæ‹çˆ±ä¸€æ ·ï¼Œå› ä¸ºä¼˜ç‚¹æ‰ä¼šåœ¨ä¸€èµ·ï¼Œä¹Ÿå› ä¸ºæ¥å—å¾—äº†ç¼ºç‚¹æ‰èƒ½ä½¿æƒ…æ„Ÿç»§ç»­ä¿æŒã€‚\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/introduce_flutter/001.png)\n\n\nè¯ä¸å¤šè¯´ï¼Œæ¥ä¸‹æ¥å°±ç”±æˆ‘æ¥ä¸ºè¯¸ä½å±•ç¤ºFlutteræ‰€å…·å¤‡çš„è¿™äº›çš„ç‰¹æ€§å§ã€‚\n<!--more--> \n\n\n# Flutterçš„ç‰¹æ€§\n\nåœ¨æˆ‘çœ‹æ¥ï¼ŒFlutterçš„ç‰¹æ€§ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼Œåˆ†åˆ«æ˜¯**é«˜æ•ˆæ€§**ä¸**èˆ’é€‚æ€§**ï¼Œè¿™ä¸¤è€…éƒ½ä¼šæ˜¯ä½ åœ¨è¿›è¡ŒFlutterå¼€å‘æ—¶æœ€ç›´è§‚çš„æ„Ÿå—ï¼Œè€Œä¸‹é¢çš„è¿™äº›ç‰¹æ€§ä»ä¾§é¢ä¹Ÿä¼šå±•ç¤ºå‡ºè¿™éƒ¨åˆ†æ•ˆæœ\n\n\n### ä¸€ã€çƒ­é‡è½½\n\nçƒ­é‡è½½å¤§å®¶åº”è¯¥éƒ½è€³ç†Ÿèƒ½è¯¦äº†ï¼Œå’Œå‰ç«¯å¼€å‘ä¸€æ ·ï¼Œå¯¹ä»£ç è¿›è¡Œä¿®æ”¹åï¼Œå¯ä»¥å³æ—¶çœ‹åˆ°æ•ˆæœï¼Œè¿™ç‚¹ç›¸æ¯”äºåŸç”Ÿå¼€å‘æ¯æ¬¡åšäº†ä¸€ç‚¹ä¿®æ”¹å°±è¦ä»å¤´åˆ°å°¾ç¼–è¯‘ä¸€æ¬¡ä¸çŸ¥é“é«˜åˆ°å“ªé‡Œå»äº†ï¼\n\nä¸‹é¢æ˜¯ä¸€ç‚¹ç®€å•çš„æ¼”ç¤ºæ•ˆæœï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/introduce_flutter/002.gif)\n\nå¯ä»¥çœ‹åˆ°ï¼Œçƒ­é‡è½½å¸¦æ¥çš„ä½“éªŒæå‡æ˜¯å·¨å¤§çš„ï¼ä½œä¸ºä¸€ååŸç”Ÿå¼€å‘è€…ï¼Œä½ å¿ƒåŠ¨äº†å—ï¼Ÿ\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/introduce_flutter/003.gif)\n\nä¸è¿‡å…³äºçƒ­é‡è½½è¿˜æœ‰ä¸€äº›éœ€è¦è¯´æ˜çš„åœ°æ–¹ï¼Œåœ¨ç”¨åˆ°å¯ä»¥ä¿å­˜çŠ¶æ€çš„æ§ä»¶æ—¶ï¼Œçƒ­é‡è½½ä¸èƒ½å°†çŠ¶æ€é‡ç½®ï¼Œæ¯”å¦‚è¯´ä¸€ä¸ªåŠ¨ç”»æ§ä»¶ï¼Œåœ¨åŠ¨ç”»ç»“æŸåå†è¿›è¡Œçƒ­é‡è½½æ˜¯æ— æ³•å†æ¬¡æ’­æ”¾åŠ¨ç”»çš„ï¼ˆé™¤éä½ å¯¹åŠ¨ç”»åšäº†å¾ªç¯å¤„ç†ï¼‰ï¼Œæ‰€ä»¥æœ‰çš„æ—¶å€™ä½ çœ‹ç€è§‰å¾—çƒ­é‡è½½æ²¡æ•ˆæœï¼Œè¿™æ—¶å€™å°±è¦è€ƒè™‘æ˜¯ä¸æ˜¯ç”¨åˆ°äº† **StatefulWidget** ä¹‹ç±»çš„æ§ä»¶ã€‚\n\nFlutterå°†çƒ­é‡è½½ä½œä¸ºä¸€ä¸ªäº®ç‚¹ï¼Œä¸è¿‡ç”±äºFlutterçš„å¸ƒå±€æ˜¯ç”¨ä»£ç å»å†™çš„ï¼Œå’ŒAndroidä¸­çš„xmlä¸åŒï¼Œå®ƒæ— æ³•è¿›è¡Œå®æ—¶é¢„è§ˆï¼Œæ‰€ä»¥ä½ æ— æ³•æƒ³è±¡æ²¡æœ‰çƒ­é‡è½½çš„è¯ï¼Œè¦æ€ä¹ˆé¢å¯¹Flutterè¿›è¡Œç¼–ç¨‹ï¼Œè¿™ä¹ˆçœ‹æ¥çƒ­é‡è½½æ—¢æ˜¯äº®ç‚¹ï¼Œä¹Ÿæ˜¯è¦ç‚¹ã€‚\n\n### äºŒã€ä¸‡ç‰©åŸºäºWidget\n\nFlutterä¸­çš„é¡µé¢éƒ½æ˜¯ç”±ä¸€ä¸ªä¸ªçš„Widgetç»„åˆè€Œæˆï¼Œç”šè‡³è¿é¡µé¢æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªWidgetï¼ŒWidgetä¸androidä¸­çš„ç»„ä»¶ç±»ä¼¼ï¼Œä¸è¿‡å‰è€…å…·æœ‰æ›´å¥½çš„ç»„åˆæ€§ã€‚  \nåŒæ—¶Flutterå·²ç»å°è£…äº†è®¸å¤šç®€å•å¥½ç”¨çš„Widgetï¼Œä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ã€‚\n\næ¯”å¦‚åœ¨androidä¸­ä½ æƒ³åˆ›å»ºä¸‹é¢è¿™æ ·ä¸€ä¸ªåœ†ï¼Œä½ éœ€è¦é‡æ–°å†™ä¸€ä¸ªxmlï¼Œå¹¶åœ¨xmlå®šä¹‰å„ç§å±æ€§ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/introduce_flutter/004.png)\n\nè€Œåœ¨Flutterä¸­å®ç°æ˜¯éå¸¸å®¹æ˜“çš„ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/introduce_flutter/005.png)\n\nä¸ç®¡æ˜¯åœ†å½¢ï¼Œè¿˜æ˜¯åœ†è§’çŸ©å½¢ï¼Œåˆæˆ–è€…æ˜¯ä¸å¯¹ç§°åœ†è§’çŸ©å½¢ï¼ŒFlutteréƒ½æä¾›äº†å¾ˆæ–¹ä¾¿çš„å®ç°æ–¹æ³•ã€‚\n\nå…³äºWidgetå¯ä»¥çœ‹åˆ°ä»£ç çš„ç»“æ„æ˜¯ä¸€å±‚ä¸€å±‚çš„ï¼Œå¯¹äºåˆæ¬¡æ¥è§¦çš„äººæ¥è¯´æƒ³å¿…æ˜¯å¾ˆéš¾æ¥å—è¿™ç§ä»£ç æ ¼å¼ã€‚å› ä¸ºæˆ‘å½“åˆçœ‹åˆ°Flutterè¿™æ ·çš„ä»£ç æ—¶ï¼Œè¿˜äº§ç”Ÿè¿‡åŠé€€çš„æƒ³æ³•ï¼Œä¸è¿‡å†™äº†ä¸€æ®µæ—¶é—´åè¿˜æ˜¯è§‰å¾—è›®å¸¦æ„Ÿçš„ã€‚æ‰“ä¸ªæ¯”æ–¹çš„è¯å°±åƒåˆè§JoJoå’Œå†è§JoJoçš„æ„Ÿè§‰ã€‚\n\nåœ¨androidä¸­è§†å›¾åœ¨xmlä¸­ï¼Œä»£ç åˆ™ç”±javaè´Ÿè´£ï¼Œåœ¨ä¹ æƒ¯äº†flutteråï¼Œæˆ‘è§‰å¾—ç”¨ä»£ç ç›´æ¥å»åˆ›å»ºè§†å›¾ä¹Ÿæœªå°ä¸æ˜¯ä¸€ç§å¥½çš„è§£å†³æ–¹æ³•ï¼Œæ¯•ç«Ÿxml+javaä¹Ÿç®—å†å²æ‚ ä¹…äº†ã€‚è€Œæˆ‘ä¹Ÿæ¥è§¦è¿‡ä¸€ä¸ªå‰ç«¯æ¡†æ¶â€”â€”Vueï¼Œflutterçš„è¿™ç§ç»“æ„å’Œvueçš„å°±éå¸¸ç±»ä¼¼ã€‚\n\nå­°å¥½å­°åå› äººè€Œå¼‚ï¼Œæƒ³å¿…ç­‰ä½ ä½¿ç”¨è¿‡ä¸€æ®µæ—¶é—´åçš„flutteråå¿ƒä¸­ä¼šæœ‰ç€ä¸€ä¸ªè‡ªå·±çš„ç­”æ¡ˆã€‚\n\n\n### ä¸‰ã€è·¨å¹³å°\n\nè·¨å¹³å°å…¶å®æ˜¯flutteræœ€çªå‡ºçš„ä¸€ä¸ªç‰¹ç‚¹äº†ï¼Œä¸å…¶ä»–å¦‚Reactã€Weekè¿™ç±»è·¨å¹³å°æ¡†æ¶ä¸åŒï¼ŒFlutterä½œä¸ºåèµ·ä¹‹ç§€èƒ½è„±é¢–è€Œå‡ºä¸å…¶æ€§èƒ½è¡¨ç°å’Œç¨³ç‚¹ç¨‹åº¦æ˜¯æœ‰å¾ˆå¤§å…³ç³»çš„ã€‚\n\nåœ¨Flutter Live 2018ä¸Šï¼Œå®˜æ–¹å·²ç»æ”¾å‡ºäº†å¥½å‡ ä¸ªçº¯Flutterçš„åº”ç”¨ï¼Œå¹¶æ¼”ç¤ºäº†ä»–ä»¬åœ¨androidå’Œiosä¸Šçš„è¿è¡Œæ•ˆæœï¼Œå…¶ä¸­æœ€ä¸ºæƒŠè‰³çš„å°±æ˜¯ **ã€ŠThe History Of Everythingã€‹** äº†ï¼Œä¸‹é¢ç»™å¤§å®¶ç®€å•çš„å±•ç¤ºä¸€ä¸‹çœŸæœºè¿è¡Œæ•ˆæœï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/introduce_flutter/007.gif)\n\næƒ³è‡ªè¡Œä½“éªŒçš„è¯å¯ä»¥å»Google Playæˆ–è€…App Storeä¸­ä¸‹è½½\n\nä¸Šé¢åº”ç”¨ä¸­çš„åŠ¨ç”»å¤§éƒ¨åˆ†ç”± **Flare** å®ç°ï¼Œå…·ä½“å¯ä»¥å‚è§ [2dimensions(éœ€ç§‘å­¦ä¸Šç½‘)](https://www.2dimensions.com/)ï¼Œè¿™æ ·å¯ä»¥è·‘æ»¡60å¸§çš„çŸ¢é‡åŠ¨ç”»ä¹Ÿåªæ˜¯Flutteræ€§èƒ½å±•ç°çš„ä¸€é¢ï¼Œåœ¨è·¨å¹³å°ä¸Šï¼Œå…¶æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯**æ¥è¿‘åŸç”Ÿæ•ˆæœ**ã€‚\n\nä¸è¿‡ç›®å‰è€Œè¨€ï¼Œflutteråœ¨è·¨å¹³å°ä¸Šæœ‰ä¸€äº›é—®é¢˜è¿˜æ˜¯éœ€è¦å®Œå–„çš„ã€‚æ¯”å¦‚è§†é¢‘çš„æ’­æ”¾  \nå…·ä½“åŸå› å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š[ä¸‡ä¸‡æ²¡æƒ³åˆ°â€”â€”flutterè¿™æ ·å¤–æ¥çº¹ç†](https://www.yuque.com/xytech/flutter/pfpo68)\n\nè¿˜æœ‰é‚£äº›éœ€è¦ç”¨åˆ°ç¬¬ä¸‰æ–¹sdkçš„æ—¶å€™ï¼Œå¯èƒ½å°±éœ€è¦åšåŒç«¯çš„channelé€šä¿¡äº†ï¼Œä½†æ˜¯ä¹Ÿæœ‰æ¯”è¾ƒç§¯æçš„å›¢é˜Ÿä¸“é—¨åšäº†flutterçš„sdkï¼Œ**å£°ç½‘**å°±æ˜¯å…¶ä¸­ä¹‹ä¸€\n\n### å››ã€å¹´è½»\n\nå¹´è½»æ˜¯flutterçš„ä¸€å¤§ä¼˜åŠ¿ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€å¤§åŠ£åŠ¿ã€‚\n\nå°±åƒä¸Šé¢è¯´çš„ï¼Œè®¸å¤šç¬¬ä¸‰æ–¹sdkè¿˜æ²¡æœ‰å¼€å§‹ä¸ºflutteråšé€‚é…ï¼Œæ‰€ä»¥flutterçš„å¼€å‘ç”Ÿæ€è‡ªç„¶æ¯”ä¸äº†å…¶ä»–æŠ€æœ¯æ¡†æ¶å’Œå¹³å°ï¼Œç„¶è€Œå› å…¶å‘å±•çš„åŠ¿å¤´éå¸¸è¿…çŒ›ï¼Œæ‰€ä»¥è¿™å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªæœºä¼šã€‚å¤§é‡çš„å¼€å‘è€…å¯ä»¥åœ¨è¿™ä¸ªé¢†åŸŸå†åšå»ºæ ‘ï¼Œæœªæ¥ä¼šæ˜¯ä½•ç§çŠ¶å†µè¿˜æ˜¯éå¸¸ä»¤äººæœŸå¾…çš„ã€‚\n\nå¦‚åŒ **Kotlin** ä¸€æ ·ï¼Œç°é˜¶æ®µå¦‚æœå»çœ‹å›½å¤–çš„ä¸€äº›æŠ€æœ¯åšå®¢ï¼Œå¦‚ **Medium** é‡Œå…³äº Android çš„ï¼Œå¤§éƒ¨åˆ†è¯­è¨€éƒ½å·²ç»æ˜¯kotlinçš„äº†ï¼Œåªæ˜¯å›½å†…çš„åšå®¢å¯èƒ½æ™®åŠåº¦è¿˜æ²¡æœ‰é‚£ä¹ˆé«˜ã€‚ä½†æ˜¯è‰¯ç¦½æ‹©æœ¨è€Œæ –ï¼Œè¶‹åŠ¿ä¸€ç›´éƒ½åœ¨ï¼Œæ€ä¹ˆé€‰æ‹©å°±çœ‹ä¸ªäººäº†ã€‚\n\nä¹Ÿæ­£æ˜¯å› ä¸ºflutteræ¯”è¾ƒå¹´è½»ï¼Œæ‰€ä»¥æœ‰äº›ä¸œè¥¿è¿˜æ²¡æœ‰ä¸€ä¸ªæ—¢å®šçš„å…¬è®¤çš„è§£å†³æ–¹æ¡ˆã€‚å°±æ¯”å¦‚flutterå¼€å‘è¿‡ç¨‹ä¸­éƒ½ä¼šé‡åˆ°çš„ **çŠ¶æ€ç®¡ç†**ã€‚\n\nç›®å‰flutterä¸­çš„çŠ¶æ€ç®¡ç†æ¡†æ¶æœ‰è®¸å¤šï¼Œæœ€çŸ¥åçš„æ¯”å¦‚ä»å‰ç«¯å¼•é‰´è¿‡æ¥çš„ **Redux**ï¼ŒåŒæ—¶è¿˜æœ‰ **Bloc**ï¼Œ **Provide** ç­‰ã€‚æ¯ä¸ªçŠ¶æ€ç®¡ç†æ¡†æ¶è§£å†³çš„èŒƒå›´éƒ½ä¸ä¸€æ ·ï¼Œå­¦ä¹ æˆæœ¬ä¹Ÿå„æœ‰å·®å¼‚ï¼Œå¦‚ä½•é€‰æ‹©è¿˜æ˜¯éœ€è¦çœ‹é¡¹ç›®éœ€æ±‚ä¸ä¸ªäººå–œå¥½ã€‚  \nå…·ä½“é€‰æ‹©å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š[ï¼ˆè¯‘ï¼‰è®©æˆ‘æ¥å¸®ä½ ç†è§£å’Œé€‰æ‹©FlutterçŠ¶æ€ç®¡ç†æ–¹æ¡ˆ](https://juejin.im/post/5bac54c45188255c681589d3)\n\n\n### äº”ã€Dartè¯­è¨€\n\nflutterçš„å¼€å‘è¯­è¨€ä½¿ç”¨çš„æ˜¯dartï¼Œå¯¹äºåˆšæ¥è§¦kotlinçš„åŒå­¦æ¥è¯´ï¼Œå†å»ä½¿ç”¨dartæƒ³å¿…æ˜¯ä¸€ä»¶å¾ˆè‹¦æ¼çš„äº‹æƒ…ã€‚\n\næ¯”å¦‚kotlinä¸­ç”¨ **varè¡¨ç¤ºå˜é‡(variable)**ï¼Œ**valè¡¨ç¤ºå¸¸é‡(value)**ï¼Œè€Œåˆ°äº†dartä¸­è™½ç„¶å¯ä»¥ç”¨varè¡¨ç¤ºå˜é‡ï¼Œä½†æ˜¯å¸¸é‡è¿˜æ˜¯åªèƒ½ç”¨finalæˆ–è€…constå»ä¿®é¥°ã€‚\n\nä»å¾ˆå¤šæ–¹é¢çœ‹æ¥kotlinéƒ½ç®—æ˜¯ç®—æ˜¯é‡‡å„å®¶æ‰€é•¿é›†äºä¸€èº«ï¼Œè€Œdartåˆ™åƒæ˜¯ä¿®è¡Œè¿˜æ²¡ç»“æŸå°±åŠè·¯å‡ºå±±äº†ã€‚\n\nä¸è¿‡å› ä¸ºå¯¹æ¯”å¯¹è±¡æ˜¯kotlinï¼Œæ‰€ä»¥dartæ˜¾å¾—ä¸é‚£ä¹ˆå‡ºè‰²ï¼Œå…¶å®dartè¿˜æ˜¯æœ‰å¾ˆå¤šå¥½ç”¨çš„ç‚¹çš„ã€‚\n\næ¯”å¦‚\n#### è°ƒç”¨å‰åšå¯¹è±¡åˆ¤ç©ºï¼š\n\n```\n//kotlin\na?.m()\n//dart\na?.m()\n\n```\nä¸åŒä¹‹å¤„åœ¨äºkotlinå¦‚æœå¯¹è±¡ä¸ºç©ºåˆ™ä¸åšå¤„ç†,åŒæ—¶è¦æ±‚ä½ åšå¯¹è±¡ä¸ºç©ºæ—¶çš„èµ‹å€¼ï¼Œdartå¦‚æœå¯¹è±¡ä¸ºç©ºåˆ™è¿”å›null,\n\n#### å¯¹è±¡ä¸ºç©ºæ—¶èµ‹å€¼\n\n```\n//kotlin\nvar x = a?.b ?: c\n//dart\nvar x = a?.b ?? c\n```\nä¸¤è€…åŒºåˆ«ä¸å¤§.ä¸è¿‡dartä¸­è¿˜å¯ä»¥ä½¿ç”¨ ??= ä»£æ›¿?? ,åŒºåˆ«æ˜¯å‰è€…å¯ä»¥å•ç‹¬ä½œä¸ºèµ‹å€¼è¯­å¥\n\ndartè™½ç„¶åœ¨ä½¿ç”¨ä¸Šä¸åŠkotliné‚£ä¹ˆèˆ’é€‚ï¼Œä½†dartä¹Ÿä¸€ç›´åœ¨æ›´æ–°æ¢ä»£ï¼Œä¼˜ç§€çš„è¯­è¨€å‘å±•åˆ°æœ€åä¸€å®šæ˜¯æœ‰å¾ˆå¤šå…±åŒæ€§çš„ï¼Œæ‰€ä»¥ä¸è¦è¿‡äºçº ç»“äºè¯­è¨€çš„é€‰æ‹©ä¸Šï¼Œå› ä¸ºå®ƒç»ˆç©¶åªæ˜¯ä¸€ç§å·¥å…·ã€‚\n\n# ç»“æŸé—²èŠ\n\nä»å»å¹´12æœˆflutterå‘å¸ƒ1.0 releaseç‰ˆæœ¬åˆ°ä»Šå¤©ï¼Œflutterå·²ç»è¿­ä»£äº†å¥½å¤šä¸ªç‰ˆæœ¬äº†\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/introduce_flutter/008.png)\n\nè€Œæˆ‘åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ç¡®å®é‡åˆ°è¿‡ä¸€äº›é—®é¢˜ï¼Œæˆ–ç®€å•æˆ–éº»çƒ¦ï¼Œä½†å¤§éƒ¨åˆ†éƒ½æœ‰äº†è§£å†³æ–¹æ¡ˆã€‚ä»ç¨³å®šæ€§ä¸Šæ¥è®²ï¼Œä½¿ç”¨flutterçš„äº¤äº’å…¶å®å°±æ˜¯å¯¹æ•°æ®è¿›è¡Œæ“ä½œï¼Œè€Œæ­£æ˜¯å› ä¸ºè¿™æ ·ï¼Œåšåˆ°äº†è§†å›¾ä¸æ•°æ®åˆ†ç¦»ï¼Œæ‰€ä»¥å‡ºbugçš„æƒ…å†µè¦å°‘å¾—å¤šã€‚\n\nä¸ºä»€ä¹ˆæˆ‘è¦ä»‹ç»flutterç”šè‡³æ˜¯é¼“åŠ±å„ä½åŸç”Ÿå¼€å‘è€…ä»¬å»å­¦flutterï¼Œä¸»è¦åŸå› æœ‰ä¸¤ä¸ªï¼š\n- ä¸€ã€å­¦ä¹ flutterçš„æˆæœ¬å¾ˆä½ï¼Œå› ä¸ºå®ƒéš¾åº¦ä¸å¤§\n- äºŒã€ä»flutterçš„æ€§èƒ½è¡¨ç°ä¸Šæ¥çœ‹ï¼Œå®ƒæ˜¯å¯ä»¥ä»£æ›¿åŸç”Ÿåº”ç”¨çš„ï¼Œåªæ˜¯ç°åœ¨ç«å€™ä¸å¤Ÿ\n\næ‰€ä»¥å¯¹äºç°é˜¶æ®µçš„åˆä¸­çº§åŸç”Ÿå¼€å‘è€…è€Œè¨€ï¼Œæˆ‘å»ºè®®ä½ ä¸€å®šè¦æŠ½å‡ºæ—¶é—´å»äº†è§£äº†è§£flutterï¼Œå› ä¸ºå¤§éƒ¨åˆ†ä½ èƒ½é€šè¿‡åŸç”Ÿå»å®ç°çš„ä¸œè¥¿ï¼Œç”¨flutterä¸€æ ·ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå¹¶ä¸”è¿˜æ›´åŠ è½»æ¾ï¼Œè¿˜å¯ä»¥è·¨å¹³å°ã€‚\n\nå†™åˆ°è¿™é‡Œï¼Œæ–‡ç« ä¸­ä¹Ÿå¾ˆå°‘æ¶‰åŠåˆ°æŠ€æœ¯ä¸Šçš„ä¸œè¥¿ï¼Œä¸»è¦è¿˜æ˜¯ä»¥ä»‹ç»ä¸ºä¸»\n\nä¸‹é¢å†ä»‹ç»ä¸€ç‚¹ç‚¹æˆ‘éå¸¸æ¨èçš„å­¦ä¹ flutterçš„é€”å¾„å§ï¼š\n\n\n\n1ã€ **é¦–å…ˆè‡ªç„¶æ˜¯Youtubeä¸Šflutterå®˜æ–¹çš„è§†é¢‘é¡¹ç›®(ç§‘å­¦ä¸Šç½‘)ï¼š\n[Flutter](https://www.youtube.com/channel/UCwXdFgeE9KYzlDdR7TG9cMw)**\n\nè¿™é‡Œé¢æœ‰ä¸ªè¶…èµçš„ç³»åˆ—ï¼Œå°±æ˜¯æ¯å‘¨ä¸€æ›´çš„ **Flutter Widget of the Week**\n\n\n2ã€**ç„¶åä½ ä¹Ÿå¯ä»¥å…³æ³¨Bç«™çš„** **[Googleä¸­å›½è´¦å·](https://space.bilibili.com/64169458/)**\n\nå…¶ä¸­çš„è§†é¢‘éƒ½æœ‰ä¸­æ–‡ç¿»è¯‘ï¼Œå¯ä»¥æ‰¾åˆ°å…³äºflutterçš„å­¦ä¹ è§†é¢‘ï¼Œä¸è¿‡å’Œyoutubeä¸Šç›¸æ¯”æ›´æ–°è¦æ…¢å¾ˆå¤š\n\n3ã€**[ã€ŠFlutterå®æˆ˜ã€‹](https://book.flutterchina.club/)**\n\nä¸‡åˆ†æ„Ÿè°¢è¿™ä½ä½œè€…å¼€æºè¿™æœ¬æŠ€æœ¯ä¹¦ï¼\n\n\nå‰©ä¸‹çš„å­¦ä¹ é€”å¾„è¿˜æœ‰è®¸å¤šï¼Œä¸è¿‡å­¦ä¹ ä¹Ÿæ˜¯å‘æ•£çš„ï¼ŒçŸ¥é“ä¸Šé¢ä¸‰ä¸ªåï¼Œå…¶ä»–çš„é€”å¾„äºä½ ä¹Ÿä¸åœ¨è¯ä¸‹äº†ã€‚\n\n\næœ€åå†ä»‹ç»ä¸€ä¸ªå­¦ä¹ é€”å¾„\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/apk/apk.png)\n\næ²¡é”™ï¼Œå°±æ˜¯æˆ‘ç”¨flutterå†™çš„ä¸€ä¸ªå°é¡¹ç›®\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/introduce_flutter/009.jpg)\n\n"},{"articleName":"Flutterå›¾æ–‡æ··æ’åŸç”Ÿå®ç°æ–¹æ¡ˆ","createTime":"2019-04-19T21:49:47.000","lastModifiedTime":"2020-02-03T10:37:02.000","tag":"Flutter","summary":" å¼€å¤´\n\nå›¾æ–‡æ··æ’åœ¨ç§»åŠ¨ç«¯çš„å®ç°æ–¹æ¡ˆä¸»è¦æœ‰ä¸¤å¤§ç§ï¼Œæ¯”å¦‚é€šè¿‡HTMLå»åšä¸€ä¸ªWebViewçš„å¯Œæ–‡æœ¬ï¼Œ","imageAddress":"/img/pic_text.png","articleAddress":"/config/study/Flutterå›¾æ–‡æ··æ’åŸç”Ÿå®ç°æ–¹æ¡ˆ.md","articleContent":"---\ntitle: Flutterå›¾æ–‡æ··æ’åŸç”Ÿå®ç°æ–¹æ¡ˆ\ndate: 2019-04-19 21:49:47\nindex_img: /img/pic_text.png\ntags: Flutter\n---\n\n# å¼€å¤´\n\nå›¾æ–‡æ··æ’åœ¨ç§»åŠ¨ç«¯çš„å®ç°æ–¹æ¡ˆä¸»è¦æœ‰ä¸¤å¤§ç§ï¼Œæ¯”å¦‚é€šè¿‡HTMLå»åšä¸€ä¸ªWebViewçš„å¯Œæ–‡æœ¬ï¼Œæˆ–è€…é€šè¿‡åŸç”Ÿçš„æ–¹å¼å»å®ç°ã€‚\n\nä½¿ç”¨WebViewåœ¨æ€§èƒ½ä¸Šè‡ªç„¶ä¸åŠåŸç”Ÿå®ç°ï¼ŒåŒæ—¶å¼€å‘è€…éœ€è¦å…·å¤‡ä¸€å®šçš„å‰ç«¯çŸ¥è¯†ï¼Œå®ƒæœ€å¤§çš„ä¼˜åŠ¿æ˜¯è·¨å¹³å°;\n\nå‡ºäºæ€§èƒ½çš„è€ƒè™‘ï¼Œä»¥åŠæˆ‘å¯¹å‰ç«¯çŸ¥è¯†çš„äº†è§£ç¨‹åº¦ï¼Œè¿™é‡Œæˆ‘åªæ˜¯ä»‹ç»ä¸€ä¸‹å¦‚ä½•é€šè¿‡åŸç”Ÿçš„æ–¹å¼å»å®ç°å›¾æ–‡æ··æ’ã€‚\n<!--more--> \n\n# ä»‹ç»\n\nåœ¨æ‰‹æœºä¸Šï¼Œä½ ç»å¸¸èƒ½çœ‹åˆ°è¿™æ ·çš„å›¾æ–‡å®ç°æ–¹å¼ï¼Œæ¯”å¦‚è´´å§çš„è¿™ç§ï¼š\n\n<img src=\"https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Flutter%E5%9B%BE%E6%96%87%E6%B7%B7%E6%8E%92%E5%8E%9F%E7%94%9F%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88/001.png\" width = \"600\" height = \"300\" div align=center />\n\nç‚¹è¿›å»åæ˜¯è¿™æ ·çš„å±•ç¤ºï¼š\n\n\n<img src=\"https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Flutter%E5%9B%BE%E6%96%87%E6%B7%B7%E6%8E%92%E5%8E%9F%E7%94%9F%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88/002.png\" width = \"400\" height = \"720\" div align=center />\n\n\nè¿™ç§å®ç°æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œç®—æ˜¯æ–‡å­—ä¸å›¾ç‰‡åˆ†å¼€å±•ç¤ºã€‚ä¸è¿‡æ—¢ç„¶æˆ‘ä»¬è¦å®ç°çš„æ˜¯å›¾æ–‡æ··æ’ï¼Œé‚£ä¸€å®šä¼šç¨ç¨å¤æ‚ä¸€ç‚¹ã€‚\n\n# ç¤ºä¾‹\n\nä¸‹é¢æ˜¯demoçš„æ•ˆæœï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Flutter%E5%9B%BE%E6%96%87%E6%B7%B7%E6%8E%92%E5%8E%9F%E7%94%9F%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88/003.gif)\n\n\nä»ä¸Šé¢çš„demoå¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡åŸç”Ÿçš„å›¾æ–‡æ··æ’å®ç°äº†ä¸‹é¢è¿™äº›æ•ˆæœï¼š\n\n    1.å•ä¸ªå›¾ç‰‡çš„æ’å…¥\n    2.å¤šä¸ªå›¾ç‰‡çš„æ’å…¥\n    3.æ’å…¥å›¾ç‰‡æ—¶å¯¹æ–‡å­—è¿›è¡Œåˆ‡å‰²\n    4.åˆ é™¤å›¾ç‰‡æ—¶å¯¹æ–‡å­—è¿›è¡Œåˆå¹¶\n\n\nå…¶å®çœ‹åˆ°è¿™é‡Œï¼Œä½ åº”è¯¥èƒ½å¤Ÿçœ‹å¾—å‡ºæ¥ä¸€ä¸ªå¤§è‡´çš„å®ç°æ–¹æ³•äº†ï¼Œæ¥ä¸‹æ¥æˆ‘æ¥ä»‹ç»ä¸€ä¸‹æ•´ä¸ªå›¾æ–‡æ··æ’çš„ç»“æ„ã€‚\n\nç”±äºæ˜¯ç”¨Flutterå®ç°ï¼Œæ‰€ä»¥å›¾æ–‡æ··æ’ç”¨çš„ListViewï¼Œå¦‚æœæ˜¯androidçš„è¯åˆ™å¯ä»¥ä½¿ç”¨RecyclerView(iosçš„è¯æˆ‘ä¸å¤ªäº†è§£æ‰€ä»¥å°±ä¸è¯´äº†)ï¼Œå› ä¸ºå®ç°å›¾æ–‡æ··æ’ä¸»è¦æ˜¯å¯¹æ•°æ®çš„å¤„ç†ï¼Œæ‰€ä»¥å¹³å°çš„é™åˆ¶ä¸å¤§ã€‚\n\n**æ—¢ç„¶æ˜¯ListViewï¼Œå¯ä»¥çœ‹å¾—å‡ºæ¥ï¼ŒListViewçš„å†…å®¹å…¨éƒ¨æ˜¯ç”±Imageä¸TextFieldç»„æˆï¼Œæ¯å½“ä½ æ’å…¥ä¸€ä¸ªImageçš„æ—¶å€™ï¼ŒåŒæ—¶ä¼šæ–°å¢—ä¸€ä¸ªTextFieldï¼Œè€Œè¿™ä¸ªTextFieldçš„å†…å®¹åˆ™æ˜¯ä¸Šä¸ªTextFieldå…‰æ ‡åçš„æ–‡å­—ã€‚**\n\næ—¢ç„¶çŸ¥é“äº†ç»“æ„ï¼Œé‚£ä¹ˆä¸‹é¢æ¥çœ‹ä¸€ä¸‹æ˜¯å¦‚ä½•å®ç°çš„å§ã€‚\n\n\n# å®ç°\n\nå›¾æ–‡æ··æ’çš„ä¸»è¦é€»è¾‘åœ¨äºä¸¤ä¸ªï¼š\n\n    1.æ’å…¥\n    2.åˆ é™¤\n\nåœ¨è¿›è¡Œæ“ä½œä¹‹å‰ï¼Œå…ˆå®šä¹‰ä¸€ä¸ªæŠ½è±¡çš„ç»“æ„ï¼Œç”¨äºå­˜å‚¨å­—ç¬¦ä¸²æ•°æ®ï¼Œå…¶å®åªæ˜¯å¯¹MapEntryçš„ä¸€ä¸ªç®€å•ä¿®æ”¹ï¼š\n\n\n```\nclass TextEntry<K, V> {\n  K key;\n  V value;\n  factory TextEntry(K key, V value) = TextEntry<K, V>._;\n  TextEntry._(this.key, this.value);\n  String toString() => \"TextEntry($key: $value)\";\n}\n```\n\n\nç„¶åæ¥çœ‹ä¸€ä¸‹æ’å…¥çš„å®ç°ï¼š\n\n## æ’å…¥\n\n```\nclass RichTextList<T>{\n\n  List<TextEntry<T, String>> _list = [];\n\n  void insertOne(int currentPosition, String beforeText, String selectText,\n      String afterText, T t) {\n    _list[currentPosition].value = beforeText;\n    _list.insert(currentPosition + 1, TextEntry(t, \"\"));\n    _list.insert(currentPosition + 2, new TextEntry(null, afterText));\n  }\n\n}\n```\nä¼ é€’çš„å‚æ•°ä¸­å„ä¸ªçš„æ„ä¹‰å¦‚ä¸‹ï¼š\n\n- currentPositionï¼šå½“å‰TextFieldæ‰€åœ¨çš„ä½ç½®\n- beforeTextï¼šå½“å‰TextFieldä¸­å…‰æ ‡å‰çš„æ–‡å­—\n- selectTextï¼šå½“å‰TextFieldä¸­é€‰ä¸­çš„æ–‡å­—ï¼Œåœ¨è¿™é‡Œæ²¡æœ‰è¿›è¡Œå¤„ç†\n- afterTextï¼šå½“å‰TextFieldä¸­å…‰æ ‡åçš„æ–‡å­—\n- tï¼šä½ ä¼ å…¥çš„æ³›å‹å‚æ•°\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ¯æ’å…¥ä¸€ä¸ªæ•°æ®ï¼Œè¿˜ä¼šè‡ªåŠ¨æ’å…¥ä¸€ä¸ªvalueä¸ºnullçš„TextEntryï¼Œè€Œè¿™ä¸ªEntryåˆ™æ˜¯æ–‡å­—çš„å†…å®¹ï¼š\n\n```\n_list.insert(currentPosition + 2, new TextEntry(null, afterText));\n```\n\næ‰€ä»¥å›¾æ–‡æ··æ’çš„å…³é”®åœ¨äºæœ‰ä¸€ä¸ªç»Ÿä¸€çš„æ•°æ®ç»“æ„ï¼Œåç»­å¦‚æœæƒ³å¯¹è¿™ä¸ªæ•°æ®ç»“æ„è¿›è¡Œè½¬æ¢ä¹Ÿå¯ä»¥ä¾æ®è¿™ä¸ªæ¥ï¼Œvalueä¸ºç©ºçš„TextEntryè¡¨ç¤ºæ–‡å­—ï¼Œå…¶ä»–çš„åˆ™æ˜¯ä½ ä¼ å…¥çš„æ³›å‹å‚æ•°ã€‚\n\nä¸‹é¢æ˜¯æ’å…¥å¤šæ¡çš„ä»£ç ï¼š\n\n\n```\n  void insert(int currentPosition, String beforeText, String selectText, String afterText, List<T> list){\n    _list[currentPosition].value = beforeText;\n    for(int i = 0; i < list.length; i++){\n      _list.insert(currentPosition + 2*i + 1, TextEntry(list[i], \"\"));\n      _list.insert(currentPosition + 2*i + 2, new TextEntry(null, i == list.length - 1?afterText:\"\"));\n    }\n  }\n```\n\nå½“ç„¶ï¼Œä½ å¯ä»¥ç”¨æ’å…¥å¤šä¸ªçš„æ›¿ä»£ä¸Šé¢æ’å…¥å•ä¸ªçš„ã€‚\n\nç„¶åå°±æ˜¯åˆ é™¤çš„é€»è¾‘äº†ï¼š\n\n## åˆ é™¤\n\nåˆ é™¤ä¹Ÿéå¸¸ç®€å•ï¼š\n\n\n```\n  void remove(int currentPosition) {\n      String afterText = _list[currentPosition + 1].value;\n      _list[currentPosition - 1].value += afterText;\n      _list.removeAt(currentPosition + 1);\n      _list.removeAt(currentPosition);\n  }\n```\n\nåˆ é™¤çš„ä¸»è¦é€»è¾‘åœ¨äºæŠŠä¸‹ä¸€ä¸ªTextFieldä¸­çš„å†…å®¹è¡¥åœ¨ä¸Šä¸€ä¸ªTextFieldä¸­\n\n\næ ¸å¿ƒçš„é€»è¾‘å¤§æ¦‚å°±æ˜¯è¿™æ ·ã€‚\n\n\nå…¶ä¸­æœ‰ç‚¹ä¸æ–¹ä¾¿çš„å°±æ˜¯å¯èƒ½ä¼šä¸ä½ çš„æ•°æ®ç»“æ„ä¸å¤ªç›¸åŒï¼Œæ‰€ä»¥è½¬æ¢çš„å·¥ä½œéœ€è¦è‡ªå·±å¦å¤–å®ç°ï¼Œå½“ç„¶å¦‚æœä½ ä¸æƒ³ä½¿ç”¨æŠ½è±¡çš„ç»“æ„ä¹Ÿå¯ä»¥è‡ªå·±è‡ªå®šä¹‰ä¸€ç§ï¼Œæ¯”å¦‚è¯´ä¸‹é¢è¿™ç§ï¼š\n\n\n```\nclass CustomTypeList{\n  TypeFlag flag;//é»˜è®¤ä¸ºæ–‡å­—â€”â€”0ï¼šæ–‡å­—ï¼Œ1ï¼šå›¾ç‰‡ï¼Œ2ï¼šè§†é¢‘ï¼Œ3ï¼šéŸ³ä¹\n  var imageUrl;\n  CustomTypeList({this.flag = TypeFlag.text, this.imageUrl = \"\"});\n}\n\nenum TypeFlag{\n  text,\n  image,\n  video,\n  music\n}\n```\nå®é™…ä½¿ç”¨ä¸­å¯ä»¥æŠŠæšä¸¾ç±»å‹æ›¿æ¢æˆintå€¼ï¼Œè¿™æ ·é…åˆåç«¯æ›´ä½³ã€‚\n\n**é€šè¿‡ListViewå®ç°å›¾æ–‡æ··æ’æœ€å¤§çš„ä¸€ä¸ªä¼˜åŠ¿åœ¨äºä½ å¯ä»¥å°†æ–‡å­—ä¸ä»»ä½•ç±»å‹çš„å¸ƒå±€æ··åˆåœ¨ä¸€èµ·ï¼Œå¯ä»¥æ˜¯å›¾ç‰‡ï¼Œå¯ä»¥æ˜¯è§†é¢‘ï¼Œä¹Ÿå¯ä»¥æ˜¯éŸ³ä¹ï¼**\n\n\n# ç»“å°¾\n\nè¿™ç¯‡æ–‡ç« æ²¡æœ‰æŠŠå…¨éƒ¨çš„ä»£ç è´´å‡ºæ¥ï¼Œæˆ‘å·²ç»æŠŠdemoæ”¾åœ¨ä»“åº“é‡Œäº†ï¼Œå°ä¼™ä¼´ä»¬æœ‰æ„å‘å¯ä»¥å»ä¸‹è½½æŸ¥çœ‹ã€‚\n\n[**é¡¹ç›®åœ°å€**](https://github.com/asjqkkkk/TextPicList)\n\næœ€åçš„æœ€åï¼Œä¸ºæˆ‘ç”¨çº¯Flutterå†™çš„ä¸€ä¸ªæµ‹è¯•é¡¹ç›®æ‰“ä¸ªå°å¹¿å‘Šï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/apk/apk.png)\n\nå¦‚æœä½ å¯¹äºä¸Šé¢å›¾æ–‡æ··æ’æœ€åçš„æ•ˆæœä¸æ˜¯ç‰¹åˆ«æ»¡æ„ï¼Œä¹Ÿå¯ä»¥åˆ°ä¸Šé¢çš„app(androidç‰ˆ)é‡Œé¢ç§ä¸€ä¸‹,æœ‰åšè¿‡ç‰¹æ®Šå¤„ç†å“¦ï¼"},{"articleName":"Android Studioè‡ªå®šä¹‰æ¨¡æ¿å®ç°ä¸€é”®åˆ›å»ºMVPç»“æ„","createTime":"2018-12-02T21:49:47.000","lastModifiedTime":"2020-02-03T10:12:55.000","tag":"Android","summary":" å‰è¨€\r\n\r\nä¹‹å‰æœ‰å†™è¿‡å…³äºå¦‚ä½•ä½¿ç”¨ DataBinding çš„ä¸¤ç¯‡æ–‡ç« ï¼Œä¸ä»…ä»…æ˜¯ä¸ºäº†æ¶ˆç­æ‰ä¸€éƒ¨åˆ†","imageAddress":"/img/create_mvp.png","articleAddress":"/config/study/Android Studioè‡ªå®šä¹‰æ¨¡æ¿å®ç°ä¸€é”®åˆ›å»ºMVPç»“æ„.md","articleContent":"---\ntitle: Android Studioè‡ªå®šä¹‰æ¨¡æ¿å®ç°ä¸€é”®åˆ›å»ºMVPç»“æ„\ndate: 2018-12-02 21:49:47\nindex_img: /img/create_mvp.png\ntags: Android\n---\n\n# å‰è¨€\r\n\r\nä¹‹å‰æœ‰å†™è¿‡å…³äºå¦‚ä½•ä½¿ç”¨ DataBinding çš„ä¸¤ç¯‡æ–‡ç« ï¼Œä¸ä»…ä»…æ˜¯ä¸ºäº†æ¶ˆç­æ‰ä¸€éƒ¨åˆ†é‡å¤ä»£ç ï¼Œæ›´æ˜¯ä¸ºäº†æé«˜å¼€å‘æ•ˆç‡ã€‚è¯¦æƒ…å¯ä»¥ç‚¹å‡»ä¸‹æ–¹çš„ä¼ é€é—¨  \r\n[DataBindingâ€”â€”ä»è·¯äººåˆ°å¥½å‹ï¼ˆä¸€ï¼‰ï¼šåˆé‡](https://oldchen.top/2018/10/17/DataBinding%E2%80%94%E2%80%94%E4%BB%8E%E8%B7%AF%E4%BA%BA%E5%88%B0%E5%A5%BD%E5%8F%8B%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E5%88%9D%E9%81%87/)  \r\n[DataBindingâ€”â€”ä»ç›¸è¯†åˆ°ç›¸çŸ¥ï¼ˆäºŒï¼‰ï¼šäº’é…Œ](https://oldchen.top/2018/10/20/DataBinding%E2%80%94%E2%80%94%E4%BB%8E%E7%9B%B8%E8%AF%86%E5%88%B0%E7%9B%B8%E7%9F%A5%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E4%BA%92%E9%85%8C/)\r\n\r\n<!--more--> \r\n\r\nè€Œè¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»çš„å°±æ˜¯å¦‚ä½•é€šè¿‡ Android Studio æä¾›çš„æ¨¡ç‰ˆåŠŸèƒ½å»è‡ªå®šä¹‰æ¨¡ç‰ˆç»“æ„ï¼Œä»è€Œå®ç°ç±»ä¼¼äºä¸€é”®åˆ›å»ºæ•´ä¸ªMVPä»£ç çš„åŠŸèƒ½ã€‚å¯ä»¥è¯´åœ¨æé«˜æ•ˆç‡çš„é“è·¯ä¸Šï¼Œåˆå‘å‰èµ°äº†ä¸€å¤§æ­¥\r\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E6%9D%BF%E5%AE%9E%E7%8E%B0%E4%B8%80%E9%94%AE%E5%88%9B%E5%BB%BAMVP%E7%BB%93%E6%9E%84/001.jpg)\r\n\r\nä¸‹é¢å¯ä»¥æ¥çœ‹ä¸€çœ‹å…·ä½“æ•ˆæœï¼š\r\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E6%9D%BF%E5%AE%9E%E7%8E%B0%E4%B8%80%E9%94%AE%E5%88%9B%E5%BB%BAMVP%E7%BB%93%E6%9E%84/002.gif)\r\n\r\n# ä»‹ç»\r\n\r\nåœ¨ Android Studio ä¸­ï¼Œåˆ›å»ºä¸€ä¸ª Activity å¯ä»¥ç›´æ¥é€šè¿‡ **File -> New -> Activity** æ¥è¿›è¡Œé€‰æ‹©åˆ›å»º\r\n\r\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E6%9D%BF%E5%AE%9E%E7%8E%B0%E4%B8%80%E9%94%AE%E5%88%9B%E5%BB%BAMVP%E7%BB%93%E6%9E%84/003.png)\r\n\r\né€šè¿‡è¿™ç§æ–¹å¼åˆ›å»ºçš„ Activity ä¼šè‡ªåŠ¨åœ¨ AndroidManifest.xml ä¸­å®Œæˆæ³¨å†Œï¼Œåˆ›å»ºå…¶ä»–ç»„ä»¶ä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼ã€‚\r\n\r\nä¸è¿‡ï¼Œå¦‚æœä½ æ­£åœ¨ä½¿ç”¨æŸç§å¼€å‘æ¨¡å¼ï¼Œè­¬å¦‚ **MVPã€MVVM** ç­‰ï¼Œä½ æ¯åˆ›å»ºä¸€ä¸ª Activity å°±æ„å‘³ç€éœ€è¦åŒæ—¶åˆ›å»ºä¸€ç³»åˆ—å…¶ä»–ç›¸å…³çš„ç±»ã€‚\r\n\r\nä¸ºäº†é¿å…è¿™ç§æ¯«æ— æ„ä¹‰çš„é‡å¤æ€§åŠ³åŠ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™æ¨¡æ¿ä»£ç å»å®ç°ä¸€é”®åˆ›å»ºé‡å¤ä»£ç ã€‚\r\n\r\n# å¼€å§‹\r\n\r\nä¸‹é¢æˆ‘ä»¬å°±æ¥å¼€å§‹æ¨¡ç‰ˆçš„ç¼–å†™å§ã€‚\r\n\r\né¦–å…ˆï¼Œæ‰¾åˆ°ä½ çš„ **Android Studio** çš„å®‰è£…ç›®å½•ï¼Œç„¶åæ ¹æ®è¿™ä¸ªç›®å½•æ‰¾åˆ° **...\\templates** ç›®å½•ï¼š\r\n\r\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E6%9D%BF%E5%AE%9E%E7%8E%B0%E4%B8%80%E9%94%AE%E5%88%9B%E5%BB%BAMVP%E7%BB%93%E6%9E%84/004.png)\r\n\r\nç„¶åè¿›å…¥ **activityes** ç›®å½•ï¼Œæˆ‘ä»¬å°†è¦ç¼–å†™çš„å„ç§æ¨¡ç‰ˆå°±åœ¨è¿™ä¸ªç›®å½•å†…ï¼š\r\n\r\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E6%9D%BF%E5%AE%9E%E7%8E%B0%E4%B8%80%E9%94%AE%E5%88%9B%E5%BB%BAMVP%E7%BB%93%E6%9E%84/005.png)\r\n\r\nè¦è¯´å¦‚ä½•å»ç¼–å†™æ¨¡ç‰ˆä»£ç ï¼Œä¸€å¼€å§‹æˆ‘ä¹Ÿæ˜¯ä¸€æ— æ‰€çŸ¥çš„ï¼Œä¸è¿‡å¥½åœ¨ Android Studio å·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†è¿™äº›ä¾‹å­ï¼Œæˆ‘ä»¬ç›´æ¥å‚è€ƒä¾‹å­å»å†™ã€‚\r\n\r\nå°±æ‹¿æœ€ç®€å•çš„ **Empty Activity** æ¥å¼€å§‹å§\r\n\r\nè¿›å…¥åˆ° **EmptyActivity** ç›®å½•\r\n\r\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E6%9D%BF%E5%AE%9E%E7%8E%B0%E4%B8%80%E9%94%AE%E5%88%9B%E5%BB%BAMVP%E7%BB%93%E6%9E%84/006.png)\r\n\r\n## globals.xml.ftl\r\n\r\næ‰“å¼€ **globals.xml.ftl** æ–‡ä»¶ï¼Œä¸‹é¢æ˜¯å®ƒçš„å†…å®¹ï¼š\r\n\r\n```\r\n<?xml version=\"1.0\"?>\r\n<globals>\r\n    <global id=\"hasNoActionBar\" type=\"boolean\" value=\"false\" />\r\n    <global id=\"parentActivityClass\" value=\"\" />\r\n    <global id=\"simpleLayoutName\" value=\"${layoutName}\" />\r\n    <global id=\"excludeMenu\" type=\"boolean\" value=\"true\" />\r\n    <global id=\"generateActivityTitle\" type=\"boolean\" value=\"false\" />\r\n    <#include \"../common/common_globals.xml.ftl\" />\r\n</globals>\r\n\r\n```\r\n\r\næ ¹æ®æ–‡ä»¶åæ¥çœ‹ï¼Œ **globals.xml.ftl** çš„ä½œç”¨æ˜¯ç”¨æ¥æ§åˆ¶ä¸€äº›å…¨å±€å˜é‡ï¼Œæ¯”å¦‚æ˜¯å¦æ˜¾ç¤º **ActionBar** ç­‰ï¼Œæš‚ä¸”å…ˆä¸ç”¨ç®¡å®ƒ\r\n\r\n## recipe.xml.ftl\r\n\r\n **recipe.xml.ftl** æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š\r\n \r\n```\r\n<?xml version=\"1.0\"?>\r\n<#import \"root://activities/common/kotlin_macros.ftl\" as kt>\r\n<recipe>\r\n    <#include \"../common/recipe_manifest.xml.ftl\" />\r\n    <@kt.addAllKotlinDependencies />\r\n\r\n<#if generateLayout>\r\n    <#include \"../common/recipe_simple.xml.ftl\" />\r\n    <open file=\"${escapeXmlAttribute(resOut)}/layout/${layoutName}.xml\" />\r\n</#if>\r\n\r\n    <instantiate from=\"root/src/app_package/SimpleActivity.${ktOrJavaExt}.ftl\"\r\n                   to=\"${escapeXmlAttribute(srcOut)}/${activityClass}.${ktOrJavaExt}\" />\r\n    <open file=\"${escapeXmlAttribute(srcOut)}/${activityClass}.${ktOrJavaExt}\" />\r\n\r\n</recipe>\r\n\r\n```\r\n\r\nç¬¬ä¸€æ®µ\r\n\r\n        <#import \"root://activities/common/kotlin_macros.ftl\" as kt>\r\n\r\nå°±æ˜¯ç”¨äºå¯¼å…¥Kotlinçš„ç›¸å…³å‘½ä»¤ï¼ŒåŒæ—¶å®ƒçš„åˆ«åä¸º **kt**\r\n\r\nä¸»è¦è¿˜æ˜¯æ³¨æ„ **instantiate** ä»£ç å—ä¸­çš„ç›¸å…³ä¿¡æ¯ï¼Œ å…¶ä¸­ **${ktOrJavaExt}** è¡¨ç¤ºå½“ä½ åˆ›å»ºæ¨¡ç‰ˆçš„æ—¶å€™ï¼Œåˆ›å»ºçš„ **.java** æ–‡ä»¶è¿˜æ˜¯ **.kt** æ–‡ä»¶ï¼Œè€Œç›¸å¯¹åº”çš„ï¼Œä½ éœ€è¦åœ¨ç¼–å†™æ¨¡ç‰ˆä¾‹å­çš„æ—¶å€™åˆ†åˆ«å†™ä¸Šå¯¹åº”çš„ä¸¤ä»½ **Java** ä¸ **Kotlin** ä»£ç \r\n\r\n**open** ä»£ç å—å°±æ˜¯åˆ›å»ºæ¨¡ç‰ˆåï¼Œé»˜è®¤æ‰“å¼€çš„æ–‡ä»¶\r\n\r\n# template.xml\r\n\r\n**template.xml** ä»£ç ç•¥é•¿ï¼Œè¿™é‡Œåªæ˜¯è´´å‡ºäº†å¤§è‡´ä»£ç \r\n\r\n```\r\n<?xml version=\"1.0\"?>\r\n<template\r\n    format=\"5\"\r\n    revision=\"5\"\r\n    name=\"Empty Activity\"\r\n    minApi=\"9\"\r\n    minBuildApi=\"14\"\r\n    description=\"Creates a new empty activity\">\r\n\r\n    <category value=\"Activity\" />\r\n    <formfactor value=\"Mobile\" />\r\n\r\n    <parameter\r\n        id=\"activityClass\"\r\n        name=\"Activity Name\"\r\n        type=\"string\"\r\n        constraints=\"class|unique|nonempty\"\r\n        suggest=\"${layoutToActivity(layoutName)}\"\r\n        default=\"MainActivity\"\r\n        help=\"The name of the activity class to create\" />\r\n        \r\n        \r\n        ...\r\n\r\n    <!-- 128x128 thumbnails relative to template.xml -->\r\n    <thumbs>\r\n        <!-- default thumbnail is required -->\r\n        <thumb>template_blank_activity.png</thumb>\r\n    </thumbs>\r\n\r\n    <globals file=\"globals.xml.ftl\" />\r\n    <execute file=\"recipe.xml.ftl\" />\r\n\r\n</template>\r\n\r\n```\r\næˆ‘ä»¬æŒ‘å‡ºå…¶ä¸­çš„é‡ç‚¹æ¥è¯´\r\n\r\n```\r\n<category value=\"Activity\" />\r\n```\r\nè¡¨ç¤ºå½“å‰çš„è¿™ä¸ªæ¨¡ç‰ˆçš„åˆ†ç±»ï¼Œå½“å‰çš„ **Value** æ˜¯ **Activity** ï¼Œå°±è¡¨ç¤ºå®ƒä¼šå‡ºç°åœ¨ **File -> New -> Activity** ä¸­ï¼Œè¿™ä¸ªæ˜¯å¯ä»¥è‡ªå®šä¹‰çš„.\r\n\r\n```\r\n        <thumbs>\r\n        <!-- default thumbnail is required -->\r\n        <thumb>template_blank_activity.png</thumb>\r\n        </thumbs>\r\n```\r\n**thumbs** ç”¨äºæŒ‡å®šåˆ›å»ºæ¨¡ç‰ˆæ—¶æ‰€å±•ç¤ºå‡ºæ¥çš„å›¾ç‰‡\r\n\r\nè€Œæœ€é‡è¦çš„ï¼Œè¿˜æ˜¯ **parameter** ä»£ç å—çš„å†…å®¹äº†ï¼Œåœ¨è¿™ä¹‹ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨ä»¥ä¸‹å‡ ä¸ªï¼Œå…¶ä»–çš„é¡¾åæ€ä¹‰å³å¯ã€‚\r\n\r\n\r\n```\r\n    <parameter\r\n        id=\"activityClass\"\r\n        name=\"Activity Name\"\r\n        type=\"string\"\r\n        constraints=\"class|unique|nonempty\"\r\n        suggest=\"${layoutToActivity(layoutName)}\"\r\n        default=\"MainActivity\"\r\n        help=\"The name of the activity class to create\" />\r\n\r\n```\r\n**activityClass** è¡¨ç¤ºæ‰€è¦åˆ›å»ºçš„ Activity ï¼Œå…¶ä¸­ **default** ä¸ºé»˜è®¤åã€‚\r\n\r\n\r\n```\r\n    <parameter\r\n        id=\"generateLayout\"\r\n        name=\"Generate Layout File\"\r\n        type=\"boolean\"\r\n        default=\"true\"\r\n        help=\"If true, a layout file will be generated\" />\r\n```\r\nä¸Šé¢çš„ä»£ç å—è¡¨ç¤ºæ˜¯å¦åŒæ—¶è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªActivityå¯¹åº”çš„å¸ƒå±€\r\n\r\n\r\n```\r\n  <parameter\r\n        id=\"layoutName\"\r\n        name=\"Layout Name\"\r\n        type=\"string\"\r\n        constraints=\"layout|unique|nonempty\"\r\n        suggest=\"${activityToLayout(activityClass)}\"\r\n        default=\"activity_main\"\r\n        visibility=\"generateLayout\"\r\n        help=\"The name of the layout to create for the activity\" />\r\n```\r\n **layoutName** åˆ™è¡¨ç¤ºå¸ƒå±€çš„åå­—ï¼Œè¿™é‡Œçš„ **suggest** å±æ€§æ‰€å¡«å†™çš„å†…å®¹å³ä¸ºå¸ƒå±€åï¼Œ**${activityToLayout(activityClass)}**åˆ™ä¸ºè·ŸéšActivityçš„åå­—ï¼Œå…¶ä¸­ **activityClass** æ˜¯Activityåå­—çš„å¼•ç”¨\r\n \r\n å‰©ä¸‹çš„ä¸ç”¨å†ä½œè¯´æ˜ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥è§åçŸ¥æ„ã€‚\r\n \r\n# æ¨¡ç‰ˆä»£ç \r\n\r\næ¥ä¸‹æ¥æˆ‘ä»¬ä» **EmptyActivity** ä¸­çš„ **root** ç›®å½•ä¸€ç›´è¿›å…¥ï¼Œç›´åˆ°çœ‹åˆ°ä¸‹é¢ä¸¤ä¸ªæ–‡ä»¶\r\n\r\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E6%9D%BF%E5%AE%9E%E7%8E%B0%E4%B8%80%E9%94%AE%E5%88%9B%E5%BB%BAMVP%E7%BB%93%E6%9E%84/007.png)\r\n\r\nå¯ä»¥çœ‹åˆ°ï¼Œä¸€ä¸ªåç¼€æ˜¯ **java.ftl** å¦å¤–ä¸€ä¸ªåç¼€æ˜¯ **kt.ftl**ï¼Œä»–ä»¬åˆ†åˆ«ç”¨äºåˆ›å»º Javaæ¨¡ç‰ˆä¸Kotlinæ¨¡ç‰ˆï¼Œå¦‚æœä½ æš‚æ—¶ä¸ä½¿ç”¨Kotlinçš„è¯ï¼Œå¯ä»¥ä¸ç”¨å»å…³å¿ƒ Kotlinæ¨¡ç‰ˆï¼Œå½“ä½ å®Œæˆäº†Javaæ¨¡ç‰ˆçš„ç¼–å†™ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Android Studioè‡ªå¸¦çš„è½¬æ¢åŠŸèƒ½ï¼Œè¿˜æ˜¯è›®æ–¹ä¾¿çš„ã€‚\r\n\r\nä¸‹é¢æ¥çœ‹ä¸€ä¸‹Javaçš„æ¨¡ç‰ˆä»£ç ï¼š\r\n\r\n```\r\npackage ${packageName};\r\n\r\nimport ${superClassFqcn};\r\nimport android.os.Bundle;\r\n<#if (includeCppSupport!false) && generateLayout>\r\nimport android.widget.TextView;\r\n</#if>\r\n\r\npublic class ${activityClass} extends ${superClass} {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n<#if generateLayout>\r\n        setContentView(R.layout.${layoutName});\r\n       <#include \"../../../../common/jni_code_usage.java.ftl\">\r\n<#elseif includeCppSupport!false>\r\n\r\n        // Example of a call to a native method\r\n        android.util.Log.d(\"${activityClass}\", stringFromJNI());\r\n</#if>\r\n    }\r\n<#include \"../../../../common/jni_code_snippet.java.ftl\">\r\n}\r\n\r\n```\r\n- ${packageName}ï¼šè¡¨ç¤ºå½“å‰åŒ…å\r\n- ${activityClass}ï¼šè¡¨ç¤ºå½“å‰çš„Activityåå­—\r\n- ${superClass}ï¼šè¡¨ç¤ºç»§æ‰¿çš„Activityï¼ŒåŒæ—¶ä¸ºäº†è®©è¿™ä¸ªçˆ¶ç±»ç”Ÿæ•ˆï¼Œéœ€è¦åœ¨importä¸­åŠ å…¥${superClassFqcn}\r\n- ${layoutName}ï¼šå½“å‰Activityæ‰€å¯¹åº”çš„å¸ƒå±€å\r\n\r\nç›®å‰æˆ‘ä»¬åªéœ€è¦å…³æ³¨ä¸Šé¢è¿™éƒ¨åˆ†ï¼Œæ¥ä¸‹æ¥å¯ä»¥çœ‹ä¸€ä¸‹æˆ‘ä»¬å®é™…æƒ³è¦åˆ›å»ºçš„MVPç»“æ„ï¼š\r\n\r\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E6%9D%BF%E5%AE%9E%E7%8E%B0%E4%B8%80%E9%94%AE%E5%88%9B%E5%BB%BAMVP%E7%BB%93%E6%9E%84/008.png)\r\n\r\nç¼–å†™æ¨¡ç‰ˆä»£ç å‰ï¼Œæœ€å¥½çš„æ–¹å¼æ˜¯å…ˆå†™ä¸€éä¾‹å­ï¼Œç„¶åå¯¹ç…§ä¾‹å­å»æ›¿æ¢å…³é”®åéƒ¨åˆ†ï¼Œè¿™æ ·åšæ˜¯æœ€è½»æ¾çš„ã€‚\r\n\r\nä¸‹é¢å°±æ¥çœ‹ä¸€çœ‹å…·ä½“çš„å®ç°å§ï¼š\r\n\r\n# æ ·ä¾‹ä»£ç \r\n\r\n\r\n## æ¥å£éƒ¨åˆ†ï¼šTestActivityContact\r\n\r\n\r\n```\r\npackage com.example.testcustomtemplates.contact;\r\n\r\npublic interface TestActivityContact {\r\n    interface Presenter<T> {\r\n        void succeed(T t);\r\n        void failed(T t);\r\n        void error(Throwable e);\r\n        void subscribe();\r\n        void unSubscribe();\r\n    }\r\n\r\n    interface View<T> {\r\n        void setPresenter(Presenter presenter);\r\n        void succeed(T t);\r\n        void failed(T t);\r\n        void error(Throwable e);\r\n    }\r\n    \r\n    interface Model {\r\n        void setPresenter(Presenter presenter);\r\n    }\r\n}\r\n```\r\nä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œè¿™é‡Œå¹¶æ²¡æœ‰å¦å¤–åˆ›å»ºä¸€äº›åŸºç±»æ¥å£ï¼Œå¯ä»¥çœ‹åˆ°ä¸Šé¢ä»£ç ä¸­åˆ†åˆ«å¯¹åº” MVP ç»“æ„ä¸­ä¸‰ä¸ªæ¨¡å—çš„æ¥å£ï¼Œå†™çš„æ˜¯æœ€åŸºæœ¬çš„éœ€æ±‚æ–¹æ³•ï¼Œä¸è¿‡ MVP ä¹Ÿä¸éƒ½æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œè¿™é‡Œä½ å¯ä»¥å®šä¹‰è‡ªå·±æƒ³å†™çš„æ–¹æ³•ã€‚\r\n\r\n## Modelå±‚ï¼šTestActivityModel\r\n\r\n\r\n```\r\npackage com.example.testcustomtemplates.model;\r\n\r\nimport android.content.Context;\r\nimport com.example.testcustomtemplates.contact.TestActivityContact;\r\n\r\npublic class TestActivityModel implements TestActivityContact.Model {\r\n\r\n    private Context context;\r\n    private TestActivityContact.Presenter mPresenter;\r\n\r\n    public TestActivityModel(Context context) {\r\n        this.context = context;\r\n    }\r\n\r\n    @Override\r\n    public void setPresenter(TestActivityContact.Presenter presenter) {\r\n        this.mPresenter = presenter;\r\n    }\r\n}\r\n```\r\nModelå±‚ä¸»è¦å°±æ˜¯åšä¸€äº›ç½‘ç»œè¯·æ±‚ï¼Œå­˜å‚¨ä¹‹ç±»çš„æ•°æ®ç›¸å…³æ“ä½œï¼Œä¸å¯ä»¥æŒæœ‰å¯¹Viewçš„å¼•ç”¨ï¼Œä»–æ˜¯é€šè¿‡Presenterå»å’ŒViewè¿›è¡Œäº¤äº’çš„ã€‚\r\n\r\n## Presenterå±‚ï¼šTestActivityPresenter\r\n\r\n\r\n```\r\npackage com.example.testcustomtemplates.presenter;\r\n\r\nimport android.content.Context;\r\nimport com.example.testcustomtemplates.contact.TestActivityContact;\r\nimport com.example.testcustomtemplates.model.TestActivityModel;\r\n\r\npublic class TestActivityPresenter<T> implements TestActivityContact.Presenter<T> {\r\n\r\n    private TestActivityContact.View mView;\r\n    private TestActivityModel mModel;\r\n    private Context context;\r\n\r\n    public TestActivityPresenter(TestActivityContact.View mView, Context context) {\r\n        this.mView = mView;\r\n        this.context = context;\r\n        mModel = new TestActivityModel(context);\r\n\r\n    }\r\n    @Override\r\n    public void succeed(T t) {\r\n\r\n    }\r\n    @Override\r\n    public void failed(T t) {\r\n\r\n    }\r\n    @Override\r\n    public void error(Throwable e) {\r\n\r\n    }\r\n    @Override\r\n    public void subscribe() {\r\n\r\n    }\r\n    @Override\r\n    public void unSubscribe() {\r\n\r\n    }\r\n}\r\n```\r\nPresenterå±‚è‡ªç„¶ä¸å¿…å¤šè¯´ï¼Œä»–æœ€å¥½æ˜¯ä¸è¦æŒæœ‰Viewæ§ä»¶çš„å¼•ç”¨ï¼Œå¤§éƒ¨åˆ†çš„é€»è¾‘æ“ä½œéœ€è¦ä»–æ¥å®Œæˆï¼Œä¸è¿‡ä¸å¯é¿å…çš„ï¼Œå¦‚æœä¸šåŠ¡é€»è¾‘å¤æ‚äº†ï¼ŒPresenterå±‚ä¹Ÿä¼šå˜å¾—è‡ƒè‚¿ï¼Œè¿™ä¹Ÿæ˜¯MVPç»“æ„çš„ä¸€ä¸ªçŸ­å¤„ã€‚\r\n\r\n## Viewå±‚ï¼šTestActivity\r\n\r\n```\r\npackage com.example.testcustomtemplates.activity;\r\n\r\nimport android.support.v7.app.AppCompatActivity;\r\nimport android.os.Bundle;\r\nimport com.example.testcustomtemplates.R;\r\nimport com.example.testcustomtemplates.contact.TestActivityContact;\r\nimport com.example.testcustomtemplates.presenter.TestActivityPresenter;\r\n\r\npublic class TestActivity<T> extends AppCompatActivity implements TestActivityContact.View<T> {\r\n\r\n    private TestActivityContact.Presenter mPresenter;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_test);\r\n        new TestActivityPresenter<T>(this, this);\r\n    }\r\n\r\n    @Override\r\n    public void setPresenter(TestActivityContact.Presenter presenter) {\r\n        this.mPresenter = presenter;\r\n    }\r\n\r\n    @Override\r\n    public void succeed(T t) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void failed(T t) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void error(Throwable e) {\r\n\r\n    }\r\n}\r\n\r\n```\r\nActivityæˆ–è€…Fragmentéƒ½å¯ä»¥ç”¨ä½œViewå±‚ï¼Œè¿™å±‚ä¸»è¦æ˜¯å¯¹ä¸€äº›è§†å›¾æ§ä»¶çš„çŠ¶æ€è¿›è¡Œåˆ‡æ¢ï¼Œä¸åšå¤æ‚çš„é€»è¾‘æ“ä½œã€‚\r\n\r\nçœ‹å®Œä¸Šé¢çš„è¿™äº›ä»£ç åï¼Œå…¶å®å°±å¯ä»¥å¼€å§‹ç›´æ¥ç¼–å†™æˆ‘ä»¬çš„æ¨¡ç‰ˆä»£ç äº†ã€‚\r\n\r\n# æ¨¡ç‰ˆç¼–å†™\r\n\r\né¦–å…ˆï¼Œå¯ä»¥Copyä¸€ä»½ **EmptyActivity** æ•´ä¸ªæ¨¡ç‰ˆçš„æ–‡ä»¶ï¼Œç„¶åæ”¹ä¸€ä¸‹åå­—ï¼Œéšä¾¿ä»€ä¹ˆéƒ½å¯ä»¥ï¼Œè¿™é‡Œæˆ‘å°†å…¶æ”¹æˆ **MvpDemoActivity**\r\n\r\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E6%9D%BF%E5%AE%9E%E7%8E%B0%E4%B8%80%E9%94%AE%E5%88%9B%E5%BB%BAMVP%E7%BB%93%E6%9E%84/009.png)\r\n\r\nç„¶åæˆ‘ä»¬é¦–å…ˆå¯¹ **template.xml** æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œä¸»è¦ä¿®æ”¹ä¸‹é¢è¿™ä¸ªéƒ¨åˆ†ï¼š\r\n\r\n\r\n```\r\n<category value=\"Activity\" />\r\n```\r\nç„¶åæ˜¯å¯¹ **recipe.xml.ftl** æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œä¿®æ”¹åå¦‚ä¸‹ï¼š\r\n\r\n\r\n```\r\n<?xml version=\"1.0\"?>\r\n<#import \"root://activities/common/kotlin_macros.ftl\" as kt>\r\n<recipe>\r\n    <#include \"../common/recipe_manifest.xml.ftl\" />\r\n    <@kt.addAllKotlinDependencies />\r\n\r\n<#if generateLayout>\r\n    <#include \"../common/recipe_simple.xml.ftl\" />\r\n    <open file=\"${escapeXmlAttribute(resOut)}/layout/${layoutName}.xml\" />\r\n</#if>\r\n\r\n\t<!--View-activity-->\r\n    <instantiate from=\"root/src/app_package/MvpActivity.java.ftl\"\r\n                   to=\"${escapeXmlAttribute(srcOut)}/activity/${activityClass}.java\" />\r\n\t<!--Model-->\r\n\t<instantiate from=\"root/src/app_package/MvpModel.java.ftl\"\r\n                   to=\"${escapeXmlAttribute(srcOut)}/model/${activityClass}Model.java\" />\t\r\n\t<!--Contact-->\r\n\t<instantiate from=\"root/src/app_package/MvpContact.java.ftl\"\r\n                   to=\"${escapeXmlAttribute(srcOut)}/contact/${activityClass}Contact.java\" />\r\n\t<!--Presenter-->\r\n\t<instantiate from=\"root/src/app_package/MvpPresenter.java.ftl\"\r\n                   to=\"${escapeXmlAttribute(srcOut)}/presenter/${activityClass}Presenter.java\" />\t   \r\n    <open file=\"${escapeXmlAttribute(srcOut)}/activity/${activityClass}.java\" />\r\n\r\n</recipe>\r\n\r\n```\r\n\r\nä¸Šé¢çš„ä»£ç è¡¨ç¤ºåªç¼–å†™äº†Javaç‰ˆï¼Œå½“ç„¶ä½ åœ¨ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ä¹‹å‰è¿˜æ˜¯éœ€è¦åˆ›å»ºç›¸å¯¹åº”çš„å‡ ä¸ªç±»çš„æ¨¡ç‰ˆä»£ç çš„ã€‚è¿™é‡Œå‡ºäºç¯‡å¹…è€ƒè™‘æš‚æ—¶å°±ä¸è´´å‡ºå®é™…çš„æ¨¡ç‰ˆä»£ç äº†ï¼Œä¸‹é¢ä¼šç»™å‡ºgithubåœ°å€ï¼Œç¼–å†™äº†Javaç‰ˆå’ŒKotlinç‰ˆçš„ï¼Œå¤§å®¶å¯ä»¥æ‹¿å»å‚è€ƒ\r\n\r\n[Githubé¡¹ç›®é“¾æ¥](https://github.com/asjqkkkk/TemplatesTest)\r\n\r\nå½“ç„¶ï¼Œæœ‰å¥½çš„æ¨¡ç‰ˆä¹Ÿå¯ä»¥ä¸€èµ·åˆ†äº«ä¸€ä¸‹\r\n\r\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E6%9D%BF%E5%AE%9E%E7%8E%B0%E4%B8%80%E9%94%AE%E5%88%9B%E5%BB%BAMVP%E7%BB%93%E6%9E%84/010.png)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"},{"articleName":"Room Databaseå…¥é—¨æŒ‡å—","createTime":"2018-10-30T21:49:47.000","lastModifiedTime":"2020-02-03T10:05:21.000","tag":"Android","summary":"è¯´åˆ°Androidç«¯æœ‰å“ªäº›å¯ä»¥ä½¿ç”¨çš„æ•°æ®åº“ï¼Œå¤§å®¶é¦–å…ˆæƒ³åˆ°çš„è‡ªç„¶æ˜¯SQLiteè¿™ç§å¸¦æœ‰å®˜æ–¹å±æ€§åŠ æŒçš„è½»","imageAddress":"/img/room_database.png","articleAddress":"/config/study/Room Databaseå…¥é—¨æŒ‡å—.md","articleContent":"---\ntitle: Room Databaseå…¥é—¨æŒ‡å—\ndate: 2018-10-30 21:49:47\nindex_img: /img/room_database.png\ntags: Android\n---\n\nè¯´åˆ°Androidç«¯æœ‰å“ªäº›å¯ä»¥ä½¿ç”¨çš„æ•°æ®åº“ï¼Œå¤§å®¶é¦–å…ˆæƒ³åˆ°çš„è‡ªç„¶æ˜¯SQLiteè¿™ç§å¸¦æœ‰å®˜æ–¹å±æ€§åŠ æŒçš„è½»å‹çš„æ•°æ®åº“ã€‚\n\nä¸è¿‡å¯¹äºåƒæˆ‘è¿™ç§åŸºæœ¬ä¸Šæ²¡æœ‰æ¥è§¦è¿‡SQLæ•°æ®åº“è¯­è¨€ç¼–å†™çš„äººæ¥è¯´ï¼Œè¦é€šè¿‡å»å†™éš¾ä»¥æŸ¥é”™ä¸”åˆæ¯«ä¸ç†Ÿæ‚‰çš„æ•°æ®åº“ä»£ç æ‰èƒ½æ“ä½œæ•°æ®åº“çš„è¯ï¼Œé‚£å°±å¤ªä»¤äººå¤´å¤§äº†ã€‚\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/001-001.jpg)\n\näºæ˜¯ä¹ï¼Œä¾¿äºAndroidå¼€å‘è€…æ“ä½œæ•°æ®åº“çš„æ¡†æ¶ä¹Ÿå°±å¤šäº†èµ·æ¥ï¼Œå…¶ä¸­äººæ°”è¾ƒé«˜çš„å°±æœ‰GreenDaoã€Realmï¼ŒObjectBoxç­‰ï¼Œè€ŒRoomåˆ™æ˜¯è°·æ­Œå®˜æ–¹ååˆ†æ¨èçš„ï¼Œå¯ä»¥ä»£æ›¿SQliteçš„ä¸äºŒä¹‹é€‰ã€‚\n\næœ¬ç¯‡çš„ä¸»è¦ä»‹ç»å¯¹è±¡ä¹Ÿæ˜¯Roomæ•°æ®åº“ï¼Œä¸è¿‡åœ¨æ­¤ä¹‹å‰ï¼Œè¿˜å¾—ç®€å•ä»‹ç»ä¸€ä¸‹ä¸Šé¢æåˆ°è¿‡çš„å…¶ä»–å‡ ä½ï¼ŒåŒæ—¶åšä¸ªå°å°çš„å¯¹æ¯”ã€‚\n\n# ä¸€ã€ä»‹ç»ä¸æ¯”è¾ƒ\n\n\nç”±äºæˆ‘ç”¨è¿‡çš„æ•°æ®åº“æ¡†æ¶å¹¶ä¸å¤šï¼Œæ‰€ä»¥å¯¹äºç”¨è¿‡çš„å¯ä»¥è¯´ä¸€ä¸‹æ„Ÿå—ï¼Œæ²¡ç”¨è¿‡çš„å°±ç®€å•å¸¦è¿‡äº†ã€‚\n\n## ä»‹ç»\n\n### GreenDao å’Œ ObjectBox \n\nåœ¨è¿™äº›æ•°æ®åº“ä¸­ï¼Œ **GreenDao** ç®—æ˜¯æ—©é—»å…¶åï¼Œä¸è¿‡ä¸€ç›´æ²¡æœ‰ç”¨è¿‡ï¼Œåæ¥å®ƒçš„ä½œè€…åˆå‡ºäº†ä¸ª **ObjectBox** ï¼Œè€Œä¸”ä½ å¯ä»¥åœ¨ [**GreenDao**çš„GitHubé¡µé¢](https://github.com/greenrobot/greenDAO) æ‰¾åˆ°æ¨èä½¿ç”¨ **ObjectBox** çš„ [ObjectBoxåœ°å€](https://objectbox.io/) .\n\n### Realm\n\næˆ‘çœŸæ­£ä½¿ç”¨è¿‡çš„è¿˜åªæœ‰ **Realm** æ•°æ®åº“ï¼Œè¿™é‡Œè¦æä¸€ä¸‹ï¼Œ**Realm** æ•°æ®åº“å¯¹äºä¸­å›½çš„å¼€å‘è€…éå¸¸çš„å‹å¥½ï¼Œå°±åƒå¤§åé¼é¼çš„Glideä¸€æ ·ï¼Œ **Realm** ä¹Ÿæœ‰ä¸­æ–‡çš„ä»‹ç»æ–‡æ¡£ï¼Œæ–‡æ¡£åœ°å€åœ¨æ­¤ï¼š  \n[å¼€å§‹ä½¿ç”¨Realm](https://realm.io/cn/docs/java/latest/)  \nè™½ç„¶è¿™ä»½æ–‡æ¡£å¯¹åº”çš„ç‰ˆæœ¬ä¸æ˜¯æœ€æ–°çš„. ä¸è¿‡å¯¹äºåˆæ¬¡æ¥è§¦ **Realm** äººæ¥è¯´ï¼Œçœ‹è¿™ä»½æ–‡æ¡£å°±å¯ä»¥ä¸Šæ‰‹äº†\n\næœ€å¼€å§‹ä½¿ç”¨Realmçš„æ—¶å€™ä¹Ÿæ˜¯ç¢°è¿‡ä¸å°‘å‘ï¼Œä¸è¿‡æœ€ä¸»è¦çš„æ˜¯æ‰€æœ‰æ•°æ®åº“å¯¹è±¡éœ€è¦ç»§æ‰¿ **RealmObject** è¿™ä¸ªç±»(ä¹Ÿå¯ä»¥é€šè¿‡æ¥å£å®ç°)ï¼Œè¿™æ ·å¯¹é¡¹ç›®å·²æœ‰çš„æ•°æ®ç»“æ„ä¸å¤ªå‹å¥½ï¼ŒåŒæ—¶æˆ‘è¿˜å‘ç°ç»§æ‰¿äº† **RealmObject** çš„å¯¹è±¡å¹¶ä¸èƒ½ä¸ **Gson** å®Œç¾ç»“åˆï¼Œå¦‚æœéœ€è¦è½¬æ¢çš„è¯ï¼Œè¿˜æ˜¯å¾—è´¹ä¸€ç•ªå‘¨æŠ˜çš„ã€‚\nç§ç§åŸå› ï¼Œå¯¼è‡´æˆ‘æœ€åä»é¡¹ç›®ä¸­æŠ½å»äº†Realmè¿™ä¸ªæ•°æ®åº“.\n\n### Room\n\nä¸ Realm åˆ†æ‰‹åçš„æ—¥å­é‡Œï¼Œæˆ‘å¹¶æ²¡æœ‰æ”¾å¼ƒå¯¹æ–°çš„æ•°æ®åº“çš„å¯»æ‰¾ï¼Œåæ¥åœ¨æµè§ˆ Googleå®˜æ–¹æ–‡æ¡£çš„æ—¶å€™æ‰å‘ç°äº† **Room** è¿™ä¸ªæ–°çš„æ•°æ®åº“ï¼Œç»è¿‡æˆ‘ä¸€ç•ªä½¿ç”¨åï¼Œå°±å†³å®šæ˜¯å®ƒäº†ï¼\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/001-002.jpg)\n\n\n## æ¯”è¾ƒ\n\nå› ä¸ºæ‡’æƒ°çš„åŸå› ï¼Œæˆ‘å¹¶æ²¡æœ‰åšè¿‡æ·±å…¥çš„æµ‹è¯•ï¼Œä¸‹é¢ä¼šç»™å‡ºä»ç½‘ä¸Šæ‰¾åˆ°çš„å…³äºè¿™äº›æ•°æ®åº“çš„å¯¹æ¯”ï¼ŒåŸæ–‡åœ°å€å¦‚ä¸‹ï¼š\n\n[**Realm, ObjectBox or Room. Which one is for you?**](https://notes.devlabs.bg/realm-objectbox-or-room-which-one-is-for-you-3a552234fd6e)\n\nç„¶åæ˜¯æ•°æ®é‡è¾¾åˆ° **100k/10k** çš„æ—¶å€™ï¼Œè¿›è¡Œå¢åˆ æ”¹æŸ¥ç­‰æ“ä½œæ¶ˆè€—çš„æ—¶é—´å¯¹æ¯”ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/001.jpeg)\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/002.jpeg)\n\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/003.jpeg)\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/004.jpeg)\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/005.jpeg)\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/006.jpeg)\n\nå¯ä»¥çœ‹åˆ°ï¼Œåœ¨å„ä¸ªæ–¹é¢ï¼Œç»Ÿç»Ÿéƒ½æ˜¯ **ObjectBox** å‚²è§†ç¾¤é›„ã€‚  \né‚£è¿™ç¯‡æ–‡ç« ä¸ºä»€ä¹ˆè¿˜æ˜¯è¦å†™ä»‹ç»å…³äº **Room Database** å‘¢ï¼Ÿ\n\né¦–å…ˆæ˜¯å®˜æ–¹BuffåŠ æŒï¼Œå’Œä»‹ç»æ–‡æ¡£é‡Œçš„ä¸€å¥è¯ï¼š  \n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/007.png)  \n[è¿™é‡Œæ˜¯Roomçš„å®˜æ–¹ä»‹ç»æ–‡æ¡£åœ°å€](https://developer.android.google.cn/training/data-storage/room/)\n\nå¤§è‡´æ„æ€å°±æ˜¯ï¼š**æˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ ç”¨Roonå»ä»£æ›¿SQLiteï¼Œä¸è¿‡å¦‚æœä½ æ˜¯ä¸ªé“å¤´å¨ƒéå¾—ç”¨SQLiteï¼Œé‚£æˆ‘ä»¬ä¹Ÿæ²¡æœ‰åŠæ³•ã€‚**\n\né™¤äº†ä¸Šé¢è¿™æ®µè¯ï¼Œè¿˜æœ‰ä¸€ç‚¹ä¹Ÿå¯ä»¥ä½œä¸ºé€‰æ‹©Roomçš„åŸå› ï¼Œå°±æ˜¯å¯¹äºApkçš„â€œå¢é‡â€æ˜¯å¤šå°‘ã€‚æ®åˆ«äººçš„æµ‹è¯•\n\n> ObjectBoxå’ŒRealmåˆ†åˆ«å ç”¨1-1.5MBå’Œ3-4MBï¼ˆå¤§å°å–å†³äºæ‰‹æœºæ¶æ„ï¼‰ï¼Œè€Œä½œä¸ºSQLå°è£…çš„Roomåªå ç”¨å¤§çº¦50KBã€‚åœ¨æ–¹æ³•çš„å¢é‡ä¸Šï¼ŒRoomåªæœ‰300å¤šä¸ªï¼ŒObjectBoxå’ŒRealmåˆ™åˆ†åˆ«æ˜¯1300å’Œ2000ä¸ª\n\n\nå½“ç„¶ï¼Œå¦‚æœä½ çš„æ•°æ®é‡å¾ˆå¤§çš„è¯ï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯ **ObjectBox** æ›´åŠ é€‚åˆä½ ï¼Œå› ä¸ºå°±ä»ä¸Šé¢çš„æ“ä½œæ•°æ®å¯¹æ¯”æ¥çœ‹ï¼Œ **ObjectBox** å¤ªç‰›é€¼äº†ï¼æˆ‘ä»¥åè‚¯å®šä¹Ÿä¼šèŠ±æ—¶é—´å»å¯¹ **ObjectBox** åšä¸€ç•ªç ”ç©¶ï¼Œä¸è¿‡ç›®å‰è¿˜æ˜¯å…ˆæ¥ä»‹ç»ä»‹ç» **Room** å§ã€‚\n\n\n# äºŒã€Roomçš„ç»“æ„\n\nä¹‹å‰æœ‰è¯´è¿‡ï¼Œ**Room** æ˜¯å¯ä»¥ä»£æ›¿ **SQLite** çš„ï¼Œä¸è¿‡æˆ‘è§‰å¾—Googleæ¨å‡ºå®ƒæ›´å¤šçš„æ˜¯ä¸ºäº†æ­é… **DataBinding** ä½¿ç”¨ï¼Œå¦‚æœä½ å¯¹äº **DataBinding** ä¸å¤ªç†Ÿæ‚‰ï¼Œå¯ä»¥çœ‹ä¸€çœ‹æˆ‘å‰é¢çš„å…³äº **DataBinding** çš„æ–‡ç« ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚ä¸‹é¢å°±å¼€å§‹è¯´è¯´ **Room** çš„ç»“æ„ã€‚\n\nRoomä¸»è¦åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯ **Database**(æ•°æ®åº“) ã€**Entity**(å®ä½“) ã€**DAO**(æ•°æ®è®¿é—®å¯¹è±¡) \n\n## Database(æ•°æ®åº“)\n\næ•°æ®åº“æŒ‡çš„å°±æ˜¯ä¸€ä¸ªæ•°æ®åº“å¯¹è±¡ï¼Œå®ƒç»§æ‰¿äº **RoomDataBase** è¿™ä¸ªç±»ï¼Œå¹¶ä¸”éœ€è¦ç”¨ **@DataBase** æ³¨è§£ï¼Œè·å–è¿™ä¸ªæ•°æ®åº“å¯¹è±¡çš„æ–¹æ³•æ˜¯é€šè¿‡è°ƒç”¨ **Room.databaseBuilder()** æˆ–è€… **Room.inMemoryDatabaseBuilder()** ï¼Œåè€…è¡¨ç¤ºåœ¨å†…å­˜ä¸­å­˜å‚¨æ•°æ®ï¼Œå¦‚æœç¨‹åºç»“æŸäº†æ•°æ®ä¹Ÿå°±æ¶ˆå¤±äº†ï¼Œæ‰€ä»¥ä¸€èˆ¬è¿˜æ˜¯ä½¿ç”¨å‰è€…ã€‚\n\n## Entity(å®ä½“)\n\nå®ä½“çš„æ¦‚å¿µå°±æ¯”è¾ƒç®€å•äº†ï¼Œå°±ç±»ä¼¼äºMySQLæ•°æ®åº“é‡Œé¢çš„è¡¨ï¼Œä¸€ä¸ªå®ä½“ç±»ç›¸å½“äºä¸€ä¸ªè¡¨ï¼Œè€Œä¸€ä¸ªå®ä½“ç±»æœ‰å¤šä¸ªå±æ€§ï¼Œå°±ç›¸å½“äºè¡¨çš„å¤šä¸ªå­—æ®µï¼Œè¿™ä¸ªçœ‹ä¸€çœ‹æ¥ä¸‹æ¥å…³äº **Entity** çš„ä»£ç ä¾¿ä¸€ç›®äº†ç„¶ã€‚\n\n## DAO\n\nå…³äº **DAO** ï¼ŒæŠ½è±¡çš„æ¦‚å¿µå°±è¡¨ç¤º**æ•°æ®è®¿é—®å¯¹è±¡**ï¼Œåœ¨è¿™é‡Œç®€å•çš„è§£é‡Šä¸€ä¸‹å°±æ˜¯æ•°æ®æ“ä½œæ¥å£ï¼Œå¯ä»¥é€šè¿‡ç¼–å†™ **DAOæ¥å£** å¯¹æ•°æ®åº“è¿›è¡Œå¢åˆ æ”¹æŸ¥ç­‰ä¸€ç³»åˆ—æ“ä½œã€‚  \n> PS:è¿™äº›æ¥å£å¯ä»¥æ”¯æŒRxJavaçš„å“¦ï¼\n\nä¸‹é¢æ˜¯å›¾ç‰‡è¯´æ˜ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/009.png)\n\n# ä¸‰ã€å¼€å§‹ä½¿ç”¨\n\nåœ¨ **Room** çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œä¹Ÿæ˜¯é‡åˆ°ä¸€äº›å‘çš„ï¼Œä¸è¿‡éƒ½å·²ç»è§£å†³æ‰äº†ã€‚å¦‚æœä½ ä¹Ÿé‡åˆ°è¿‡æŸäº›é—®é¢˜ï¼Œä¸å¦¨å¯¹ç…§ä¸€ä¸‹æˆ‘çš„æ¥å…¥æµç¨‹ï¼Œè¯´ä¸å®šå°±æ‰¾åˆ°äº†é—®é¢˜æ‰€åœ¨ã€‚\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/008.png)\n\n## æ¥å…¥Gradle\n\nä¸ºäº†é¿å…ä¹‹åçš„å•å…ƒæµ‹è¯•å‡ºç° <font color=\"#DC143C\">java.lang.RuntimeException: Method e in android.util.Log not mocked. See http://g.co/androidstudio/not-mocked for details.</font> çš„é”™è¯¯ï¼Œé™¤äº† **Room** ç›¸å…³çš„ä¾èµ–éœ€è¦æ·»åŠ å¤–ï¼Œè¿™é‡Œè¿˜éœ€è¦å†å¼•ç”¨ä¸€ä¸‹ **robolectricå•å…ƒæµ‹è¯•åº“** è§£å†³é—®é¢˜ï¼\n\n```\n    //roomæ•°æ®åº“\n    def room_version = \"1.1.1\"\n    implementation \"android.arch.persistence.room:runtime:$room_version\"\n    annotationProcessor \"android.arch.persistence.room:compiler:$room_version\"\n    kapt \"android.arch.persistence.room:compiler:$room_version\"      // ç”±äºè¦ä½¿ç”¨Kotlin,è¿™é‡Œä½¿ç”¨äº†kapt\n    implementation \"android.arch.persistence.room:rxjava2:$room_version\"        //ä¹‹åä¼šç”¨åˆ°rxjavaï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿå¯ä»¥æœ‰\n//    implementation \"android.arch.persistence.room:guava:$room_version\"        //ç”±äºæˆ‘ä»¬ä¸ç”¨guavaï¼Œè¿™è¡Œæ³¨é‡Šæ‰\n    testImplementation \"android.arch.persistence.room:testing:$room_version\" \n    \n    //robolectricæµ‹è¯•\n    testImplementation 'org.robolectric:shadows-multidex:3.8'\n    testImplementation \"org.robolectric:robolectric:3.8\"\n    //è¿™æ ·å°±èµ„ç“·å•å…ƒæµ‹è¯•å’¯ï¼\n```\n\nå’Œæˆ‘ä¸€æ ·ä½¿ç”¨Kotlinçš„ç«¥é‹åˆ«å¿˜äº†ä¸‹é¢è¿™è¡Œï¼š\n\n```\napply plugin: 'kotlin-kapt'\n```\nè¿˜æœ‰ï¼Œéœ€è¦åšå¦‚ä¸‹æ›´æ”¹ï¼š\n\n```\n    androidTestImplementation 'com.android.support.test:runner:1.0.2'\n\n    //æ›´æ”¹ä¸º\n    implementation 'com.android.support.test:runner:1.0.2'\n\n```\nè¿™ç‚¹ä¸€å®šè¦æ”¹å“¦ï¼ä¸ç„¶ä¼šå‡ºç°ä¸€äº›è«åå…¶å¦™çš„é—®é¢˜\n\n\n\n\nç›¸å…³åº“çš„ä¾èµ–æˆåŠŸæ·»åŠ åå°±å¯ä»¥å¼€å§‹åŠ¨æ‰‹äº†ï¼\n\n## åˆ›å»º Entityã€Dao ä¸ DataBase\n\n### åˆ›å»ºEntity\n\né¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ª **Entity** å¯¹è±¡ï¼Œå°±æŠŠå®ƒå‘½åä¸º **Book** å§\n\n\n```\n@Entity\nclass Book(@field:ColumnInfo(name = \"book_name\")\n           var bookName: String?, var author: String?, var type: String?) {\n\n    @PrimaryKey(autoGenerate = true)\n    var id: Int = 0\n}\n```\n**Book** æœ‰ä¸‰ä¸ªå±æ€§ï¼Œåˆ†åˆ«è¡¨ç¤ºä¹¦åã€ä½œè€…ã€ç±»å‹ã€‚å…¶ä¸­æœ‰ä¸‰ç‚¹éœ€è¦æ³¨æ„ï¼š\n\n- æ¯ä¸ª **Entityå¯¹è±¡** éƒ½éœ€è¦ä½¿ç”¨ **@Entity** æ³¨é‡Šå£°æ˜\n- **@PrimaryKey** æ³¨é‡Šç”¨äºå£°æ˜ä¸»é”®ï¼Œè¿™é‡Œè¿˜æ·»åŠ äº† autoGenerate = trueï¼Œè¡¨ç¤ºå®ƒæ˜¯è‡ªå¢çš„\n- **@ColumnInfo** æ³¨é‡Šç”¨æ¥ç»™å±æ€§è®¾ç½®åˆ«åï¼Œå¦‚æœ **bookName** å±æ€§ä¸è®¾ç½®åˆ«åçš„è¯ï¼ŒæŸ¥è¯¢çš„æ—¶å€™å¯ä»¥é€šè¿‡ â€œ**bookName**â€è¿›è¡ŒæŸ¥è¯¢ï¼Œè®¾ç½®åˆ«ååå°±å¯ä»¥é€šè¿‡è®¾ç½®çš„â€œ**book_name**â€ è¿›è¡ŒæŸ¥è¯¢äº†ï¼Œçœ‹ **DAOæ¥å£** ä¾¿çŸ¥\n\n\n\n### åˆ›å»º DAO \n\nè¿™é‡Œï¼Œé€šè¿‡ **DAOæ¥å£** æ¥å¯¹ **Book** è¿™ä¸ªå¯¹è±¡è¿›è¡Œå¢åˆ æ”¹æŸ¥ï¼š\n\n```\n@Dao\ninterface BookDao {\n\n    @get:Query(\"SELECT * FROM book\")\n    val all: List<Book>\n\n    @Query(\"SELECT * FROM book WHERE author LIKE :author\")\n    fun getBookByAuthor(author: String): List<Book>\n\n    @Query(\"SELECT * FROM book WHERE book_name LIKE :name\")\n    fun getBookByNamer(name: String): List<Book>\n\n    @Insert\n    fun insert(book: Book): Long?\n\n    @Insert\n    fun insert(vararg books: Book): List<Long>\n\n    @Insert\n    fun insert(books: List<Book>): List<Long>\n\n    @Update\n    fun update(book: Book): Int\n\n    @Update\n    fun update(vararg books: Book): Int\n\n    @Update\n    fun update(books: List<Book>): Int\n\n    @Delete\n    fun delete(book: Book): Int\n\n    @Delete\n    fun delete(vararg books: Book): Int\n\n    @Delete\n    fun delete(books: List<Book>): Int\n\n}\n```\n\nä¸Šé¢çš„ **DAOæ¥å£**ï¼ŒåŒæ ·éœ€è¦è¿›è¡Œå‡ ç‚¹è¯´æ˜ï¼š\n\n- **DAOæ¥å£** éœ€è¦ä½¿ç”¨ **@Dao** æ³¨é‡Šè¿›è¡Œå£°æ˜\n- **Insert** æ“ä½œå¯ä»¥ä½¿ç”¨ **Long** ä½œä¸ºè¿”å›å€¼çš„ç±»å‹ï¼Œè¡¨ç¤ºæ’å…¥æ“ä½œå‰çš„å¯¹è±¡æ•°é‡\n- **Update** å’Œ **Delete** æ“ä½œå¯ä»¥ä½¿ç”¨ Int ä½œä¸ºè¿”å›å€¼ï¼Œè¡¨ç¤ºæ›´æ–°æˆ–è€…åˆ é™¤çš„è¡Œæ•°\n- è¿”å›ç±»å‹è¿˜å¯ä»¥æ˜¯ **void** ï¼Œå¦‚æœç»“åˆ **Rxjava** ä½¿ç”¨çš„è¯è¿˜å¯ä»¥æ˜¯ **Completableã€Singleã€ Maybeã€Flowable**ç­‰ï¼Œå…·ä½“å¯ä»¥å‚è§è¿™ç¯‡æ–‡ç« ï¼š[Room ğŸ”— RxJava](https://medium.com/androiddevelopers/room-rxjava-acb0cd4f3757)(éœ€è¦å¤‡å¥½æ¢¯å­ï¼Œä¸è¿‡åç»­æœ‰æ—¶é—´çš„è¯æˆ‘ä¹Ÿä¼šä»‹ç»ä¸€ä¸‹Roomæ­é…Rxjavaçš„ä½¿ç”¨)\n\n**Daoæ¥å£** ç¼–å†™å®Œæˆåï¼Œè¿˜å‰©ä¸‹æœ€é‡è¦çš„ **DataBase**\n\n### åˆ›å»º DataBase\n\n> ç”±äºå®ä¾‹åŒ–ä¸€ä¸ª **RoomDatabase** å¯¹è±¡çš„å¼€é”€æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œæ‰€ä»¥ **DataBase** çš„ä½¿ç”¨éœ€è¦éµå¾ªå•ä¾‹æ¨¡å¼ï¼Œåªåœ¨å…¨å±€åˆ›å»ºä¸€ä¸ªå®ä¾‹å³å¯ã€‚\n\nè¿™é‡Œä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œè¿˜æ˜¯ä½¿ç”¨javaä»£ç å»åˆ›å»ºä¸€ä¸ª **BookDataBaseç±»**ï¼Œå½“ç„¶ï¼Œè½¬æ¢æˆKotlinåªéœ€è¦Shift + Alt + Ctrl + K å³å¯\n\nå¦‚æœä½ ä½¿ç”¨çš„æ˜¯é¥¿æ±‰å¼çš„å•ä¾‹æ¨¡å¼ï¼Œåœ¨Kotlinä¸­é€šè¿‡objectä¿®é¥°å¯è¾¾åˆ°åŒæ ·æ•ˆæœ\n```\n@Database(entities = {Book.class}, version = 1)\npublic abstract class BookDataBase extends RoomDatabase {\n    public abstract BookDao bookDao();\n    private static BookDataBase instance;\n\n    public static BookDataBase getInstance(Context context){\n        if (instance == null){\n            synchronized (BookDataBase.class){\n                if (instance == null){\n                    instance = create(context);\n                }\n            }\n        }\n        return instance;\n    }\n\n    private static BookDataBase create(Context context) {\n        return Room.databaseBuilder( context,BookDataBase.class,\"book-db\").allowMainThreadQueries().build();\n    }\n}\n```\n\nä¸Šé¢çš„ä¾‹å­ä¸­æœ‰ä¸€äº›éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š\n\n- **@Database** æ³¨é‡Šç”¨äºè¿›è¡Œå£°æ˜ï¼ŒåŒæ—¶è¿˜éœ€è¦æœ‰ç›¸å…³çš„ **entityå¯¹è±¡**ï¼Œå…¶ä¸­ **version** æ˜¯å½“å‰æ•°æ®åº“çš„ç‰ˆæœ¬å·ï¼Œå¦‚æœä½ å¯¹æ•°æ®ç›¸å…³çš„**å®ä½“ç±»ç»“æ„**è¿›è¡Œäº†æ›´æ”¹ï¼Œè¿™é‡Œçš„ **version** å°±éœ€è¦**åŠ ä¸€**\n- **BookDataBase** é™¤äº†ç»§æ‰¿äº **RoomDatabase** ï¼Œè¿˜éœ€è¦å®ä¾‹å‡ºç›¸å…³çš„ **DAOæ¥å£**\n- create()æ–¹æ³•ä¸­çš„\"**book-db**\"æ˜¯æ•°æ®åº“çš„åå­—ï¼Œè¿™é‡Œéšæ„ï¼Œä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ **allowMainThreadQueries()** æ–¹æ³•ï¼Œè¿™é‡Œç”±äºæˆ‘ä»¬ä¼šç”¨åˆ°å•å…ƒæµ‹è¯•ï¼Œæ‰€ä»¥åŠ ä¸Šè¿™è¡Œä»£ç æ˜¯ä¸ºäº†é˜²æ­¢ ã€*Cannot access database on the main thread since it may potentially lock the UI for a long period of time.*ã€‘ çš„æŠ¥é”™ã€‚æ­£å¼ä½¿ç”¨æ—¶ï¼Œè¯·åŠ¡å¿…å»æ‰è¿™è¡Œä»£ç ï¼Œå› ä¸ºå®ƒä¼šè®©æ‰€æœ‰è€—æ—¶æ“ä½œè¿è¡Œåœ¨ä¸»çº¿ç¨‹ï¼\n\nåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥å…ˆæ„‰å¿«çš„è¿›è¡Œæµ‹è¯•äº†.\n\n\n\n## æµ‹è¯•\n\n### åˆçº§æµ‹è¯•\n\næ‰¾åˆ° **src** ä¸‹çš„ **test** ç›®å½•ï¼Œç„¶åå¯ä»¥åƒæˆ‘è¿™æ ·åˆ›å»ºä¸€ä¸ª **RoomTest** ç±»è¿›è¡Œæµ‹è¯•\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/010.png)\n\nè¯´åˆ°è¿™é‡Œï¼Œå¯èƒ½ä¼šæœ‰ç«¥é‹å°šæœªäº†è§£è¿‡å•å…ƒæµ‹è¯•ï¼Œè¿™æ—¶å€™ä½ å¯ä»¥å…ˆå»çœ‹çœ‹ç›¸å…³åšå®¢ï¼Œæ¯”å¦‚è¿™ç¯‡\n\n[Android å•å…ƒæµ‹è¯•åªçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†](https://juejin.im/post/5b57e3fbf265da0f47352618)\n\nä¸è¿‡è¿™é‡Œä½¿ç”¨çš„å•å…ƒæµ‹è¯•æ˜¯ Android Studio è‡ªå¸¦çš„ï¼Œä¹Ÿæ²¡æœ‰ç”¨åˆ°å¤ªå¤æ‚çš„ä¸œè¥¿ï¼ŒåŒæ—¶æˆ‘ä¼šåšä¸€äº›è¯´æ˜ï¼Œä¸å¤Ÿäº†è§£çš„ç«¥é‹ä¹Ÿå¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹ï¼Œçœ‹å®Œä½ ä¹Ÿå°±äº†è§£äº†\n\n\n```\n@RunWith(AndroidJUnit4::class)\nclass RoomTest {\n\n    private var bookDao: BookDao? = null\n    private var bookDataBase: BookDataBase? = null\n\n    @Before\n    @Throws(Exception::class)\n    fun setUp() {\n        ShadowLog.stream = System.out      //è¿™æ ·æ–¹ä¾¿æ‰“å°æ—¥å¿—\n        val context = InstrumentationRegistry.getTargetContext()\n        bookDataBase = BookDataBase.getInstance(context)\n        bookDao = bookDataBase?.bookDao()\n    }\n\n\n    @Test\n    fun insert() {\n        val book1 = Book(\"æ—¶é—´ç®€å²\", \"æ–¯è’‚èŠ¬Â·å¨å»‰Â·éœé‡‘\", \"ç§‘å­¦\")\n        val book2 = Book(\"ç™¾å¹´å­¤ç‹¬\", \"è¥¿äºšÂ·é©¬å°”å…‹æ–¯\", \"æ–‡å­¦\")\n        val list = bookDao?.insert(book1, book2)\n\n        assert(list?.size == 2)\n    }\n\n    @Test\n    fun query(){\n        val books = bookDao?.all\n        for (book in books?: emptyList()) {\n            Log.e(javaClass.name, \"è·å–çš„ä¹¦ç±æ•°æ®: ${Gson().toJson(book)}\")\n        }\n    }\n\n    @After\n    @Throws(Exception::class)\n    fun cloaseDb() {\n        bookDataBase?.close()\n    }\n}\n```\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œçš„å•å…ƒæµ‹è¯•ä½¿ç”¨çš„æ˜¯ **AndroidJUnit4**ï¼Œé€šè¿‡ **@Before** æ³¨é‡Šçš„æ–¹æ³•ï¼Œè¡¨ç¤ºç”¨äº**ç›¸å…³èµ„æºçš„åˆå§‹åŒ–**ï¼Œç±»ä¼¼äºActivityçš„onCreate()æ–¹æ³•ï¼›è€Œé€šè¿‡ **@After** æ³¨é‡Šçš„æ–¹æ³•ï¼Œåˆ™æ˜¯ç”¨äº**ç›¸å…³èµ„æºçš„é”€æ¯**ï¼Œç±»ä¼¼äºActivityçš„onDestroy()æ–¹æ³•ã€‚\n\nå‰©ä¸‹çš„ï¼Œé€šè¿‡ **@Test** æ³¨é‡Šçš„æ–¹æ³•å°±è¡¨ç¤ºç”¨äºæµ‹è¯•çš„å•å…ƒï¼Œæ¯ä¸ªæµ‹è¯•ç±»é‡Œé¢å¯ä»¥æœ‰å¤šä¸ªæµ‹è¯•å•å…ƒï¼Œè¿™é‡Œç›®å‰åªå†™äº†æ’å…¥å’ŒæŸ¥è¯¢ä¸¤ä¸ªå•å…ƒï¼Œåœ¨ **RoomTest** ç±»ä¸Šé€šè¿‡å³é”®è¿è¡Œï¼Œç„¶åçœ‹ä¸€ä¸‹ç»“æœï¼š\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/011.png)\n\nåœ¨æµ‹è¯•ä»£ç ä¸­çš„ **insert()å•å…ƒ ** é‡Œï¼Œæœ‰è¿™æ ·ä¸€è¡Œä»£ç ï¼š\n\n```\nassert(list.size == 2)\n```\nè€Œæµ‹è¯•çš„ç»“æœæ˜¯ä¸€ç‰‡ç»¿è‰²ï¼Œå°±è¡¨ç¤ºè¿™ä¸ªæ–­è¨€æ˜¯æ­£ç¡®çš„ï¼Œliståˆ—è¡¨é•¿åº¦åˆšå¥½ä¸º2ï¼Œè¿™é‡Œä¸ºäº†éªŒè¯è¿”å›çš„listæ˜¯æ•´ä¸ªæ•°æ®åº“é•¿åº¦è¿˜æ˜¯ä»…ä»…è¡¨ç¤ºæ­¤æ¬¡è¿›è¡Œæ’å…¥æ“ä½œçš„é•¿åº¦ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ insert()æµ‹è¯•å•å…ƒï¼š\n\n```\n   @Test\n    fun insert() {\n        val book1 = Book(\"æ—¶é—´ç®€å²\", \"æ–¯è’‚èŠ¬Â·å¨å»‰Â·éœé‡‘\", \"ç§‘å­¦\")\n        val book2 = Book(\"ç™¾å¹´å­¤ç‹¬\", \"è¥¿äºšÂ·é©¬å°”å…‹æ–¯\", \"æ–‡å­¦\")\n        val list = bookDao?.insert(book1, book2)\n        assert(list?.size == 2)\n\n        val list2 = bookDao?.insert(book1, book2)\n        assert(list2?.size == 4)\n    }\n```\n\nè¿™æ—¶å€™åœ¨ **insert()å•å…ƒæµ‹è¯•åŒºåŸŸ** å³é”®è¿è¡Œï¼Œå°±åªæµ‹è¯•è¿™ä¸€ä¸ªå•å…ƒï¼Œç„¶åç»“æœå¦‚ä¸‹ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/012.png)\n\næˆ‘ä»¬åœ¨ insert()å•å…ƒ ä¸­è¿›è¡Œäº†ä¸¤æ¬¡æ’å…¥æ“ä½œï¼Œæ‰€ä»¥æ•°æ®åº“çš„æ€»é•¿åº¦åº”è¯¥ä¸º 4 ï¼Œè€Œè¿™é‡Œç¬¬39è¡Œçš„ä»£ç ï¼š\n\n```\nassert(list2?.size == 4)\n```\nè¿”å›çš„cede æ˜¯ -1ï¼Œå°±è¡¨ç¤ºå®é™…ä¸Šæ¯æ¬¡æ’å…¥æ“ä½œè¿”å›çš„åˆ—è¡¨é•¿åº¦åº”è¯¥ä¸ºæ’å…¥çš„æ•°é‡ï¼Œè€Œéæ•°æ®åº“æ€»é‡ã€‚å…¶ä»–æ“ä½œäº¦æ˜¯å¦‚æ­¤ã€‚\n\nåœ¨å•å…ƒæµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬çš„æµ‹è¯•å¹¶ä¸èƒ½ç›´æ¥ç”¨äºæ­£å¼çš„é¡¹ç›®ä¸­ï¼Œå› ä¸ºæ•°æ®åº“æ“ä½œå±äºè€—æ—¶æ“ä½œï¼Œæ‰€ä»¥ä¸€å®šä¸èƒ½æŠŠè¿™äº›æ“ä½œæ”¾åœ¨ä¸»çº¿ç¨‹é‡Œï¼Œè€Œæœ€æ–¹ä¾¿çš„çº¿ç¨‹åˆ‡æ¢ï¼Œè«è¿‡äº **Rxjava** å•¦ï¼\n\nç°åœ¨å¼€å§‹ä½¿ç”¨ **Rxjava** è¿›è¡Œæµ‹è¯•å§\n\n### ç»“åˆRxjavaçš„æµ‹è¯•\n\né¦–å…ˆï¼Œè¦åœ¨é¡¹ç›®ä¸­æ·»åŠ  **Rxjava** çš„ä¾èµ–ï¼š\n\n```\n    //rxJava2+rxAndroid\n    implementation \"io.reactivex.rxjava2:rxjava:2.x.y\"\n    implementation 'io.reactivex.rxjava2:rxandroid:2.1.0'\n```\n\nåœ¨å•å…ƒæµ‹è¯•ä¸­ï¼ŒRxJava å¦‚æœåš **IOçº¿ç¨‹** åˆ° **UIçº¿ç¨‹** çš„åˆ‡æ¢æ“ä½œï¼Œç»“æœæ˜¯æ— æ³•è·å–çš„ï¼Œæ‰€ä»¥éœ€è¦å°†è¿™äº›çº¿ç¨‹è¿›è¡Œåˆå¹¶ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š\n\n```\n    @Before\n    @Throws(Exception::class)\n    fun setUp() {\n        val context = InstrumentationRegistry.getTargetContext()\n        bookDataBase = BookDataBase.getInstance(context)\n        bookDao = bookDataBase?.bookDao()\n        ShadowLog.stream = System.out\n\n        initRxJava2()\n    }\n    \n    private fun initRxJava2() {\n        RxJavaPlugins.reset()\n        RxJavaPlugins.setIoSchedulerHandler { Schedulers.trampoline() }\n        RxAndroidPlugins.reset()\n        RxAndroidPlugins.setMainThreadSchedulerHandler { Schedulers.trampoline() }\n    }\n```\n\nåœ¨ **@Beforeæ³¨è§£** ä¸‹çš„ **setUp()** æ–¹æ³•ä¸­è¿›è¡ŒRxJavaçš„é…ç½®ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥æŠŠRxJavaå¸¸ç”¨çš„çº¿ç¨‹åˆ‡æ¢å†™åœ¨ä¸€ä¸ªæ–¹æ³•é‡Œï¼Œæ–¹ä¾¿å¤ç”¨ï¼š\n\n```\n    private fun<T> doWithRxJava(t: T): Observable<T>{\n        return Observable.create<T>{it.onNext(t)}\n                .subscribeOn(Schedulers.io())\n                .unsubscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n    }\n```\n\næ¥ç€ï¼Œå¯¹ **insertå•å…ƒ** å’Œ **queryå•å…ƒ** è¿›è¡Œä¿®æ”¹ï¼š\n\n```\n    @Test\n    fun insert() {\n        val book1 = Book(\"æ—¶é—´ç®€å²\", \"æ–¯è’‚èŠ¬Â·å¨å»‰Â·éœé‡‘\", \"ç§‘å­¦\")\n        val book2 = Book(\"ç™¾å¹´å­¤ç‹¬\", \"è¥¿äºšÂ·é©¬å°”å…‹æ–¯\", \"æ–‡å­¦\")\n        doWithRxJava(bookDao?.insert(book1, book2))\n                .subscribe ({\n                    Log.e(\"inserté•¿åº¦ï¼š\" , \"${it?.size}\")\n                    assert(it?.size == 2)\n                },{\n                    Log.e(\"insertå‡ºé”™ï¼š\" , \"${it.stackTrace}-${it.message}\")\n                })\n    }\n\n    @Test\n    fun query(){\n        doWithRxJava(bookDao?.all)\n                .subscribe({\n                    for(book in it?: emptyList()){\n                        Log.e(javaClass.name, \"è·å–çš„ä¹¦ç±æ•°æ®: ${Gson().toJson(book)}\")\n                        assert(it?.size == 2)\n                    }\n                },{\n                    Log.e(\"queryå‡ºé”™ï¼š\" , \"${it.stackTrace}-${it.message}\")\n                })\n    }\n```\n\nç„¶åçœ‹ä¸€ä¸‹æµ‹è¯•çš„ç»“æœï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/013.png)\n\n\né‚£ä¹ˆï¼Œ **Room DataBase** çš„å…¥é—¨æŒ‡å—ï¼Œå°±å†™åˆ°è¿™é‡Œå•¦ï¼\n\nåç»­æˆ‘å¯èƒ½ä¼šå†å†™ä¸€ç¯‡è¿›é˜¶ç‰ˆçš„æ–‡ç« ï¼Œæ¶µç›–äº†çœŸå®ä½¿ç”¨çš„åœºæ™¯ï¼Œç„¶åçœ‹èƒ½ä¸èƒ½å†™ä¸€ä¸ªç®€å•çš„Demoå‡ºæ¥ï¼Œè¿™æ ·æ›´æ–¹ä¾¿å­¦ä¹ å§ï¼\n\n~~*ä¸è¿‡æˆ‘å‘ç°æˆ‘ç°åœ¨çš„æ‡’ç™Œæ˜¯è¶Šæ¥è¶Šä¸¥é‡äº†ï¼Œä¹Ÿä¸çŸ¥é“ä¸‹ä¸€ç¯‡æ˜¯ä»€ä¹ˆæ—¶å€™*~~\n\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/014.png)\n\n\n\n\n\n\n\n\n\n\n"},{"articleName":"DataBindingâ€”â€”ä»ç›¸è¯†åˆ°ç›¸çŸ¥ï¼ˆäºŒï¼‰ï¼šäº’é…Œ","createTime":"2018-10-20T21:49:47.000","lastModifiedTime":"2020-02-03T10:32:40.000","tag":"Android","summary":" å‰è¨€\n\nä¸Šä¸€ç¯‡é‡Œï¼Œä¸»è¦è®²äº†å…³äºDatabindingçš„ä»¥ä¸‹å‡ ç‚¹ï¼š\n\n- æ¥å…¥ä¸ä½¿ç”¨\n- ç®€å•çš„æ•°","imageAddress":"/img/data_binding.png","articleAddress":"/config/study/DataBindingâ€”â€”ä»ç›¸è¯†åˆ°ç›¸çŸ¥ï¼ˆäºŒï¼‰ï¼šäº’é…Œ.md","articleContent":"---\ntitle: DataBindingâ€”â€”ä»ç›¸è¯†åˆ°ç›¸çŸ¥ï¼ˆäºŒï¼‰ï¼šäº’é…Œ\ndate: 2018-10-20 21:49:47\nindex_img: /img/data_binding.png\ntags: Android\n---\n\n# å‰è¨€\n\nä¸Šä¸€ç¯‡é‡Œï¼Œä¸»è¦è®²äº†å…³äºDatabindingçš„ä»¥ä¸‹å‡ ç‚¹ï¼š\n\n- æ¥å…¥ä¸ä½¿ç”¨\n- ç®€å•çš„æ•°æ®ç»‘å®š\n- ç‚¹å‡»äº‹ä»¶çš„ç»‘å®š\n\nè¿™ä¸€ç¯‡å°†ä¼šç»§ç»­ä¸Šä¸€ç¯‡çš„æ­¥ä¼ï¼Œå¯¹DataBindingçš„ä½¿ç”¨æ›´æ·±å‡ åˆ†.é¦–å…ˆä¾æ—§æ˜¯ä»æ•°æ®ç»‘å®šå¼€å§‹\n<!--more--> \n\n> ä¹‹å‰æ‰€ä»‹ç»çš„ï¼Œè™½ç„¶UIä¸æ•°æ®è¿›è¡Œäº†ç»‘å®šï¼Œä½†æ˜¯ä¿®æ”¹æ•°æ®å¯¹è±¡çš„æ—¶å€™å¹¶ä¸ä¼šåŒæ—¶æ›´æ–° **UI** .  \nç°åœ¨æœ‰ä¸‰ç§ä¸åŒç±»å‹çš„ **observable** ç±»ï¼š**objects**, **fields**, è¿˜æœ‰ **collections**.  \nå½“å…¶ä¸­æŸä¸ª **observable** æ•°æ®å¯¹è±¡ç»‘å®šåˆ° **UI** å¹¶ä¸”æ•°æ®å¯¹è±¡çš„å±æ€§å‘ç”Ÿæ›´æ”¹æ—¶ï¼Œ UI å°†è‡ªåŠ¨æ›´æ–°ï¼Œä¸‹é¢å¼€å§‹ä»‹ç».\n\n\n# Observableæ•°æ®\n\nå¦‚æœä½ çš„æ•°æ®ç±»åªæœ‰å‡ ä¸ªå±æ€§ï¼Œé‚£ä¹ˆæ²¡å¿…è¦å»å®ç° **Observable** æ¥å£æ¥ç›‘å¬æ•°æ®çš„æ”¹å˜ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™äº›å­—æ®µï¼š\n\n- [**ObservableBoolean**](https://developer.android.google.cn/reference/android/databinding/ObservableBoolean.html)\n- [**ObservableByte**](https://developer.android.google.cn/reference/android/databinding/ObservableByte.html)\n- [**ObservableChar**](https://developer.android.google.cn/reference/android/databinding/ObservableChar.html)\n- [**ObservableShort**](https://developer.android.google.cn/reference/android/databinding/ObservableShort.html)\n- [**ObservableInt**](https://developer.android.google.cn/reference/android/databinding/ObservableInt.html)\n- [**ObservableLong**](https://developer.android.google.cn/reference/android/databinding/ObservableLong.html)\n- [**ObservableFloat**](https://developer.android.google.cn/reference/android/databinding/ObservableFloat.html)\n- [**ObservableDouble**](https://developer.android.google.cn/reference/android/databinding/ObservableDouble.html)\n- [**ObservableParcelable**](https://developer.android.google.cn/reference/android/databinding/ObservableParcelable.html)\n\nç°åœ¨ï¼Œæˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ªç±»\n```\nclass ObservableBean {\n    val text = ObservableField<String>()\n}\n```\nå¸ƒå±€æ–‡ä»¶æ”¹ä¸ºï¼š\n\n```\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<layout xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <data>\n        <variable name=\"model\" type=\"com.test.project.testdatabinding.MVP.DataBinding.Bean.ObservableBean\"/>\n    </data>\n\n    <LinearLayout\n        android:orientation=\"vertical\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\">\n\n        <EditText\n            android:id=\"@+id/et_test\"\n            android:text=\"@={model.text}\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\" />\n\n        <TextView\n            android:id=\"@+id/tv_test\"\n            android:text=\"@{model.text}\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"/>\n        \n    </LinearLayout>\n</layout>\n```\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢çš„ **EditText** çš„ **text** å±æ€§ä½¿ç”¨çš„æ˜¯ **@={}** è€Œ **TextView** ä½¿ç”¨çš„æ˜¯ **@{}** ã€‚å½“ä½ æƒ³è¦ä½¿ç”¨åŒå‘ç»‘å®šçš„æ—¶å€™ï¼Œå¯åˆ«å¿˜äº†è¿™ä¸ª **=** å·\n\n\n\nActivityçš„ä»£ç åªæ”¹å˜äº†ç»‘å®šå¯¹è±¡ï¼š\n\n```\nclass DataBindingActivity<T> : AppCompatActivity() {\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n//        setContentView(R.layout.activity_data_binding)\n        val bindingBinding : ActivityDataBindingBinding = DataBindingUtil.setContentView(this, R.layout.activity_data_binding)\n        bindingBinding.model = ObservableBean()\n    }\n}\n```\næ•ˆæœå¦‚ä¸‹ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/DataBinding/two/databinding-001.gif)\n\nå¯ä»¥çœ‹åˆ°ï¼Œç›´æ¥ä½¿ç”¨ **Observable** å­—æ®µå»å®ç°åŒå‘æ•°æ®ç»‘å®šæ˜¯å¾ˆè½»æ¾çš„ï¼Œä¸è¿‡å®é™…é¡¹ç›®é‡Œé¢éœ€æ±‚å„ä¸ç›¸åŒï¼Œè¦å°†æ•°æ®éƒ½æ¢æˆ **Observable** å­—æ®µè¿˜æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œæ‰€ä»¥è‡ªå®šä¹‰åŒå‘æ•°æ®ç»‘å®šéå¸¸æœ‰å¿…è¦ï¼\n\nè¿™æ—¶å¯¹ **ObservableBean** è¿›è¡Œä¿®æ”¹ï¼š\n\n```\nclass ObservableBean : BaseObservable() {\n    @get:Bindable\n    var text: String = \"\"\n    set(value) {\n        field = value\n        notifyPropertyChanged(BR.text)\n    }\n}\n\n//ç›¸è¾ƒäºKotlinå†™æ³•ï¼Œè¿™é‡Œæˆ‘è§‰å¾—Javaå†™æ³•æ›´æœ‰åŠ©äºç†è§£ï¼š\npublic  class ObservableBean extends BaseObservable {\n    private String text;\n\n    @Bindable\n    public String getText() {\n        return text;\n    }\n\n    public ObservableBean setText(String text) {\n        this.text = text;\n        notifyPropertyChanged(BR.text);\n        return this;\n    }\n}\n\n```\nä¿®æ”¹è¿‡åçš„æ•ˆæœä¸ä¹‹å‰ä½¿ç”¨ **Observable** å­—æ®µçš„æ•ˆæœä¸€æ ·ï¼Œä¸Šé¢éœ€è¦æ³¨æ„çš„ä¸¤ç‚¹ï¼š\n\n-  ä½¿ç”¨äº† **@Bindable** æ³¨è§£ï¼Œè¿›è¡Œç»‘å®šå£°æ˜\n-  ä½¿ç”¨äº† **notifyPropertyChanged()** æ–¹æ³•ä¸ºæ•°æ®åˆ·æ–°åšå‡†å¤‡\n\nä¸è¿‡åœ¨æˆ‘çœ‹æ¥ï¼Œé€šè¿‡è¿™ç§ç»§æ‰¿çš„æ–¹æ³•å¯¹äºæˆ‘ä»¬åŸæœ‰çš„æ•°æ®ç»“æ„å¹¶ä¸è¿‡å‹å¥½ï¼Œå°¤å…¶æ˜¯ç»§æ‰¿äº† **BaseObservable** ç±»çš„æ•°æ®ç±»ä¸èƒ½é€šè¿‡  **Gson** å»ä¸ **Json** ç›¸äº’è½¬æ¢ã€‚\n\næ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘é€šè¿‡æŸä¸ªä¸­ä»‹ç±»çš„æ–¹å¼å»è¿›è¡Œè½¬æ¢.\n\n\n# å¸ƒå±€çš„ç»‘å®š\n\nç¬¬ç¬¬ä¸€ç¯‡ä¸­ï¼Œæœ‰å†™åˆ°Activityä¸­å¦‚ä½•è·å–è‡ªåŠ¨ç”Ÿæˆçš„å¸ƒå±€ç»‘å®šç±»â€”â€”xxxBindingï¼Œè¿™ç§ç±»çš„å‘½åä¸ä½¿ç”¨æ•°æ®ç»‘å®šçš„å¸ƒå±€æ–‡ä»¶xmlæœ‰å…³ï¼Œæ¯”å¦‚è¯´ **activity_main.xml** å°±ä¼šç”Ÿæˆ **ActivityMainBinding** \n\nè¿™é‡Œå†è¯¦ç»†è¯´æ˜ä¸€ä¸‹ï¼Œä¸åŒç±»å‹çš„å¸ƒå±€ï¼Œåº”è¯¥æ€ä¹ˆè·å–ç”Ÿæˆçš„ **Bindingç»‘å®šç±»** \n\n> äº‹å…ˆå¹¶ä¸çŸ¥é“ç»‘å®šç±»å‹çš„å¯¹è±¡å¯ä»¥ä½¿ç”¨ **DataBindingUtil** å»åˆ›å»ºç»‘å®š\n\n```\nval rootView = LayoutInflater.from(this).inflate(layoutId, parent, attachToParent)\nval binding: ViewDataBinding? = DataBindingUtil.bind(viewRoot)\n```\n\n## è·å–å¸¦ ID çš„ Viewå¯¹è±¡\n\nå¦‚æœä½¿ç”¨çš„æ˜¯Kotlinï¼Œå¯ä»¥ç›´æ¥åœ¨Activityé‡Œå¾ˆæ–¹ä¾¿çš„ä½¿ç”¨idè·å–Viewå¯¹è±¡ï¼Œä¸è¿‡ä½¿ç”¨DataBindingåï¼Œå°±æœ‰å¦å¤–ä¸€ç§è·å–Viewå¯¹è±¡çš„æ–¹å¼äº†\n\nå¸ƒå±€é‡Œé¢çš„ Id å¦‚ä¸‹ï¼š\n\n```\n    ...\n        <EditText\n            android:id=\"@+id/et_test\"\n            android:text=\"@={model.text}\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\" />\n\n    ...\n```\n\né€šè¿‡ Id è·å– EditText çš„æ–¹æ³•å¦‚ä¸‹ï¼š\n\n```\n        ...\n        super.onCreate(savedInstanceState)\n        val bindingBinding : ActivityDataBindingBinding = DataBindingUtil.setContentView(this, R.layout.activity_data_binding)\n        bindingBinding.model = ObservableBean()\n        val editText = bindingBinding.root.rootView.findViewById<EditText>(R.id.et_test)\n```\n\n\n> **ç«‹å³ç»‘å®š**  \n>\n> å½“å˜é‡æˆ–å¯è§‚å¯Ÿå¯¹è±¡å‘ç”Ÿæ›´æ”¹æ—¶ï¼Œç»‘å®šä¼šåœ¨ä¸‹ä¸€å¸§ä¹‹å‰æ›´æ”¹ã€‚ ä¸è¿‡æœ‰çš„æ—¶å€™éœ€è¦ç«‹åˆ»æ‰§è¡Œç»‘å®š.  \n>\n> è‹¥è¦å¼ºåˆ¶æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨ **executePendingBindings()** æ–¹æ³•ã€‚\n\n## é«˜çº§ç»‘å®š\n\næœ‰æ—¶å€™ï¼Œç‰¹å®šçš„ç»‘å®šç±»æ˜¯æœªçŸ¥çš„.  \n\nä¾‹å¦‚ï¼Œé’ˆå¯¹ä»»æ„å¸ƒå±€æ“ä½œçš„ **RecyclerView.Adapter** ä¸çŸ¥é“ç‰¹å®šçš„ç»‘å®šç±».å®ƒä»ç„¶å¿…é¡»åœ¨è°ƒç”¨ **onBindViewHolder()** æ–¹æ³•æ—¶åˆ†é…ç»‘å®šå€¼.\n\nåœ¨ **RecyclerView** çš„  **onBindViewHolder()** æ–¹æ³•é‡Œï¼Œå¯ä»¥è¿™æ ·å†™ï¼š\n\n```\noverride fun onBindViewHolder(holder: BindingHolder, position: Int) {\n    item: T = mItems.get(position)\n    holder.binding.setVariable(BR.item, item);\n    holder.binding.executePendingBindings();\n}\n```\n\n## ä½¿ç”¨@BindingAdapterè‡ªå®šä¹‰ç»‘å®šé€»è¾‘\n\nDataBindingä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§å¯ä»¥å¯¹ç»‘å®šé€»è¾‘è¿›è¡Œè‡ªå®šä¹‰çš„æ–¹æ³•ï¼Œæ¯”å¦‚è¯´æˆ‘æƒ³åœ¨xmlä¸­å¯¹ä¸€ä¸ªImageViewæ§ä»¶åŠ è½½å›¾ç‰‡ï¼Œå¹¶ä¸”æ˜¯ä½¿ç”¨çš„GlideåŠ è½½æ¡†æ¶ï¼Œè¿™æ—¶å€™å¯ä»¥è¿™æ ·ï¼š\n\n```\n//éšä¾¿åˆ›å»ºä¸€ä¸ªç±»ï¼Œç„¶ååœ¨ç±»ä¸­å®šä¹‰å¦‚ä¸‹æ–¹æ³•\n@BindingAdapter(\"imageUrl\")\nfun loadImage(view: ImageView, url: String) {\n    GlideApp.with(view.getContext())\n   .load(url)\n   .fitCenter()\n   .into(view);\n}\n```\nä½¿ç”¨çš„æ—¶å€™ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”å±æ€§ï¼š\n\n```\n<ImageView \napp:imageUrl=\"@{model.imageUrl}\"  />\n```\nä½¿ç”¨ **@BindAdapter** å‡ ä¹å¯ä»¥å®Œæˆä½ æƒ³è¦çš„å„ç§é€»è¾‘ï¼Œä¸è¿‡æˆ‘è§‰å¾—ï¼Œåªæœ‰é‚£ç§ä½¿ç”¨ç‡ç‰¹åˆ«é«˜çš„ä»£ç ï¼Œæ‰æœ€é€‚åˆè¿™ä¸ªå±æ€§.\n\n## ä½¿ç”¨@BindingConversionå®Œæˆè½¬æ¢åŠŸèƒ½\n\nåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç‰¹å®šç±»å‹ä¹‹é—´éœ€è¦è‡ªå®šä¹‰è½¬æ¢ã€‚ ä¾‹å¦‚ï¼Œè§†å›¾çš„android:backgroundå±æ€§éœ€è¦Drawableï¼Œä½†æŒ‡å®šçš„é¢œè‰²å€¼æ˜¯æ•´æ•°ã€‚ \n\nå®˜æ–¹ä¾‹å­ä¸­ï¼Œè½¬æ¢åŠŸèƒ½çš„å…·ä½“ç”¨æ³•å¦‚ä¸‹ï¼š\n\n```\n@BindingConversion\nfun convertColorToDrawable(color: Int) = ColorDrawable(color)\n```\nä½¿ç”¨çš„æ—¶å€™å¯ä»¥è¿™æ ·ï¼š\n\n```\n<View\n   android:background=\"@{isError ? @drawable/error : @color/white}\"\n   android:layout_width=\"wrap_content\"\n   android:layout_height=\"wrap_content\"/>\n```\n\n\n\n# æš‚æ­‡\n\næœ¬ç¯‡å…³äºDataBindinçš„ä»‹ç»ä¹Ÿå°±åˆ°æ­¤ç»“æŸï¼Œä¸è¿‡DataBindingçš„ä½¿ç”¨è¿˜æ²¡æœ‰åˆ°å¤´ï¼Œä¸‹ä¸€ç¯‡å°†ä¼šä¾§é‡å®é™…ä¸Šçš„æ“ä½œä»¥åŠDataBindingè¿˜å¯ä»¥ä¸ºæˆ‘ä»¬å¸¦æ¥å“ªäº›ä¾¿æ·.\n\n\n\n---\n\n# æœªå®Œå¾…ç»­\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"articleName":"DataBindingâ€”â€”ä»è·¯äººåˆ°å¥½å‹ï¼ˆä¸€ï¼‰ï¼šåˆé‡","createTime":"2018-10-17T21:49:47.000","lastModifiedTime":"2020-02-03T10:16:26.000","tag":"Android","summary":" æ‚è°ˆ\n\n\n> åœ¨ç¼–ç¨‹é¢†åŸŸï¼Œå¯¹äºä¸€ååˆå­¦è€…è€Œè¨€ï¼Œæœ€å¼€å§‹çš„è¿›é˜¶æ–¹å¼éƒ½æ˜¯ä¸æ–­é‡å¤çš„ç»ƒä¹ ï¼Œç„¶ååœ¨ç»ƒä¹ ä¸­é‡","imageAddress":"/img/data_binding.png","articleAddress":"/config/study/DataBindingâ€”â€”ä»è·¯äººåˆ°å¥½å‹ï¼ˆä¸€ï¼‰ï¼šåˆé‡.md","articleContent":"---\ntitle: DataBindingâ€”â€”ä»è·¯äººåˆ°å¥½å‹ï¼ˆä¸€ï¼‰ï¼šåˆé‡\ndate: 2018-10-17 21:49:47\nindex_img: /img/data_binding.png\ntags: Android\n---\n\n# æ‚è°ˆ\n\n\n> åœ¨ç¼–ç¨‹é¢†åŸŸï¼Œå¯¹äºä¸€ååˆå­¦è€…è€Œè¨€ï¼Œæœ€å¼€å§‹çš„è¿›é˜¶æ–¹å¼éƒ½æ˜¯ä¸æ–­é‡å¤çš„ç»ƒä¹ ï¼Œç„¶ååœ¨ç»ƒä¹ ä¸­é‡åˆ°å„ç§å›°éš¾ï¼ŒåŒæ—¶ä¹Ÿåœ¨è¿™ä¸ªè¿‡ç¨‹é‡Œç§¯ç´¯äº†ä¸å°‘çš„ç»éªŒã€‚\n>\n> ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è·å–çš„ç»éªŒå¯ä»¥æœ‰æ•ˆçš„å‡å°‘æˆ‘ä»¬çš„å¤±è¯¯ï¼Œä¹Ÿå¯ä»¥ä¸ºæˆ‘ä»¬é¢„é˜²æ‰è®¸å¤šâ€œéšè—â€çš„Bugã€‚\n> \n> ä½†æ˜¯ï¼Œéšç€æˆ‘ä»¬èƒ½åŠ›çš„æå‡ï¼Œæˆ‘ä»¬é€æ¸çš„å¯¹äºé‚£äº›é‡å¤æ€§éå¸¸é«˜ã€è€Œä¸”æ„ä¹‰å¹¶ä¸å¤§çš„ä»£ç äº§ç”Ÿäº†åŒå€¦æ„Ÿã€‚é¦–å½“å…¶å†²çš„å°±æ˜¯åƒ **findViewById** è¿™æ ·çš„ä»£ç ï¼\n\nå¤§é‡çš„ **findViewById** ä¸å…¨å±€å˜é‡æƒ³å¿…æ˜¯è®¸å¤šåˆå­¦è€…éƒ½ä¼šç»å†çš„é˜¶æ®µï¼Œä¸è¿‡å­¦çš„ä¸œè¥¿è¶Šå¤šï¼Œå¯¹äºè¿™ç±»ä»£ç çš„æ¥å—åŠ›ä¹Ÿå°±è¶Šä½ã€‚æ‰€ä»¥è®¸å¤šäººé€‰æ‹©ç”¨äº† **ButterKnife** å»è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\nç„¶é¹…å½“ **Kotlin** å‡ºç°åï¼Œ**ButterKnife** ä¹Ÿå¯ä»¥éšä¹‹æŠ›å¼ƒäº†ï¼Œè¿™æ—¶å€™ **DataBinding** çš„ç”¨å¤„å´å’Œ **Kotlin** å¹¶ä¸å†²çªï¼Œç›¸åäºŒè€…ç»“åˆä½¿ç”¨ï¼Œåè€Œä¼šè®©ä½ æœ‰æ„æƒ³ä¸åˆ°çš„ã€ä¹…è¿çš„ã€å¯åœˆå¯ç‚¹çš„ã€çœ¼å‰ä¸€äº®çš„ã€æ‹æ‰‹ç§°èµçš„ä½“éªŒï¼\n\n\n# ä½¿ç”¨\n\n\nä½¿ç”¨ **Data-Binding** ï¼Œé¦–å…ˆéœ€è¦åœ¨ **app moudle** ä¸‹çš„ **build.gradle** ä¸­æ·»åŠ ï¼š\n\n```\nandroid {\n    ...\n    dataBinding {\n        enabled = true\n    }\n    ...\n}\n```\n\nç„¶åå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼Œä¸è¿‡éœ€è¦æ³¨æ„ï¼Œæœ€ä½æ”¯æŒçš„Androidç‰ˆæœ¬æ˜¯4.0ï¼ˆåæ­£å‡ ä¹æ²¡æœ‰æ¯”è¿™æ›´ä½çš„androidè®¾å¤‡äº†ï¼‰ï¼Œgradleæ’ä»¶ç‰ˆæœ¬æ˜¯1.5.0 ï¼ˆéƒ½2018å¹´äº†ï¼Œandroidå¼€å‘è€…ä»¬è‚¯å®šä¸èƒ½ç”¨æ¯”è¿™æ›´ä½çš„ç‰ˆæœ¬äº†å§ï¼ï¼‰\n\n\næ¥ä¸‹æ¥ï¼Œä¸¾ä¸ªæœ€ç®€å•çš„æ —å­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª **Cartoon** ç±»ï¼š\n\n```\nclass Cartoon(var name:String = \"JOJOçš„å¥‡å¦™å†’é™©\" , var series :String = \"é»„é‡‘ä¹‹é£\",\n              var leader : String = \"ä¹”é²è¯ºÂ·ä¹”å·´çº³\", var feature : String = \"é»„é‡‘ä½“éªŒ\") {\n}\n```\nç„¶åæ–°å»ºä¸€ä¸ªActivityï¼Œåœ¨è¿™ä¸ªActivityçš„xmlä¸­çš„æ ¹å¸ƒå±€ä¸‹ï¼Œé€šè¿‡Alt+Enterå¿«æ·é”®åˆ›å»ºdatabindingçš„å¸ƒå±€ï¼ŒåŒæ—¶ï¼Œå¯¼å…¥ **Cartoon** ç±»ï¼š\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/DataBinding/one/databinding-001.png)\n\nè¿™æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ ¹æ®è¿™ä¸ªå¸ƒå±€ç”Ÿæˆç›¸åº”çš„ç»‘å®šç±»ï¼Œè¿™é‡Œä¼šç”Ÿæˆä¸€ä¸ª **ActivityDataBindingBinding** çš„ç±» ï¼Œæš‚æ—¶å…ˆä¸ç”¨ç®¡ï¼Œæˆ‘ä»¬ç»§ç»­åœ¨xmlä¸Šå·¥ä½œï¼Œä¿®æ”¹ä¸€ä¸‹å¸ƒå±€æ ·å¼ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/DataBinding/one/databinding-002.png)\n\nç„¶åï¼Œåœ¨å¯¹åº”çš„Activityå†…å¯¹ç”Ÿæˆçš„ **ActivityDataBindingBinding** ç±»è¿›è¡Œæ“ä½œï¼š\n\n```\nclass DataBindingActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n//        setContentView(R.layout.activity_data_binding)\n        val bindingBinding : ActivityDataBindingBinding = DataBindingUtil.setContentView(this, R.layout.activity_data_binding)\n        bindingBinding.cartoon = Cartoon()\n    }\n}\n```\n\nç”±äºKotlinåˆ›å»ºçš„Cartoonå®ä½“ç±»å·²ç»ç»™æ¯ä¸ªå­—æ®µéƒ½èµ‹äºˆäº†åˆå§‹å€¼ï¼Œè¿™é‡Œä¸ç”¨å†è¿›è¡Œèµ‹å€¼ï¼Œç„¶åçœ‹ä¸€ä¸‹æ•ˆæœï¼š\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/DataBinding/one/databinding-003.png)\n\n> å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ items å»è¿›è¡Œçš„ç»‘å®šï¼Œä¾‹å¦‚Fragmentã€RecyclerViewçš„adapterï¼Œå¯ä»¥ä½¿ç”¨ inflate() çš„æ–¹æ³•å»ç»‘å®šæˆ–è€… DataBindingUtil ç±»ï¼Œå°±åƒä¸‹é¢è¿™æ ·\n\n```\nval listItemBinding = ListItemBinding.inflate(layoutInflater, viewGroup, false)\n// or\nval listItemBinding = DataBindingUtil.inflate(layoutInflater, R.layout.list_item, viewGroup, false)\n```\n\nå¦‚æœè¿™æ—¶å€™ä½ æƒ³ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå¯ä»¥åœ¨ **string.xml** ä¸­åˆ›å»ºï¼Œæ¯”å¦‚ï¼š\n\n```\n    <string name=\"cartoon_name\">åŠ¨æ¼«å:%s</string>\n    <string name=\"cartoon_series\">ç³»åˆ—:%s</string>\n    <string name=\"cartoon_leader\">ä¸»è§’:</string>\n    <string name=\"cartoon_bodyDouble\">æ›¿èº«:</string>\n```\nä½¿ç”¨çš„æ—¶å€™å¯ä»¥æ˜¯è¿™æ ·ï¼š\n\n```\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<layout xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <data>\n        <variable name=\"cartoon\" type=\"com.test.project.testdatabinding.DataBinding.Cartoon\"/>\n    </data>\n\n    <LinearLayout\n        android:orientation=\"vertical\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\">\n        <TextView\n            android:layout_gravity=\"center\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"@{@string/cartoon_name(cartoon.name)}\"/>\n        <TextView\n            android:layout_gravity=\"center\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"@{@string/cartoon_series(cartoon.series)}\"/>\n        <TextView\n            android:layout_gravity=\"center\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"@{@string/cartoon_leader + cartoon.leader}\"/>\n        <TextView\n            android:layout_gravity=\"center\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"@{@string/cartoon_bodyDouble + cartoon.feature}\"/>\n\n    </LinearLayout>\n</layout>\n```\næ•ˆæœå¦‚ä¸‹ï¼š\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/DataBinding/one/databinding-004.png)\n\nè‡³æ­¤ï¼Œæˆ‘ä»¬å®Œæˆäº†ä¸DataBindingçš„åˆæ¬¡æ¥è§¦ï¼\n\nå¯ä»¥çœ‹åˆ°ï¼Œç›¸è¾ƒäºå¾€å¸¸çš„é€šè¿‡findViewByIdå»è·å–æ§ä»¶å®ä¾‹ï¼Œç„¶åç»™æ§ä»¶è®¾ç½®æ•°æ®çš„æ–¹æ³•ï¼Œè¿™æ ·æ˜¾ç„¶å»æ‰äº†Activityå†…è®¸å¤šä¸å¿…è¦çš„ä»£ç ã€‚\n\nä¸è¿‡ä»¥ä¸Šåªæ˜¯æ¯”è¾ƒç®€å•çš„DataBindingç”¨æ³•ï¼Œä¸‹é¢å°†ä¼šä»‹ç»DataBindingçš„å…¶ä»–åŠŸèƒ½ï¼Œè¿™æ ·æ‰èƒ½åº”æ›´å¤æ‚çš„éœ€æ±‚ã€‚\n\n\n## é›†åˆçš„ä½¿ç”¨\n\n\n```\n<data>\n    <import type=\"android.util.SparseArray\"/>\n    <import type=\"java.util.Map\"/>\n    <import type=\"java.util.List\"/>\n    <variable name=\"list\" type=\"List<String>\"/>\n    <variable name=\"sparse\" type=\"SparseArray<String>\"/>\n    <variable name=\"map\" type=\"Map<String, String>\"/>\n    <variable name=\"index\" type=\"int\"/>\n    <variable name=\"key\" type=\"String\"/>\n</data>\nâ€¦\nandroid:text=\"@{list[index]}\"\nâ€¦\nandroid:text=\"@{sparse[index]}\"\nâ€¦\nandroid:text=\"@{map[key]}\"  //è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨ @{map.key}ä»£æ›¿\n```\n\n## ç‚¹å‡»äº‹ä»¶\n\nç‚¹å‡»äº‹ä»¶ä¹Ÿæ˜¯å¯ä»¥åœ¨xmlä¸­ç»‘å®šçš„ï¼Œåœ¨ DataBindingActivity ä¸­æ·»åŠ å¦‚ä¸‹æ–¹æ³•ï¼š\n\n```\n    fun doClick(view: View){\n        Toast.makeText(this, \"ç‚¹å‡»æµ‹è¯•\", Toast.LENGTH_SHORT).show()\n    }\n```\nä¸è¦å¿˜äº†åœ¨æ‹¬å·ä¸­ä¼ å…¥View\n\nç„¶åå†xmlä¸­å†™ä¸€ä¸ªbuttonçš„ç‚¹å‡»äº‹ä»¶\n```\n <Button\n            android:text=\"DataBinding-ç‚¹å‡»æµ‹è¯•\"\n            android:onClick=\"doClick\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\" />\n```\nå¦‚æœæƒ³é€šè¿‡ç‚¹å‡»äº‹ä»¶ä¼ å…¥å‚æ•°çš„è¯ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢è¿™ç§æ–¹æ³•ï¼š\n\n\n```\n<variable name=\"handler\" type=\"com.test.project.testdatabinding.DataBinding.DataBindingActivity\"/>\n\n\n<Button\n            android:text=\"DataBinding-ç‚¹å‡»æµ‹è¯•\"\n            android:onClick=\"@{() -> handler.doClick(cartoon.name)}\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\" />\n```\nä»xmlä¸­å¯¼å…¥ DataBindingActivity åï¼Œå†ä¿®æ”¹ä»£ç ï¼š\n\n```\nclass DataBindingActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n//        setContentView(R.layout.activity_data_binding)\n        val bindingBinding : ActivityDataBindingBinding = DataBindingUtil.setContentView(this, R.layout.activity_data_binding)\n        bindingBinding.cartoon = Cartoon()\n        bindingBinding.handler = this\n    }\n\n    fun doClick(message: String){\n        Toast.makeText(this, message, Toast.LENGTH_SHORT).show()\n    }\n}\n```\nç‚¹å‡»æ•ˆæœå¦‚ä¸‹ï¼š\n\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/DataBinding/one/databinding-005.png)\n\nå¦‚æœæœ‰æ›´åŠ å¤æ‚çš„ç‚¹å‡»äº‹ä»¶ï¼Œå¯ä»¥å‚è€ƒå®˜ä»‹ç»ä¸­çš„ï¼Œå¦‚å¸¦Viewå‚æ•°çš„ï¼š\n```\nclass Presenter {\n    fun onSaveClick(view: View, task: Task){}\n}\n\n\nandroid:onClick=\"@{(theView) -> presenter.onSaveClick(theView, task)}\"\n```\n\n## import ä¸ include\n\n### import\n\nåœ¨xmlä¸­ï¼Œå¯ä»¥é€šè¿‡å¯¼å…¥ä¸€äº›å·¥å…·ç±»è¿›è¡Œç®€å•åœ°æ“ä½œï¼Œæ¯”å¦‚è¯´å¯¼å…¥Viewç±»ï¼š\n\n```\n<data>\n    <import type=\"android.view.View\"/>\n</data>\n```\nè¿™æ ·ä½ å°±å¯ä»¥ç›´æ¥åœ¨xmlä¸­ä½¿ç”¨å®ƒçš„ä¸€äº›é™æ€æ–¹æ³•æˆ–è€…å˜é‡,å®˜æ–¹çš„ä¾‹å­ä¸­ç®€å•åœ°ç”¨æ³•å¦‚ä¸‹ï¼š\n\n```\n<TextView\n   android:text=\"@{user.lastName}\"\n   android:layout_width=\"wrap_content\"\n   android:layout_height=\"wrap_content\"\n   android:visibility=\"@{user.isAdult ? View.VISIBLE : View.GONE}\"/>\n```\nä¸è¿‡æˆ‘è§‰å¾—xmlä¸­ä¸é€‚åˆåšå¤ªå¤šé€»è¾‘åˆ¤æ–­çš„æ“ä½œï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™åº”è¯¥è€ƒè™‘ä¸€ä¸‹æŸäº›æ“ä½œæ˜¯å¦çœŸçš„åˆé€‚\n\n\n### include\n\nå¦‚æœä½ æœ‰åœ¨xmlä¸­ä½¿ç”¨åˆ° include ï¼Œé€šè¿‡ä¸‹é¢ä¾‹å­ä¸­çš„æ–¹æ³•å°±è¡Œç»‘å®šï¼š\n```\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:bind=\"http://schemas.android.com/apk/res-auto\">\n    <data>\n        <variable name=\"cartoon\" type=\"com.test.project.testdatabinding.DataBinding.Cartoon\"/>\n    </data>\n\n    <LinearLayout\n        android:orientation=\"vertical\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\">\n        \n       <include layout=\"@layout/layout_test\"\n           bind:cartoon=\"@{cartoon}\"/>\n\n    </LinearLayout>\n</layout>\n```\nlayout_test å¸ƒå±€ï¼š\n\n```\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<layout xmlns:android=\"http://schemas.android.com/apk/res/android\">\n\n    <data>\n        <variable name=\"cartoon\" type=\"com.test.project.testdatabinding.DataBinding.Cartoon\"/>\n    </data>\n\n    <android.support.constraint.ConstraintLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\">\n\n        <TextView\n            android:text=\"@{cartoon.name}\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\" />\n\n    </android.support.constraint.ConstraintLayout>\n</layout>\n```\næ³¨æ„ï¼Œè¦ä½¿ç”¨ bind å±æ€§ï¼Œå¯åˆ«å¿˜äº†ä¸‹é¢çš„è¿™è¡Œä»£ç ï¼š\n\n```\nxmlns:bind=\"http://schemas.android.com/apk/res-auto\"\n```\n\n# æš‚æ­‡\n\nå‡ºäºç¯‡å¹…è€ƒè™‘ï¼Œå…³äº **DataBinding** çš„ä½¿ç”¨ï¼Œæš‚ä¸”å°±è®²åˆ°è¿™é‡Œï¼Œå…³äºå®ƒæ›´è¯¦å°½çš„ç”¨æ³•ï¼Œåç»­å†ä½œä»‹ç»ã€‚\n\n\n\n---\n\n# æœªå®Œå¾…ç»­\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"articleName":"æ‰‹æŠŠæ‰‹æ•™ä½ androidç«¯å¾®ä¿¡æ”¯ä»˜æ¥å…¥","createTime":"2018-10-08T21:49:47.000","lastModifiedTime":"2020-02-03T10:29:42.000","tag":"Android","summary":" Androidç«¯æ¥å…¥å¾®ä¿¡æ”¯ä»˜ï¼Œè›®ç®€å•çš„\n\n\n ä¸€ã€æ·»åŠ gradleä¾èµ–ï¼š\n\nåœ¨app m","imageAddress":"/img/wechat_pay.png","articleAddress":"/config/study/æ‰‹æŠŠæ‰‹æ•™ä½ androidç«¯å¾®ä¿¡æ”¯ä»˜æ¥å…¥.md","articleContent":"---\ntitle: æ‰‹æŠŠæ‰‹æ•™ä½ androidç«¯å¾®ä¿¡æ”¯ä»˜æ¥å…¥\ndate: 2018-10-08 21:49:47\nindex_img: /img/wechat_pay.png\ntags: Android\n---\n\n## Androidç«¯æ¥å…¥å¾®ä¿¡æ”¯ä»˜ï¼Œè›®ç®€å•çš„\n\n\n### ä¸€ã€æ·»åŠ gradleä¾èµ–ï¼š\n\nåœ¨app moduleç›®å½•ä¸‹çš„build.graldeä¸­æ·»åŠ \n\n```\ndependencies {\n    //å¾®ä¿¡SDKæ¥å…¥\n    implementation 'com.tencent.mm.opensdk:wechat-sdk-android-with-mta:+'\n}\n```\ngraldeæ„å»ºå®Œæˆä¹‹åï¼Œå†åšä¸‹ä¸€æ­¥çš„æ“ä½œã€‚\n\n### äºŒã€åœ¨AndroidManifest.xmlä¸­æ·»åŠ ç›¸å…³æƒé™ï¼š\n\n```\n    <!--å¾®ä¿¡æ”¯ä»˜æƒé™-->\n    <uses-permission android:name=\"android.permission.INTERNET\" />\n    <uses-permission android:name=\"android.permission.MODIFY_AUDIO_SETTINGS\"/>\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\"/>\n```\n\n### ä¸‰ã€åˆ›å»ºwxapiç›®å½•ï¼Œå¹¶åˆ›å»ºWXPayEntryActivity\n\nåœ¨ä½ çš„packageç›®å½•ä¸‹ï¼Œåˆ›å»º**wxapi**ç›®å½•ï¼Œæ¯”å¦‚è¯´æˆ‘ä½¿ç”¨çš„demoé¡¹ç›®ï¼Œ**wxapi**å°±åœ¨ç›®å½•**net.sourceforge.simcpux**ç›®å½•ä¸‹\n\nåŒæ—¶ï¼Œåœ¨**wxapi**ç›®å½•ä¸‹åˆ›å»º**WXPayEntryActivity**\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/wxpay-001.png)\n\n**WXPayEntryActivity**å®ç°**IWXAPIEventHandler**æ¥å£ï¼Œè¿™ä¸ªActivityé¡µé¢å°±æ˜¯æ”¯ä»˜ç»“æœçš„å›è°ƒé¡µé¢ï¼Œä¸‹é¢æ˜¯å®ƒæœ€ç®€å•åœ°å®ç°ï¼š\n```\npublic class WXPayEntryActivity extends Activity implements IWXAPIEventHandler{\n\t\n\tprivate static final String TAG = \"MicroMsg.SDKSample.WXPayEntryActivity\";\n\t\n    private IWXAPI api;\n\t\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.pay_result);\n        \n    \tapi = WXAPIFactory.createWXAPI(this, \"ä½ çš„appid\");\n        api.handleIntent(getIntent(), this);\n    }\n\n\t@Override\n\tprotected void onNewIntent(Intent intent) {\n\t\tsuper.onNewIntent(intent);\n\t\tsetIntent(intent);\n        api.handleIntent(intent, this);\n\t}\n\n\t@Override\n\tpublic void onReq(BaseReq req) {\n\t}\n\n\t@Override\n\tpublic void onResp(BaseResp resp) {\n\t\tLog.d(TAG, \"onPayFinish, errCode = \" + resp.errCode);\n\n\t\tif (resp.getType() == ConstantsAPI.COMMAND_PAY_BY_WX) {\n\t\t\tAlertDialog.Builder builder = new AlertDialog.Builder(this);\n\t\t\tbuilder.setTitle(\"æ”¯ä»˜ç»“æœ\");\n\t\t\tbuilder.setMessage(getString(R.string.pay_result_callback_msg, String.valueOf(resp.errCode)));\n\t\t\tbuilder.show();\n\t\t}\n\t}\n}\n```\nåŒæ—¶ï¼Œåˆ«å¿˜äº†åœ¨**AndroidManifest.xml**ä¸­å£°å**WXPayEntryActivity**\n\n\n```\n        <activity\n            android:name=\".wxapi.WXPayEntryActivity\"\n            android:exported=\"true\"\n            android:launchMode=\"singleTop\">\n            <intent-filter>\n                <action android:name=\"android.intent.action.VIEW\"/>\n                <category android:name=\"android.intent.category.DEFAULT\"/>\n                <data android:scheme=\"ä½ çš„appid\"/>\n            </intent-filter>\n\n        </activity>\n```\n\nå½“è¿™äº›å‡†å¤‡å·¥ä½œéƒ½åšå¥½ä¹‹åï¼Œå°±å¯ä»¥å‡†å¤‡ä½¿ç”¨äº†ã€‚\n\n### å››ã€ä½¿ç”¨\n\nå½“ä½ ä»æœåŠ¡ç«¯è·å–åˆ°è®¢å•çš„ç›¸å…³ä¿¡æ¯åï¼Œå°±å¯ä»¥è°ƒç”¨æ”¯ä»˜æ¥å£äº†ï¼š\n```\n                IWXAPI api = WXAPIFactory.createWXAPI(context, null);\n                api.registerApp(IntentKey.WX_APP_ID);\n                PayReq req = new PayReq();\n                req.appId\t\t\t= \"wx8888888888888888\";//ä½ çš„å¾®ä¿¡appid\n                req.partnerId\t\t= \"1900000109\";//å•†æˆ·å·\n                req.prepayId\t\t= \"WX1217752501201407033233368018\";//é¢„æ”¯ä»˜äº¤æ˜“ä¼šè¯ID\n                req.nonceStr\t\t= \"5K8264ILTKCH16CQ2502SI8ZNMTM67VS\";//éšæœºå­—ç¬¦ä¸²\n                req.timeStamp\t\t= \"1412000000\";//æ—¶é—´æˆ³\n                req.packageValue\t= \"Sign=WXPay\";æ‰©å±•å­—æ®µ,è¿™é‡Œå›ºå®šå¡«å†™Sign=WXPay\n                req.sign\t\t\t= \"C380BEC2BFD727A4B6845133519F3AD6\";//ç­¾å\n//\t\t\t\treq.extData\t\t\t= \"app data\"; // optional\n                // åœ¨æ”¯ä»˜ä¹‹å‰ï¼Œå¦‚æœåº”ç”¨æ²¡æœ‰æ³¨å†Œåˆ°å¾®ä¿¡ï¼Œåº”è¯¥å…ˆè°ƒç”¨IWXMsg.registerAppå°†åº”ç”¨æ³¨å†Œåˆ°å¾®ä¿¡\n                api.sendReq(req);\n```\n\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢çš„è¿™äº›ä¿¡æ¯ï¼Œéƒ½åº”è¯¥ä»æœåŠ¡å™¨å»è·å–ï¼Œæ¯”å¦‚è¯´éšæœºå­—ç¬¦ä¸²ä¹‹ç±»çš„é•¿çŸ­ä¹Ÿä¸ä¸€å®šå’Œä¸Šé¢ä¾‹å­ä¸­çš„ä¸€è‡´ã€‚å…·ä½“æ˜¯ä»€ä¹ˆï¼Œå¾—çœ‹ä½ ä»¬çš„åç«¯ç»™çš„æ˜¯ä»€ä¹ˆã€‚\n\nä¸å‡ºæ„å¤–çš„è¯ï¼Œé€šè¿‡ä¸Šé¢æ¥å£çš„è°ƒç”¨ï¼Œä½ å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨å¾®ä¿¡æä¾›çš„APPæ”¯ä»˜äº†ã€‚\n\næ˜¯ä¸æ˜¯éå¸¸ç®€å•ï¼Ÿï¼\n\n***ç„¶é¹…ã€‚ã€‚ã€‚***\n\näº‹æƒ…å“ªå„¿æœ‰è¿™ä¹ˆé¡ºåˆ©ï¼Œåˆ°äº†çœŸæ­£ä½¿ç”¨çš„æ—¶å€™ï¼Œé‡åˆ°çš„é—®é¢˜å¯ä¸å°‘ï¼Œä¸‹é¢ä¼šåˆ—ä¸¾å‡ºé‡åˆ°è¿‡çš„é—®é¢˜ï¼Œç„¶åè¯´æ˜è§£å†³åŠæ³•ã€‚\n\n\n## Androidç«¯æ¥å…¥å¾®ä¿¡æ”¯ä»˜ï¼Œå‘è›®å¤šçš„\n\n**å¾®ä¿¡æ”¯ä»˜appçš„æ¥å…¥ï¼Œè¦æˆ‘æ¥è¯´ï¼Œå¯¹åˆæ¬¡å°è¯•çš„äººéå¸¸ä¸å‹å¥½**\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¼€å‘è€…ä½¿ç”¨æ–°çš„å·¥å…·éƒ½éœ€è¦å…ˆçœ‹ä¸€çœ‹å®ƒçš„è¯´æ˜æ–‡æ¡£ï¼Œå¦‚æœè¯´æ˜æ–‡æ¡£å†™çš„å¤Ÿå¥½ï¼Œç›´æ¥ç”¨å°±æ˜¯äº†ï¼›å¦‚æœæ–‡æ¡£ä»‹ç»çš„ä¸å¤Ÿå…¨é¢ï¼Œè¿˜éœ€è¦æœ‰Demoæä¾›å‚è€ƒã€‚å¾®ä¿¡çš„Appæ”¯ä»˜å°±å±äºåè€…ã€‚\nä¸‹é¢æ˜¯å®ƒçš„æ¥å…¥æ–‡æ¡£é¡µé¢ï¼š\n\n[Androidæ¥å…¥æŒ‡å—](https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=1417751808&token=&lang=zh_CN)ï¼ˆè¿˜æœ‰å…¶ä»–ç›¸å…³ä¿¡æ¯ä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ªé¡µé¢æ¥å…¥ï¼‰\n\nç”±äºä»…ä»…é ç€æ–‡æ¡£çš„è¯´æ˜ä¸è¶³ä»¥è®©æˆ‘æŒæ¡å¯¹å¾®ä¿¡æ”¯ä»˜çš„ä½¿ç”¨ï¼Œæ‰€ä»¥è‡ªç„¶è€Œç„¶çš„ï¼ŒDemoå°±æˆäº†åˆæ¬¡æ¥è§¦å¾®ä¿¡æ”¯ä»˜è€…çš„å­¦ä¹ æ•™æå•¦ï¼\n\n[Demoä¸‹è½½](https://pay.weixin.qq.com/wiki/doc/api/app/app.php?chapter=11_1)\n\nå½“ä½ æ¥å…¥Demoåï¼Œä¸€ç³»åˆ—çš„é—®é¢˜å°†ä¼šæ¥è¸µè€Œè‡³ï¼Œä¸‹é¢æ¥çœ‹ä¸€çœ‹å…·ä½“æ˜¯ä»€ä¹ˆé—®é¢˜\n\n### æ¥å…¥Demo\n\nå°†ä¸‹è½½åçš„DemoæŒ‰ç…§Import mouduleçš„æ–¹å¼æ¥å…¥åˆ°æŸä¸ªé¡¹ç›®ä¸­ï¼š\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/wxpay-002.png)\n\nç„¶åé€‰ä¸­è¿™ä¸ªé¡¹ç›®ï¼Œè¿›è¡Œç¼–è¯‘ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/wxpay-003.png)\n\næ¥ä¸‹æ¥ï¼Œç¼–è¯‘å™¨å°±å¼€å§‹æŠ¥é”™äº†ï¼Œæ‰¾åˆ°æŠ¥é”™çš„ä½ç½®ï¼Œå‘ç°æ˜¯å¦‚ä¸‹é—®é¢˜ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/wxpay-004.png)\n\n**åˆ°è¿™é‡Œå¼€å§‹ï¼Œæˆ‘å°±è¦åæ§½äº†**\n\nè¿™ç§é—®é¢˜ä¸€çœ‹å°±æ˜¯æ‰¾ä¸åˆ°åŒ…äº†ï¼Œäºæ˜¯æˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ä¸­çš„build.graldeä¸­çš„ä¾èµ–ï¼Œå¦‚ä¸‹\n```\ndependencies {\n    compile files('libs/libammsdk.jar')\n    compile files('libs/wechat-sdk-android-with-mta-1.0.2.jar')\n}\n\n```\nå¾ˆæ˜¾ç„¶ï¼Œæ˜¯å¯¼å…¥çš„æœ¬åœ°jaråŒ…ï¼Œä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬å°†è¿™é‡Œçš„ä¾èµ–ä¿®æ”¹æˆä¹‹å‰é…ç½®æ—¶çš„ï¼š\n\n```\ndependencies {\n    //å¾®ä¿¡SDKæ¥å…¥\n    implementation 'com.tencent.mm.opensdk:wechat-sdk-android-with-mta:+'\n}\n```\nåŒæ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å‘ç°ï¼Œé‡æ–°æ„å»ºå®Œé¡¹ç›®åï¼Œä¸Šé¢çš„é—®é¢˜å¹¶æ²¡æœ‰è§£å†³ã€‚\n\nè¿™æ—¶å€™æˆ‘ä»¬åœ¨Android studioçš„ä¸­çš„**External Libraries**å»çœ‹ä¸€çœ‹æ–°æ„å»ºçš„åº“:\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/wxpay-005.png)\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ­£ç¡®çš„å¼•ç”¨è·¯å¾„åº”è¯¥æ˜¯æŠŠ**sdk**æ¢æˆ**opensdk**\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/wxpay-006.png)\n\nå½“ä½ å°†æ‰€æœ‰çš„è·¯å¾„éƒ½ä¿®æ”¹è¿‡æ¥åï¼Œè¿˜ä¼šæœ‰å¦‚ä¸‹é—®é¢˜ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/wxpay-007.png)\n\nå°†ä¸Šé¢çš„ **imgObj.imageUrl = url** ä¿®æ”¹ä¸ºï¼š\n\n```\nimgObj.setImagePath(url);\n```\nè¿™ä¸ªé”™è¯¯å‡ºç°çš„åœ°æ–¹æœ‰ä¸¤å¤„å§ï¼Œå½“ä½ æŠŠè¿™äº›é”™è¯¯éƒ½è§£å†³åï¼Œå†æ¬¡è¿›è¡Œç¼–è¯‘ï¼Œå°±å¯ä»¥æ­£å¸¸è¿è¡Œå•¦ï¼\n\nDemoè¿è¡Œåçš„ç•Œé¢æ˜¯è¿™æ ·çš„ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/wxpay-008.png)\n\nåˆ°äº†è¿™é‡Œï¼ŒåŸºæœ¬ä¸Šå°±å¯ä»¥è¿›è¡Œæµ‹è¯•äº†ï¼Œå‰©ä¸‹çš„ä¸œè¥¿æ— éœ€å†å¤šè¯´ï¼Œè¿‡ç¨‹å·®ä¸å¤šå’Œä¸Šé¢ç›´æ¥æ¥å…¥çš„æµç¨‹ä¸€æ ·ï¼Œä¸è¿‡è¦demoé‡Œé¢çš„æ›´åŠ è¯¦ç»†ï¼Œåªéœ€å¤šå¤šè§‚æ‘©å³å¯ã€‚\n\né‚£ä¹ˆï¼Œæœ€åè¿˜æ˜¯è¯´ä¸€ä¸‹éœ€è¦æ³¨æ„çš„ç‚¹å§ã€‚\n\n### æ³¨æ„äº‹é¡¹\n\nåœ¨å¾®ä¿¡å¼€æ”¾å¹³å°ä¸Šé¢è®¾ç½®appç›¸å…³å‚æ•°çš„æ—¶å€™ï¼Œéœ€è¦**åº”ç”¨åŒ…å**ä»¥åŠ**åº”ç”¨ç­¾å**\n\n![image](https://pay.weixin.qq.com/wiki/doc/api/img/chapter8_5_2.png)\n\nè·å–åº”ç”¨ç­¾åçš„å·¥å…·åœ°å€æ˜¯ï¼š[ç­¾åå·¥å…·ä¸‹è½½åœ°å€](https://open.weixin.qq.com/zh_CN/htmledition/res/dev/download/sdk/Gen_Signature_Android.apk)\n\n> è¿™é‡Œåˆè¦åæ§½ä¸€ä¸‹ï¼Œç­¾åå·¥å…·å°±æ˜¯ä¸€ä¸ªapkï¼Œè£…åˆ°æ‰‹æœºä¸Šåï¼Œè¾“å…¥åŒ…åï¼Œç„¶åç”Ÿæˆç­¾åï¼Œæœ€å…³é”®çš„æ˜¯è¿™ä¸ªç­¾åæ— æ³•å¤åˆ¶ï¼Œä½¿ç”¨ä¸‹æ¥å°±ä¸€ä¸ªæ„Ÿå—ï¼Œä¸æ–¹ä¾¿å•Šï¼ï¼ï¼ï¼\n\nç­¾åå·¥å…·é‡Œé¢è¾“å…¥çš„åŒ…åå°±æ˜¯ä¹‹å‰æåˆ°è¿‡çš„ï¼Œå¯ä»¥ç›´æ¥åœ¨Androidmanifest.xmlä¸­å¤åˆ¶ã€‚\n\n**ä½†æ˜¯**\n\n    å°½ç®¡åŒ…åä¸€æ ·ï¼Œreleaseç‰ˆçš„é¡¹ç›®å’Œdebugç‰ˆçš„é¡¹ç›®æœ€åç”Ÿæˆçš„ç­¾åéƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™ç‚¹å¾ˆé‡è¦ï¼\n    \n**æ‰€ä»¥å¦‚æœä½ æ˜¯ç”¨çš„debugè¿›è¡Œæµ‹è¯•ï¼Œé‚£ä¹ˆç½‘ç«™é‡Œé¢çš„ç­¾åä¸€å®šè¦å¡«å†™debugç‰ˆä¸‹è·å–åˆ°çš„ç­¾åï¼Œæ­£å¼å‘å¸ƒçš„æ—¶å€™ï¼Œè¦æŠŠå®ƒæ¢æˆreleaseç‰ˆçš„ï¼å¦‚æœç­¾åä¸ä¸€è‡´ï¼Œä½ æ˜¯æ— æ³•é€šè¿‡é‚£ä¸ªâ€œ-1â€è¿”å›å€¼è·å–åˆ°ä»»ä½•æœ‰æ•ˆçš„é”™è¯¯ä¿¡æ¯çš„!åˆ‡è®°ï¼**\n\n\n<font face=\"STCAIYUN\">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~é‚£ä¹ˆ</font>\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/wxpay-009.png)"},{"articleName":"Kotlinå­¦ä¹ ç¬”è®°ï¼ˆç¬¬å…­ç« ï¼‰","createTime":"2018-10-05T21:49:47.000","lastModifiedTime":"2020-02-03T10:38:44.000","tag":"Kotlin","summary":" 1.å¯ç©ºç±»å‹\n\né—®å·å¯ä»¥åŠ åœ¨ä»»ä½•ç±»å‹çš„åé¢æ¥è¡¨ç¤ºè¿™ä¸ªç±»å‹çš„å˜é‡å¯ä»¥å­˜å‚¨ null å¼•ç”¨ ï¼š ","imageAddress":"/img/kotlin_5.png","articleAddress":"/config/study/Kotlinå­¦ä¹ ç¬”è®°ï¼ˆç¬¬å…­ç« ï¼‰.md","articleContent":"---\ntitle: Kotlinç¬”è®°(äº”):åŸºç¡€ç¯‡latest\ndate: 2018-10-05 21:49:47\nindex_img: /img/kotlin_5.png\ntags: Kotlin\n---\n\n### 1.å¯ç©ºç±»å‹\n\né—®å·å¯ä»¥åŠ åœ¨ä»»ä½•ç±»å‹çš„åé¢æ¥è¡¨ç¤ºè¿™ä¸ªç±»å‹çš„å˜é‡å¯ä»¥å­˜å‚¨ null å¼•ç”¨ ï¼š String?ã€ Int?ã€ MyCustomType? ï¼Œç­‰ç­‰\n\nä¸€æ—¦ä½ æœ‰ä¸€ä¸ªå¯ç©ºç±»å‹çš„å€¼ï¼Œèƒ½å¯¹å®ƒè¿›è¡Œçš„æ“ä½œä¹Ÿä¼šå—åˆ°é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œä¸èƒ½å†è°ƒç”¨å®ƒçš„æ–¹æ³• \n```\n>> fun strLenSafe(s: String?) = s.length() \nERROR: only safe (?.) or non null asserted (!!.) calls are allowed on a nullable receiver of type kotlin.String?\n```\nä¹Ÿä¸èƒ½æŠŠå®ƒèµ‹å€¼ç»™éç©ºç±»å‹çš„å˜é‡ ï¼š\n```\n>> val x: String? = null \n>> var y: String = x \nERROR: Type mismatch: inferred type is String? but String was expected \n```\nä¹Ÿä¸èƒ½æŠŠå¯ç©ºç±»å‹çš„å€¼ä¼ ç»™æ‹¥æœ‰éç©ºç±»å‹å‚æ•°çš„å‡½æ•° ï¼š\n```\n>> strLen(x) \nERROR: Type mismatch: inferred type is String? but String was expected \n```\né‚£ä¹ˆä½ å¯ä»¥å¯¹å®ƒåšä»€ä¹ˆå‘¢ï¼Ÿæœ€é‡è¦çš„æ“ä½œå°±æ˜¯å’Œ null è¿›è¡Œæ¯”è¾ƒã€‚ è€Œä¸”ä¸€æ—¦ä½  è¿›è¡Œäº†æ¯”è¾ƒæ“ä½œï¼Œç¼–è¯‘å™¨å°±ä¼šè®°ä½ï¼Œå¹¶ä¸”åœ¨è¿™æ¬¡æ¯”è¾ƒå‘ç”Ÿçš„ä½œç”¨åŸŸå†…æŠŠè¿™ä¸ªå€¼å½“ä½œéç©ºæ¥å¯¹å¾…\n\n\n### 2.å®‰å…¨è°ƒç”¨è¿ç®—ç¬¦ï¼š\"?.\"\n\n> Kotlinçš„å¼¹è¯åº“ä¸­æœ€æœ‰æ•ˆçš„ä¸€ç§å·¥å…·å°±æ˜¯å®‰å…¨è°ƒç”¨è¿ç®—ç¬¦ï¼š?.ï¼Œå®ƒå…è®¸ä½ æŠŠä¸€ æ¬¡nullæ£€æŸ¥å’Œä¸€æ¬¡æ–¹æ³•è°ƒç”¨åˆå¹¶æˆä¸€ä¸ªæ“ä½œã€‚\n\nä¾‹å¦‚ï¼Œè¡¨è¾¾å¼ s?.toUpperCase() ç­‰åŒäºä¸‹é¢è¿™ç§çƒ¦ççš„å†™æ³•ï¼šif(s!=null) s.toUpperCase() else nullã€‚ \n\n### 3.Elvisè¿ç®—ç¬¦ï¼š\"?:\" \n\nKotlin æœ‰æ–¹ä¾¿çš„è¿ç®—ç¬¦æ¥æä¾›ä»£æ›¿nullçš„é»˜è®¤å€¼ã€‚å®ƒè¢«ç§°ä½œ**Elvisè¿ç®—ç¬¦**ï¼ˆæˆ–è€… nullåˆå¹¶è¿ç®—ç¬¦ï¼Œå¦‚æœä½ å–œæ¬¢å¬èµ·æ¥æ›´ä¸¥è‚ƒçš„åç§°ï¼‰ã€‚ä¸‹é¢å±•ç¤ºäº†å®ƒæ˜¯å¦‚ä½•ä½¿ç”¨çš„ï¼š\n```\nfun foo(s: String?) {\n    val t: String= s?:\"\"\n}\n```\n*Elvis è¿ç®—ç¬¦æ¥æ”¶ä¸¤ä¸ªè¿ç®—æ•°ï¼Œå¦‚æœç¬¬ä¸€ä¸ªè¿ç®—æ•°ä¸ä¸ºnullï¼Œè¿ç®—ç»“æœå°±æ˜¯ç¬¬ ä¸€ä¸ªè¿ç®—æ•°ï¼›å¦‚æœç¬¬ä¸€ä¸ªè¿ç®—æ•°ä¸ºnullï¼Œè¿ç®—ç»“æœå°±æ˜¯ç¬¬äºŒä¸ªè¿ç®—æ•°ã€‚*\n\n### 4.å®‰å…¨è½¬æ¢ï¼š\"as?\"\n\n> as? è¿ç®—ç¬¦å°è¯•æŠŠå€¼è½¬æ¢æˆæŒ‡å®šçš„ç±»å‹ï¼Œå¦‚æœå€¼ä¸æ˜¯åˆé€‚çš„ç±»å‹å°±è¿”å› null\n\nä¸€ç§å¸¸è§çš„æ¨¡å¼æ˜¯æŠŠå®‰å…¨è½¬æ¢å’Œ Elvis è¿ç®—ç¬¦ç»“åˆä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œå®ç° equals æ–¹æ³•çš„æ—¶å€™è¿™æ ·çš„ç”¨æ³•éå¸¸æ–¹ä¾¿ã€‚\n\n\n```\nclass Person(val firstNarne: String, val lastNarne: String){\n    override fun equals(o: Any?): Boolean {\n        val otherPerson = o as? Person?: return false\n        return otherPerson.firstNarne == firstNarne && otherPerson.lastNarne == lastNarne \n    }\n    \n    override fun hashCode(): Int = firstNarne.hashCode() * 37 + lastNarne.hashCode() \n}\n\n\n>> val pl = Person ( \"Drnitry\",\"Jernerov\") \n>> val p2 = Person ( \"Drnitry\",\"Jernerov\") \n>> println (pl == p2) \ntrue\n>> println(pl.equals(42)) \nfalse \n```\n\n### 5.éç©ºæ–­è¨€ï¼š\"!!\"\n\n> éç©ºæ–­è¨€æ˜¯ Kotlin æä¾›ç»™ä½ çš„æœ€ç®€å•ç›´ç‡çš„å¤„ç†å¯ç©ºç±»å‹å€¼çš„å·¥å…·ã€‚å®ƒä½¿ç”¨åŒæ„Ÿå¹å·è¡¨ç¤ºï¼Œå¯ä»¥æŠŠä»»ä½•å€¼è½¬æ¢æˆéç©ºç±»å‹ã€‚å¦‚æœå¯¹ null å€¼åšéç©ºæ–­è¨€ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚\n\næŸäº›é—®é¢˜é€‚åˆç”¨éç©ºæ–­è¨€æ¥è§£å†³ã€‚å½“ä½ åœ¨ä¸€ä¸ªå‡½æ•°ä¸­æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºnullï¼Œè€Œåœ¨å¦ä¸€ä¸ªå‡½æ•°ä¸­ä½¿ç”¨è¿™ä¸ªå€¼æ—¶ï¼Œè¿™ç§æƒ…å†µä¸‹ç¼–è¯‘å™¨æ— æ³•è¯†åˆ«è¿™ç§ç”¨æ³•æ˜¯å¦å®‰å…¨ã€‚å¦‚æœä½ ç¡®ä¿¡è¿™æ ·çš„æ£€æŸ¥ä¸€å®šåœ¨å…¶ä»–æŸä¸ªå‡½æ•°ä¸­å­˜åœ¨ï¼Œä½ å¯èƒ½ä¸æƒ³åœ¨ä½¿ç”¨è¿™ä¸ªå€¼ä¹‹å‰é‡å¤æ£€æŸ¥ï¼Œè¿™æ—¶ä½ å°±å¯ä»¥ä½¿ç”¨éç©ºæ–­è¨€ã€‚\n\n å½“ä½ ä½¿ç”¨ !! å¹¶ä¸”å®ƒçš„ç»“æœæ˜¯å¼‚å¸¸æ—¶ï¼Œ å¼‚å¸¸è°ƒç”¨æ¢°çš„è·Ÿè¸ªä¿¡æ¯åªè¡¨æ˜å¼‚å¸¸å‘ç”Ÿåœ¨å“ªä¸€è¡Œä»£ç ï¼Œè€Œä¸ä¼šè¡¨æ˜å¼‚å¸¸å‘ç”Ÿåœ¨å“ªä¸€ä¸ªè¡¨è¾¾ å¼ã€‚ ä¸ºäº†è®©è·Ÿè¸ªä¿¡æ¯æ›´æ¸…æ™°ç²¾ç¡®åœ°è¡¨ç¤ºå“ªä¸ªå€¼ä¸º nullï¼Œæœ€å¥½é¿å…åœ¨åŒä¸€è¡Œä¸­ä½¿ç”¨å¤šä¸ª!!æ–­è¨€\n\n### 6.\"let\"å‡½æ•°\n\n> let å‡½æ•°è®©å¤„ç†å¯ç©ºè¡¨è¾¾å¼å˜å¾—æ›´å®¹æ˜“ã€‚ å’Œå®‰å…¨è°ƒç”¨è¿ç®—ç¬¦ä¸€èµ·ï¼Œå®ƒå…è®¸ä½ å¯¹è¡¨è¾¾å¼æ±‚å€¼ï¼Œæ£€æŸ¥æ±‚å€¼ç»“æœæ˜¯å¦ä¸º nullï¼Œå¹¶æŠŠç»“æœä¿å­˜ä¸ºä¸€ä¸ªå˜é‡ã€‚ æ‰€æœ‰è¿™äº›åŠ¨ä½œéƒ½åœ¨åŒä¸€ä¸ªç®€æ´çš„è¡¨è¾¾å¼ä¸­ã€‚ \n\nä¸‹é¢ä¸¾ä¸ªæ —å­ï¼š\n\n```\nfun sendEmailTo(email: String) { /* ... */ } \n```\nä¸èƒ½æŠŠå¯ç©ºç±»å‹çš„å€¼ä¼ ä¸Šé¢ç»™è¿™ä¸ªå‡½æ•°ï¼š\n\n\n```\n>> val email: String? = ...\n>> sendEmailTo(email) \nERROR: Type mismatch: inferred type is String? but String was expected \n```\nå¿…é¡»æ˜¾å¼åœ°æ£€æŸ¥è¿™ä¸ªå€¼ä¸ä¸º null:\n\n```\nif (email != null) sendEmailTo(email)\n```\nå¦‚æœä½¿ç”¨äº†letå‡½æ•°ï¼Œä¼šæ˜¯ä¸‹é¢è¿™æ ·å­çš„ï¼š\n\n```\nemail?.let { email -> sendEmailTo(email) } \n```\n**let** å‡½æ•°åªåœ¨ email çš„å€¼éç©ºæ—¶æ‰è¢«è°ƒç”¨ï¼Œæ‰€ä»¥ä½ å°±èƒ½åœ¨ lambda ä¸­æŠŠ email å½“ä½œéç©ºçš„å®å‚ä½¿ç”¨ã€‚\nä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆçš„åå­— it è¿™ç§ç®€æ˜è¯­æ³•ä¹‹åï¼Œä¸Šé¢çš„ä»£ç å°±æ›´çŸ­äº† ï¼š \n```\n email?.let{ sendEmailTo(it) ï½ \n```\n\n### 7.å»¶è¿Ÿåˆå§‹åŒ–çš„å±æ€§\n\nKotlin é€šå¸¸è¦æ±‚ä½ åœ¨æ„é€ æ–¹æ³•ä¸­åˆå§‹åŒ–æ‰€æœ‰å±æ€§ï¼Œå¦‚æœæŸä¸ªå±æ€§æ˜¯ éç©ºç±»å‹ï¼Œä½ å°±å¿…é¡»æä¾›éç©ºçš„åˆå§‹åŒ–å€¼ã€‚å¦åˆ™ï¼Œä½ å°±å¿…é¡»ä½¿ç”¨å¯ç©ºç±»å‹ã€‚å¦åˆ™ï¼Œ ä½ å°±å¿…é¡»ä½¿ç”¨å¯ç©ºç±»å‹ã€‚å¦‚æœä½ è¿™æ ·åšï¼Œè¯¥å±æ€§çš„æ¯ä¸€æ¬¡è®¿é—®éƒ½éœ€è¦ null æ£€æŸ¥æˆ–è€… !! è¿ç®—ç¬¦ã€‚\n```\nclass MyService {\n    fun performAction() : String = \"foo\"\n}\n\nclass MyTest{\n    private var myService: MyService? = null \n    \n    @Before fun setUp(){\n        myService = MyService() \n    }\n    \n    \n    @Test fun testAction(){\n        //å¿…é¡»æ³¨æ„å¯ç©ºæ€§ï¼šè¦ä¹ˆ ç”¨!!ï¼Œ è¦ä¹ˆç”¨?.\n        Assert.assertEquals( \"foo\" ï¼Œ myService!!.performAction() ) \n    }\n}\n```\nè¿™æ®µä»£ç å¾ˆéš¾çœ‹ï¼Œå°¤å…¶æ˜¯ä½ è¦åå¤ä½¿ç”¨è¿™ä¸ªå±æ€§çš„æ—¶å€™ã€‚ \nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ ä½¿ç”¨ **lateinit** ä¿®é¥°ç¬¦æ¥å®Œæˆè¿™æ ·çš„å£°æ˜ã€‚\n```\nclass MyService {\n    fun performAction() : String = \"foo\"\n}\n\nclass MyTest{\n    //å£°æ˜ä¸€ä¸ªä¸éœ€è¦åˆå§‹åŒ– å™¨çš„éç©ºç±»å‹çš„å±æ€§\n    private lateinit var myService: MyService\n    \n    @Before fun setUp(){\n        myService = MyService() \n    }\n    \n    @Test fun testAction(){\n        //ä¸éœ€è¦ null æ£€æŸ¥ç›´æ¥è®¿é—®å±æ€§\n        Assert.assertEquals( \"foo\" ï¼Œ myService!!.performAction() ) \n    }\n}\n```\n*æ³¨æ„ï¼Œ å»¶è¿Ÿåˆå§‹åŒ–çš„å±æ€§éƒ½æ˜¯ varï¼Œå› ä¸ºéœ€è¦åœ¨æ„é€ æ–¹æ³•å¤–ä¿®æ”¹å®ƒçš„å€¼*\n\n### 8.\"Any\"å’Œ\"Any?\"ï¼šæ ¹ç±»å‹\n\n> å’Œ Object ä½œä¸º Java ç±»å±‚çº§ç»“æ„çš„æ ¹å·®ä¸å¤šï¼Œ **Any** ç±»å‹æ˜¯ Kotlin æ‰€æœ‰éç©ºç±»å‹çš„è¶…ç±»å‹ï¼ˆéç©ºç±»å‹çš„æ ¹ï¼‰ã€‚\n>\n> ä½†æ˜¯åœ¨ Java ä¸­ï¼Œ Object åªæ˜¯æ‰€æœ‰å¼•ç”¨ç±»å‹çš„è¶…ç±» å‹ï¼ˆå¼•ç”¨ç±»å‹çš„æ ¹ï¼‰ï¼Œè€ŒåŸºæœ¬æ•°æ®ç±»å‹å¹¶ä¸æ˜¯ç±»å±‚çº§ç»“æ„çš„ä¸€éƒ¨åˆ†ã€‚\n>\n> è¿™æ„å‘³ç€å½“ä½  éœ€è¦ Object çš„æ—¶å€™ï¼Œä¸å¾—ä¸ä½¿ç”¨åƒ java.lang.Integer è¿™æ ·çš„åŒ…è£…ç±»å‹æ¥è¡¨ç¤ºåŸºæœ¬æ•°æ®ç±»å‹çš„å€¼ã€‚ **è€Œåœ¨ Kotlin ä¸­ï¼Œ Any æ˜¯æ‰€æœ‰ç±»å‹çš„è¶…ç±»å‹ï¼ˆæ‰€æœ‰ç±»å‹çš„æ ¹ï¼‰**ï¼Œ åŒ…æ‹¬åƒ Int è¿™æ ·çš„åŸºæœ¬æ•°æ®ç±»å‹ã€‚ \n\nå’Œ Java ä¸€æ ·ï¼ŒæŠŠåŸºæœ¬æ•°æ®ç±»å‹çš„å€¼èµ‹ç»™ **Any** ç±»å‹çš„å˜é‡æ—¶ä¼šè‡ªåŠ¨è£…ç®±ï¼š\n\n```\nval answer: Any = 42 \n```\n*æ³¨æ„ **Any** æ˜¯éç©ºç±»å‹ï¼Œæ‰€ä»¥ **Any** ç±»å‹çš„å˜é‡ä¸å¯ä»¥æŒæœ‰ null å€¼*\n\n### 9.Unit ç±»å‹ ï¼š Kotlin çš„\"void\"\n\nKotlin ä¸­çš„ **Unit** ç±»å‹å®Œæˆäº† Java ä¸­çš„ void ä¸€æ ·çš„åŠŸèƒ½ã€‚å½“å‡½æ•°æ²¡ä»€ä¹ˆæœ‰æ„æ€çš„ç»“æœè¦è¿”å›æ—¶ï¼Œå®ƒå¯ä»¥ç”¨ä½œå‡½æ•°çš„è¿”å›ç±»å‹ï¼š\n```\nfun f () : Unit { . . . } \n```\nè¯­æ³•ä¸Šï¼Œè¿™å’Œå†™ä¸€ä¸ªå¸¦æœ‰ä»£ç å—ä½“ä½†ä¸å¸¦ç±»å‹å£°æ˜çš„å‡½æ•°æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼š\n\n```\nfun f () { .. }         //ç¼©å†™ç‰ˆ\n```\n> Unit æ˜¯ä¸€ä¸ªå®Œå¤‡çš„ç±»å‹ï¼Œå¯ä»¥ä½œä¸ºç±»å‹å‚æ•°ï¼Œè€Œ void å´ä¸è¡Œã€‚\n\nåœ¨å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œ Unit è¿™ä¸ªåå­—ä¹ æƒ¯ä¸Šè¢«ç”¨æ¥è¡¨ç¤ºâ€œåªæœ‰ä¸€ä¸ªå®ä¾‹â€ï¼Œè¿™æ­£æ˜¯ Kotlin çš„ Unit å’Œ Java çš„ void çš„åŒºåˆ«ã€‚\n\n### 10.Nothingç±»å‹ï¼šâ€œè¿™ä¸ªå‡½æ•°æ°¸ä¸è¿”å›â€\n\nå¯¹æŸäº› Kotlin å‡½æ•°æ¥è¯´ï¼Œ\"è¿”å›ç±»å‹\"çš„æ¦‚å¿µæ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œå› ä¸ºå®ƒä»¬ä»æ¥ä¸ä¼šæˆåŠŸåœ°ç»“æŸ\n,Kotlin ä½¿ç”¨ä¸€ç§ç‰¹æ®Šçš„è¿”å›ç±»å‹ Nothing æ¥è¡¨ç¤ºï¼š\n\n```\nfun fail(message: String): Nothing { \n    throw IllegalStateException (message)\n}\n\n>> fail (\"Error occurred\")\njava.lang.IllegalStateException: Error occurred \n```\nNothing ç±»å‹æ²¡æœ‰ä»»ä½•å€¼ï¼Œ åªæœ‰è¢«å½“ä½œå‡½æ•°è¿”å›å€¼ä½¿ç”¨ï¼Œæˆ–è€…è¢«å½“ä½œæ³›å‹å‡½æ•° è¿”å›å€¼çš„ç±»å‹å‚æ•°ä½¿ç”¨æ‰ä¼šæœ‰æ„ä¹‰ã€‚åœ¨å…¶ä»–æ‰€æœ‰æƒ…å†µä¸‹ï¼Œå£°æ˜ä¸€ä¸ªä¸èƒ½å­˜å‚¨ä»»ä½•å€¼ çš„å˜é‡æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚ \n\n\n### 11.å¯ç©ºæ€§å’Œé›†åˆ\n\néå†ä¸€ä¸ªåŒ…å«å¯ç©ºå€¼çš„é›†åˆå¹¶è¿‡æ»¤æ‰ null æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„æ“ä½œï¼Œå› æ­¤ Kotlin æä¾›äº†ä¸€ä¸ªæ ‡å‡†åº“å‡½æ•° **filterNotNull** æ¥å®Œæˆå®ƒã€‚ \n\n### 12.åªè¯»é›†åˆä¸å¯å˜é›†åˆ \n\nKotlin çš„é›†åˆè®¾è®¡å’Œ Java ä¸åŒçš„å¦ä¸€é¡¹é‡è¦ç‰¹è´¨æ˜¯ï¼Œå®ƒæŠŠè®¿é—®é›†åˆæ•°æ®çš„æ¥å£å’Œä¿®æ”¹é›†åˆæ•°æ®çš„æ¥å£åˆ†å¼€äº†ã€‚è¿™ç§åŒºåˆ«å­˜åœ¨äºæœ€åŸºç¡€çš„ä½¿ç”¨é›†åˆçš„æ¥å£ä¹‹ä¸­:kotlin.collections.Collectionã€‚\n\nä½¿ç”¨ kotlin.collections.MutableCollection æ¥å£å¯ä»¥ä¿®æ”¹é›†åˆä¸­çš„æ•°æ®ã€‚å®ƒç»§æ‰¿äº†æ™®é€šçš„ kotlin.collections.Collection æ¥å£,è¿˜æä¾›äº†æ–¹æ³•æ¥æ·»åŠ å’Œç§»é™¤å…ƒç´ ã€æ¸…ç©ºé›†åˆç­‰ã€‚ \n\nä¸€èˆ¬çš„è§„åˆ™æ˜¯åœ¨ä»£ç çš„ä»»ä½•åœ°æ–¹éƒ½åº”è¯¥ä½¿ç”¨åªè¯»æ¥å£ï¼Œåªåœ¨ä»£ç éœ€è¦ä¿®æ”¹é›†åˆçš„åœ°æ–¹ä½¿ç”¨å¯å˜æ¥å£çš„å˜ä½“\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"articleName":"Kotlinå­¦ä¹ ç¬”è®°ï¼ˆç¬¬äº”ç« ï¼‰","createTime":"2018-10-03T21:49:47.000","lastModifiedTime":"2020-02-03T10:40:55.000","tag":"Kotlin","summary":" 1.æˆå‘˜å¼•ç”¨\r\n\r\nKotlinå’ŒJava8ä¸€æ ·ï¼Œå¦‚æœæŠŠå‡½æ•°è½¬æ¢æˆä¸€ä¸ªå€¼ï¼Œä½ å°±å¯ä»¥ä¼ é€’å®ƒã€‚ ","imageAddress":"/img/kotlin_4.png","articleAddress":"/config/study/Kotlinå­¦ä¹ ç¬”è®°ï¼ˆç¬¬äº”ç« ï¼‰.md","articleContent":"---\ntitle: Kotlinç¬”è®°(å››):åŸºç¡€ç¯‡most plus\ndate: 2018-10-03 21:49:47\nindex_img: /img/kotlin_4.png\ntags: Kotlin\n---\n\n\n### 1.æˆå‘˜å¼•ç”¨\r\n\r\nKotlinå’ŒJava8ä¸€æ ·ï¼Œå¦‚æœæŠŠå‡½æ•°è½¬æ¢æˆä¸€ä¸ªå€¼ï¼Œä½ å°±å¯ä»¥ä¼ é€’å®ƒã€‚  \r\n> ä½¿ç”¨:: è¿ç®—ç¬¦æ¥è½¬æ¢ ï¼š\r\n\r\n```\r\nval getAge = Person::age \r\n```\r\nè¿™ç§è¡¨è¾¾å¼ç§°ä¸ºæˆå‘˜å¼•ç”¨ï¼Œå®ƒæä¾›äº†ç®€æ˜è¯­æ³•ï¼Œæ¥åˆ›å»ºä¸€ä¸ªè°ƒç”¨å•ä¸ªæ–¹æ³•æˆ–è€… è®¿é—®å•ä¸ªå±æ€§çš„å‡½æ•°å€¼ã€‚åŒå†’å·æŠŠç±»åç§°ä¸ä½ è¦å¼•ç”¨çš„æˆå‘˜ï¼ˆä¸€ä¸ªæ–¹æ³•æˆ–è€…ä¸€ä¸ªå±æ€§ï¼‰åç§°éš”å¼€\r\n\r\n### 2.é›†åˆçš„å‡½æ•°å¼API\r\n\r\n**filter** å‡½æ•°éå†é›†åˆå¹¶é€‰å‡ºåº”ç”¨ç»™å®š **lambda** åä¼šè¿”å› **true** çš„é‚£äº›å…ƒç´ ï¼š\r\n\r\n```\r\n>> val list= listOf(l, 2, 3, 4) \r\n>> println(list.filter{it % 2 == 0}) \r\n```\r\n\r\n**filter** å‡½æ•°å¯ä»¥ä»é›†åˆä¸­ç§»é™¤ä½ ä¸æƒ³è¦çš„å…ƒç´ ï¼Œä½†æ˜¯å®ƒå¹¶ä¸ä¼šæ”¹å˜è¿™äº›å…ƒç´ ã€‚ å…ƒç´ çš„å˜æ¢æ˜¯ **map** çš„ç”¨æ­¦ä¹‹åœ°ã€‚ \r\n\r\n**map** å‡½æ•°å¯¹é›†åˆä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ åº”ç”¨ç»™å®šçš„å‡½æ•°å¹¶æŠŠç»“æœæ”¶é›†åˆ°ä¸€ä¸ªæ–°é›†åˆã€‚å¯ä»¥æŠŠæ•°å­—åˆ—è¡¨å˜æ¢æˆå®ƒä»¬å¹³æ–¹çš„åˆ—è¡¨ï¼Œæ¯”å¦‚ï¼š\r\n\r\n```\r\n>> val list= listOf(l, 2, 3, 4) \r\n>> println(list.map { it * it }\r\n{1, 4, 9, 16}\r\n```\r\n\r\n### 3.\"all\"\"any\"\"count\"å’Œ\"find\"ï¼šå¯¹é›†åˆåº”ç”¨åˆ¤æ–­å¼\r\n\r\næ£€æŸ¥é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½ç¬¦åˆæŸä¸ªæ¡ä»¶ï¼ˆæˆ–è€…å®ƒçš„å˜ç§ï¼Œæ˜¯å¦å­˜åœ¨ç¬¦åˆçš„å…ƒç´ ï¼‰ã€‚Kotlinä¸­ï¼Œå®ƒä»¬æ˜¯é€šè¿‡ **all** å’Œ **any** å‡½æ•°è¡¨è¾¾çš„ã€‚ \r\n\r\n\r\n```\r\nval canBeinClub27 = { p: Person - > p.age <= 27 } \r\n```\r\n> å¦‚æœä½ å¯¹æ˜¯å¦æ‰€æœ‰å…ƒç´ éƒ½æ»¡è¶³åˆ¤æ–­å¼æ„Ÿå…´è¶£ï¼Œåº”è¯¥ä½¿ç”¨ **all** å‡½æ•°ï¼š\r\n\r\n```\r\n>> val people= listOf(Person (\"Alice\", 27), Person(\"Bob\", 31))\r\n>> println( people.all(canBeinClub27) ) \r\nfalse\r\n```\r\n> å¦‚æœä½ éœ€è¦æ£€æŸ¥é›†åˆä¸­æ˜¯å¦è‡³å°‘å­˜åœ¨ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ ï¼Œé‚£å°±ç”¨ **any** :\r\n\r\n```\r\n>> println(people any(canBeinClub27)) \r\ntrue \r\n```\r\n> å¦‚æœä½ æƒ³çŸ¥é“æœ‰å¤šå°‘ä¸ªå…ƒç´ æ»¡è¶³äº†åˆ¤æ–­å¼ï¼Œä½¿ç”¨ **count** : \r\n\r\n```\r\n>> val people= listOf(Person(\"Alice\", 27) , Person (\"Bob\", 31)) \r\n>> println(people.count(canBeinClub27))\r\n1\r\n```\r\n> è¦æ‰¾åˆ°ä¸€ä¸ªæ»¡è¶³åˆ¤æ–­å¼çš„å…ƒç´ ï¼Œä½¿ç”¨ **find** å‡½æ•° ï¼š\r\n\r\n```\r\n>> val people= listOf(Person(\"Alice\"ï¼Œ 27) , Person(\"Bob\", 31)) \r\n>> println(people.find(canBeinClub27)) \r\nPerson(name=Alice, age=27) \r\n```\r\n### 4.groupBy ï¼šæŠŠåˆ—è¡¨è½¬æ¢æˆåˆ†ç»„çš„ map\r\n\r\nå‡è®¾ä½ éœ€è¦æŠŠæ‰€æœ‰å…ƒç´ æŒ‰ç…§ä¸åŒçš„ç‰¹å¾åˆ’åˆ†æˆä¸åŒçš„åˆ†ç»„ã€‚ä¾‹å¦‚ï¼Œä½ æƒ³æŠŠäººæŒ‰å¹´é¾„åˆ†ç»„ï¼Œç›¸åŒå¹´é¾„çš„äººæ”¾åœ¨ä¸€ç»„ã€‚æŠŠè¿™ä¸ªç‰¹å¾ç›´æ¥å½“ä½œå‚æ•°ä¼ é€’ååˆ†æ–¹ä¾¿ã€‚**groupBy** å‡½æ•°å¯ä»¥å¸®ä½ åšåˆ°è¿™ä¸€ç‚¹ï¼š\r\n\r\n```\r\n>> val people= listOf(Person(\"Alice\", 31), Person(\"Bob\", 29), Person (\"Carol\", 31))\r\n>> println(people.groupBy {it.age})\r\n```\r\nè¿™æ¬¡æ“ä½œçš„ç»“æœæ˜¯ä¸€ä¸ª **map**ï¼Œæ˜¯å…ƒç´ åˆ†ç»„ä¾æ®çš„é”®ï¼ˆè¿™ä¸ªä¾‹å­ä¸­æ˜¯ageï¼‰å’Œå…ƒç´ åˆ†ç»„ï¼ˆpersonsï¼‰ä¹‹é—´çš„æ˜ å°„\r\n\r\n### 5.flatMap å’Œ flatten ï¼šå¤„ç†åµŒå¥—é›†åˆä¸­çš„å…ƒç´  \r\n\r\nå‡è®¾ä½ æœ‰ä¸€å †è—ä¹¦ï¼Œä½¿ç”¨ Book ç±»è¡¨ç¤º ï¼š\r\n\r\n```\r\nclass Book (val title: String, val authors: List<String>) \r\n```\r\næ¯æœ¬ä¹¦éƒ½å¯èƒ½æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªä½œè€…ï¼Œå¯ä»¥ç»Ÿè®¡å‡ºå›¾ä¹¦é¦†ä¸­çš„æ‰€æœ‰ä½œè€…çš„ set : \r\n\r\n```\r\nbooks.flatMap { it.authors } toSet() \r\n```\r\n**flatMap** å‡½æ•°åšäº†ä¸¤ä»¶äº‹æƒ…ï¼šé¦–å…ˆæ ¹æ®ä½œä¸ºå®å‚ç»™å®šçš„å‡½æ•°å¯¹é›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ åšå˜æ¢ï¼ˆæˆ–è€…è¯´æ˜ å°„ï¼‰ï¼Œç„¶åæŠŠå¤šä¸ªåˆ—è¡¨åˆå¹¶ï¼ˆæˆ–è€…è¯´å¹³é“ºï¼‰æˆä¸€ä¸ªåˆ—è¡¨ã€‚ \r\n\r\n> **æ³¨æ„ï¼Œå¦‚æœä½ ä¸éœ€è¦åšä»»ä½•å˜æ¢ï¼Œåªæ˜¯éœ€è¦å¹³é“ºä¸€ä¸ªé›†åˆï¼Œå¯ä»¥ä½¿ç”¨flattenå‡½æ•°ï¼šlistOfLists.flatten() ã€‚**\r\n\r\nKotlin æ ‡å‡†åº“å‚è€ƒæ–‡æ¡£æœ‰è¯´æ˜ï¼Œ**filter** å’Œ **map** éƒ½ä¼šè¿”å›ä¸€ä¸ªåˆ—è¡¨ã€‚è¿™æ„å‘³ç€å…ƒç´ è¿‡å¤šçš„æ—¶å€™ï¼Œï¼ˆé“¾å¼ï¼‰è°ƒç”¨å°±ä¼šå˜å¾—ååˆ†ä½æ•ˆã€‚ä¸ºäº†æé«˜æ•ˆç‡ï¼Œå¯ä»¥æŠŠæ“ä½œå˜æˆä½¿ç”¨åºåˆ—ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨é›†åˆï¼Œä¸‹é¢æ˜¯å¯¹æ¯”çš„ä¾‹å­\r\n\r\n\r\n```\r\npeople.map(Person: :name) .filter { it.startsWith(\"A\")ï½\r\n```\r\nè½¬åŒ–ä¸ºï¼š\r\n```\r\npeople.asSequence()\r\n    .map (Person: : name)\r\n    .filter{it.startsWith(\"A\")}\r\n    .tolist\r\n```\r\nKotlinæƒ°æ€§é›†åˆæ“ä½œçš„å…¥å£å°±æ˜¯ **Sequence** æ¥å£ã€‚è¿™ä¸ªæ¥å£è¡¨ç¤ºçš„å°±æ˜¯ä¸€ä¸ªå¯ä»¥é€ä¸ªåˆ—ä¸¾å…ƒç´ çš„å…ƒç´ åºåˆ—ã€‚ \r\n\r\nå¯ä»¥è°ƒç”¨æ‰©å±•å‡½æ•° **asSequence** æŠŠä»»æ„é›†åˆè½¬æ¢æˆåºåˆ—ï¼Œè°ƒç”¨  **toList** æ¥åšåå‘çš„è½¬æ¢ã€‚ \r\n\r\n\r\n### 6.ä½¿ç”¨Javaå‡½æ•°å¼æ¥å£\r\n\r\n **OnClickListener** æ¥å£åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ã€‚è¿™ç§æ¥å£è¢«ç§°ä¸º **å‡½æ•°å¼æ¥å£**ï¼Œæˆ–è€… **SAMæ¥å£**ï¼Œ**SAM** ä»£è¡¨æŠ½è±¡æ–¹æ³•ã€‚JavaAPIä¸­éšå¤„å¯è§åƒ**Runnable**å’Œ**Callable**è¿™æ ·çš„å‡½æ•°å¼æ¥å£ï¼Œä»¥åŠæ”¯æŒå®ƒä»¬\r\n çš„æ–¹æ³•ã€‚ Kotlin å…è®¸ä½ åœ¨è°ƒç”¨æ¥æ”¶å‡½æ•°å¼æ¥å£ä½œä¸ºå‚æ•°çš„æ–¹æ³•æ—¶ä½¿ç”¨ **lambda**ï¼Œæ¥ä¿è¯ä½ çš„ Kotlinä»£ç æ—¢æ•´æ´åˆç¬¦åˆä¹ æƒ¯ã€‚\r\n\r\nå¯ä»¥æŠŠ **lambda** ä¼ ç»™ä»»ä½•æœŸæœ›å‡½æ•°å¼æ¥å£çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒæœ‰ä¸€ä¸ª **Runnable** ç±»å‹çš„å‚æ•°ï¼š\r\n\r\n```\r\n/* Java */ \r\nvoid postponeComputation(int delay, Runnable computation); \r\n```\r\nä¸‹é¢æ˜¯æ˜¾å¼åœ°åˆ›å»ºä¸€ä¸ªå®ç°äº† **Runnable** çš„åŒ¿åå¯¹è±¡çš„ä¾‹å­ï¼š\r\n\r\n```\r\npost postponeComputation(1OOO, object : Runnable { \r\n    override fun run() {\r\n    println(42) \r\n    }\r\n)}\r\n```\r\n\r\n\r\nåœ¨ Kotlin ä¸­ï¼Œå¯ä»¥è°ƒç”¨å®ƒå¹¶æŠŠä¸€ä¸ª **lambda** ä½œä¸ºå®å‚ä¼ ç»™å®ƒã€‚ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æŠŠå®ƒè½¬æ¢æˆä¸€ä¸ª **Runnable** çš„å®ä¾‹ï¼š\r\n\r\n```\r\npostponeComputation(lOOO) { println(42) }\r\n```\r\nå®Œå…¨ç­‰ä»·çš„å®ç°åº”è¯¥æ˜¯ä¸‹é¢è¿™æ®µä»£ç ä¸­çš„æ˜¾å¼**object**å£°æ˜ï¼Œå®ƒæŠŠ**Runnable**å®ä¾‹å­˜å‚¨åœ¨ä¸€ä¸ªå˜é‡ä¸­ï¼Œå¹¶ä¸”æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™éƒ½ä½¿ç”¨è¿™ä¸ªå˜é‡ï¼š\r\n\r\n```\r\nval runnable = Runnable { println(42) } \r\nfun handleComputation(){ postponeComputation(1OOO, runnable)} \r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"},{"articleName":"Kotlinå­¦ä¹ ç¬”è®°ï¼ˆç¬¬å››ç« ï¼‰","createTime":"2018-10-02T21:49:47.000","lastModifiedTime":"2020-02-03T10:40:11.000","tag":"Kotlin","summary":" 1.æ¥å£çš„é»˜è®¤å®ç°\n\næ¥å£çš„æ–¹æ³•å¯ä»¥æœ‰ä¸€ä¸ªé»˜è®¤å®ç°ã€‚ä¸Java8ä¸åŒçš„æ˜¯ï¼ŒJava8ä¸­éœ€è¦ä½ ","imageAddress":"/img/kotlin_3.png","articleAddress":"/config/study/Kotlinå­¦ä¹ ç¬”è®°ï¼ˆç¬¬å››ç« ï¼‰.md","articleContent":"---\ntitle: Kotlinç¬”è®°(ä¸‰):åŸºç¡€ç¯‡more plus\ndate: 2018-10-02 21:49:47\nindex_img: /img/kotlin_3.png\ntags: Kotlin\n---\n\n### 1.æ¥å£çš„é»˜è®¤å®ç°\n\næ¥å£çš„æ–¹æ³•å¯ä»¥æœ‰ä¸€ä¸ªé»˜è®¤å®ç°ã€‚ä¸Java8ä¸åŒçš„æ˜¯ï¼ŒJava8ä¸­éœ€è¦ä½ åœ¨è¿™æ ·çš„å®ç°ä¸Šæ ‡æ³¨defaultå…³é”®å­—ï¼Œå¯¹äºè¿™æ ·çš„æ–¹æ³•ï¼ŒKotlinæ²¡æœ‰ç‰¹æ®Šçš„æ³¨è§£ ï¼šåªéœ€è¦æä¾›ä¸€ä¸ªæ–¹æ³•ä½“\n\n```\ninterface Clickable{\n    fun click()\n    fun showOff = println(\"I'm clickable\")\n}\n```\nåœ¨å®ç°æ¥å£çš„åœ°æ–¹å¦‚æœè¦æ˜¾å¼åœ°å®ç°æ–¹æ³•ï¼Œåœ¨Kotlinä¸­éœ€è¦æŠŠ åŸºç±»çš„åå­—æ”¾åœ¨å°–æ‹¬å·ä¸­ ï¼š\n```\nsuper<Clickable>.showOff() \n```\n<!--more--> \n### 2.å®šä¹‰ç±»çš„ç»§æ‰¿ç»“æ„\n\n    Javaçš„ç±»å’Œæ–¹æ³•é»˜è®¤æ˜¯opençš„ï¼Œè€ŒKotlinä¸­é»˜è®¤éƒ½æ˜¯finalçš„ã€‚ \n\nå¦‚æœä½ æƒ³å…è®¸åˆ›å»ºä¸€ä¸ªç±»çš„å­ç±»ï¼Œéœ€è¦ä½¿ç”¨ **open** ä¿®é¥°ç¬¦æ¥æ ‡ç¤ºè¿™ä¸ªç±»ã€‚æ­¤å¤–ï¼Œéœ€è¦ç»™æ¯ä¸€ä¸ªå¯ä»¥è¢«é‡å†™çš„å±æ€§æˆ–æ–¹æ³•æ·»åŠ openä¿®é¥°ç¬¦ã€‚\n\n> *æ³¨æ„ï¼Œå¦‚æœä½ é‡å†™äº†ä¸€ä¸ªåŸºç±»æˆ–è€…æ¥å£çš„æˆå‘˜ï¼Œé‡å†™äº†çš„æˆå‘˜åŒæ ·é»˜è®¤æ˜¯ opençš„ã€‚å¦‚æœä½ æƒ³æ”¹å˜è¿™ä¸€è¡Œä¸ºï¼Œé˜»æ­¢ä½ çš„ç±»çš„å­ç±»é‡å†™ä½ çš„å®ç°ï¼Œå¯ä»¥æ˜¾å¼åœ°å°†é‡å†™çš„æˆå‘˜æ ‡æ³¨ä¸º **final** ã€‚*\n\n\n\n### 3.åµŒå¥—ç±»ä¸å†…éƒ¨ç±»\n\nKotlinä¸­æ²¡æœ‰æ˜¾å¼ä¿®é¥°ç¬¦çš„åµŒå¥—ç±»ä¸Javaä¸­çš„staticåµŒå¥—ç±»æ˜¯ä¸€æ ·çš„ã€‚è¦æŠŠå®ƒå˜æˆä¸€ä¸ªå†…éƒ¨ç±»æ¥æŒæœ‰ä¸€ä¸ªå¤–éƒ¨ç±»çš„å¼•ç”¨çš„è¯éœ€è¦ä½¿ç”¨ **inner** ä¿®é¥°ç¬¦ã€‚\n\nåœ¨Kotlinä¸­å¼•ç”¨å¤–éƒ¨ç±»å®ä¾‹çš„è¯­æ³•ä¹Ÿä¸Javaä¸åŒã€‚éœ€è¦ä½¿ç”¨ **this@Outer** ä» **Inner** ç±»å»è®¿é—® **Outer** ç±»ï¼š\n\n\n```\nclass Outer{\n    inner class Inner{\n        fun getOuterReference() : Outer = this@Outer\n    }\n}\n```\n\n\n### 4.å¯†å°ç±»ï¼šå®šä¹‰å—é™çš„ç±»ç»§æ‰¿ç»“æ„\n\nä¸ºçˆ¶ç±»æ·»åŠ ä¸€ä¸ª **sealed** ä¿®é¥°ç¬¦ï¼Œå¯¹å¯èƒ½åˆ›å»ºçš„å­ç±»åšå‡ºä¸¥æ ¼çš„é™åˆ¶ã€‚\n\nå¦‚æœä½ åœ¨ when è¡¨è¾¾å¼ä¸­å¤„ç†æ‰€æœ‰ **sealed** ç±»çš„å­ç±»ï¼Œä½ å°±ä¸å†éœ€è¦æä¾›é»˜è®¤åˆ†æ”¯ã€‚æ³¨æ„ï¼Œ **sealed** ä¿®é¥°ç¬¦éšå«çš„è¿™ä¸ªç±»æ˜¯ä¸€ä¸ª **open** ç±»ï¼Œ ä½ ä¸å†éœ€è¦æ˜¾å¼åœ°æ·»åŠ  **open** ä¿®é¥°ç¬¦ã€‚\n\n\n### 5.å£°æ˜ä¸€ä¸ªå¸¦éé»˜è®¤æ„é€ æ–¹æ³•æˆ–å±æ€§çš„ç±»\n\nä¸¾ä¸ªæ —å­ï¼š\n\n```\nclass User constructor(_nickname: String) {\n    val nickname : String\n    \n    init{\n        nickname = _nickname\n    }\n}\n```\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªæ–°çš„Kotlinå…³é”®å®‡ï¼š**constructor** å’Œ **init** ã€‚ **constructor** å…³é”®å­—ç”¨æ¥å¼€å§‹ä¸€ä¸ªä¸»æ„é€ æ–¹æ³•æˆ–ä»æ„é€ æ–¹æ³•çš„å£°æ˜ã€‚ **init** å…³é”®å­—ç”¨æ¥å¼•å…¥ä¸€ä¸ªåˆå§‹åŒ–è¯­å¥å—ã€‚è¿™ç§è¯­å¥å—åŒ…å«äº†åœ¨ç±»è¢«åˆ›å»ºæ—¶æ‰§è¡Œçš„ä»£ç ï¼Œ å¹¶ä¼šä¸ä¸»æ„é€ æ–¹æ³•ä¸€èµ·ä½¿ç”¨ã€‚\n\n> å¦‚æœä½ æƒ³è¦ç¡®ä¿ä½ çš„ç±»ä¸è¢«å…¶ä»–ä»£ç å®ä¾‹åŒ–ï¼Œå¿…é¡»æŠŠæ„é€ æ–¹æ³•æ ‡è®°ä¸º privateï¼š\n\n```\nclass Secretive private constructor() {}\n//ä¸€èˆ¬è¿™ä¹ˆåšè¡¨ç¤ºè¿™ä¸ªç±»æ˜¯ä¸€ä¸ªé™æ€å®ç”¨å·¥å…·æˆå‘˜çš„å®¹å™¨æˆ–è€…æ˜¯å•ä¾‹çš„\n```\n\n### 6.é€šè¿‡ getter æˆ– setter è®¿é—®æ”¯æŒå­—æ®µ\n\nå‡è®¾ä½ æƒ³åœ¨ä»»ä½•å¯¹å­˜å‚¨åœ¨å±æ€§ä¸­çš„æ•°æ®è¿›è¡Œä¿®æ”¹æ—¶è¾“å‡ºæ—¥å¿—ï¼Œä½ å£°æ˜äº†ä¸€ä¸ªå¯å˜å±æ€§å¹¶ä¸”åœ¨æ¯æ¬¡ setter è®¿é—®æ—¶æ‰§è¡Œé¢å¤–çš„ä»£ç ã€‚\n\n```\nclass Â·user (val name: String) { \n    var address: String =\"unspecified\" \n        set(value: String) { \n            println (â€â€â€œ A Address was changed for $name:\n            \"$field\" -> \"value\".\"\"\"\".trimIndent())\n            field = value\n        }\n    }\n```\nå¯ä»¥åƒå¹³å¸¸ä¸€æ ·é€šè¿‡ä½¿ç”¨ user.address ï¼ \"new value\"ï¼Œ æ¥ä¿®æ”¹ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œè¿™å…¶å®åœ¨åº•å±‚è°ƒç”¨äº† setterã€‚\n\n\nåœ¨ setter çš„å‡½æ•°ä½“ä¸­ï¼Œä½¿ç”¨äº†ç‰¹æ®Šçš„æ ‡è¯†ç¬¦ **field** æ¥è®¿é—®æ”¯æŒå­—æ®µçš„å€¼ã€‚\n\nå¦‚æœä½ æƒ³ä¿®æ”¹è®¿é—®å™¨çš„å¯è§æ€§ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·ï¼š\n\n```\nclass LengthCounter {\n    var counter: Int = 0 \n    private set     //è¿™ä¸‹å°±ä¸èƒ½åœ¨ç±»å¤–éƒ¨ä¿®æ”¹è¿™ä¸ªå±æ€§äº†\n    \n    fun addWord(word: String){\n        counter += word.length\n    }\n}\n```\n\n### 7.æ•°æ®ç±»ï¼šè‡ªåŠ¨ç”Ÿæˆé€šç”¨æ–¹æ³•çš„å®ç° \n\nå¦‚æœæƒ³è¦ä½ çš„ç±»æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„æ•°æ®å®¹å™¨ï¼Œä½ éœ€è¦é‡å†™è¿™äº›æ–¹æ³• ï¼š **toString**ã€ **equals** å’Œ **hashCode** ã€‚åœ¨Kotlinä¸­ä½ ä¸å¿…å†å»ç”Ÿæˆè¿™äº›æ–¹æ³•äº† ã€‚å¦‚æœä¸ºä½ çš„ç±»æ·»åŠ  **data** ä¿®é¥°ç¬¦ï¼Œå¿…è¦çš„æ–¹æ³•å°†ä¼šè‡ªåŠ¨ç”Ÿæˆå¥½ã€‚\n\næ¯”å¦‚ï¼š\n```\ndata class Client(val name: String, val postalCode: Int)\n```\n\n### 8.æ•°æ®ç±»å’Œä¸å¯å˜æ€§ï¼š copy()æ–¹æ³•\n\nä¸ºäº†è®©ä½¿ç”¨ä¸å¯å˜å¯¹è±¡çš„æ•°æ®ç±»å˜å¾—æ›´å®¹æ˜“ï¼ŒKotlinç¼–è¯‘å™¨ä¸ºå®ƒä»¬å¤šç”Ÿæˆäº†ä¸€ä¸ªæ–¹æ³•ï¼šä¸€ä¸ªå…è®¸ **copy** ç±»çš„å®ä¾‹çš„æ–¹æ³•ï¼Œå¹¶åœ¨ **copy** çš„åŒæ—¶ä¿®æ”¹æŸäº›å±æ€§çš„å€¼:\n\n\n```\nclass Client (val name: String, val postalCode: Int) {\n    fun copy(name: String = this.name, postalCode: Int = \n    this.postalCode) = Client(name, postalCode)\n}\n\n\n//ä½¿ç”¨\n>>> val bob = Client(\"Bobâ€, 973293) \n>>> println(bob.copy(postalCode = 382555)) \n```\n\n### 9.ç±»å§”æ‰˜ï¼šä½¿ç”¨â€œbyâ€å…³é”®å­—\n(è£…é¥°æ¨¡å¼æˆ‘è¿˜ä¸æ˜¯å¤ªäº†è§£ï¼Œäº†è§£ä»¥åå†è®°å½•)\n\n### 10.å¯¹è±¡å£°æ˜ï¼šåˆ›å»ºå•ä¾‹æ˜“å¦‚åæŒ\n\nåœ¨é¢å‘å¯¹è±¡ç³»ç»Ÿè®¾è®¡ä¸­ä¸€ä¸ªç›¸å½“å¸¸è§çš„æƒ…å½¢å°±æ˜¯åªéœ€è¦ä¸€ä¸ªå®ä¾‹çš„ç±»ã€‚åœ¨Javaä¸­ï¼Œè¿™é€šå¸¸é€šè¿‡å•ä¾‹æ¨¡å¼æ¥å®ç° \n\nKotlin é€šè¿‡ä½¿ç”¨å¯¹è±¡å£°æ˜åŠŸèƒ½ä¸ºè¿™ä¸€åˆ‡æä¾›äº†æœ€é«˜çº§çš„è¯­è¨€æ”¯æŒã€‚å¯¹è±¡å£°æ˜å°†ç±»å£°æ˜ä¸è¯¥ç±»çš„å•ä¸€å®ä¾‹å£°æ˜ç»“åˆåˆ°äº†ä¸€èµ·ã€‚ \n\n\n```\nobject Payroll { \n    val allErnployees = arrayListOf<Person>()\n\n    fun calculateSalary() { \n        for {person in allErnployees) { \n        ...\n        }\n    }\n}\n```\n> å¯¹è±¡å£°æ˜é€šè¿‡objectå…³é”®å®‡å¼•å…¥ã€‚ä¸€ä¸ªå¯¹è±¡å£°æ˜å¯ä»¥éå¸¸é«˜æ•ˆåœ°ä»¥ä¸€å¥è¯æ¥å®šä¹‰ä¸€ä¸ªç±»å’Œä¸€ä¸ªè¯¥ç±»çš„å˜é‡ã€‚ \n\n### 11.ä¼´ç”Ÿå¯¹è±¡ï¼šå·¥å‚æ–¹æ³•å’Œé™æ€æˆå‘˜çš„åœ°ç›˜\n\nåœ¨ç±»ä¸­å®šä¹‰çš„å¯¹è±¡ä¹‹ä¸€å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„å…³é”®å­—æ¥æ ‡è®°ï¼š**companion**ã€‚å¦‚æœè¿™æ ·åšï¼Œå°±è·å¾—äº†ç›´æ¥é€šè¿‡å®¹å™¨ç±»åç§°æ¥è®¿é—®è¿™ä¸ªå¯¹è±¡çš„æ–¹æ³•å’Œå±æ€§çš„èƒ½åŠ›ï¼Œä¸å†éœ€è¦æ˜¾å¼åœ°æŒ‡æ˜å¯¹è±¡çš„åç§°ã€‚æœ€ç»ˆçš„è¯­æ³•çœ‹èµ·æ¥éå¸¸åƒ Java ä¸­çš„é™æ€æ–¹æ³•è°ƒç”¨ã€‚\n\n```\nclass A { \n    companion object { \n        fun bar() { \n        println (\"Companion object called\") \n        }\n    }\n}\n\n\n\n>> A.bar() \nCompanion object called\n```\n\n\nä¼´ç”Ÿå¯¹è±¡å¯ä»¥è®¿é—®ç±»ä¸­çš„æ‰€æœ‰privateæˆå‘˜ï¼ŒåŒ…æ‹¬privateæ„é€ æ–¹æ³•ï¼Œå®ƒæ˜¯å®ç°å·¥å‚æ¨¡å¼çš„ç†æƒ³é€‰æ‹©ã€‚ \n\n```\nclass User private constructor(val nickname: String) {\n    companion object {\n        fun newSubscribingUser(email: String) =\n        User(email.substringBefore ('@')) \n        \n        fun newFacebookUser(accountld: Int) = \n        User(getFacebookName(accountld)) \n    }\n}\n\n\n>> val subscribingUser = User.newSubscribingUser (\"bob@gmail.com\") \n>> val facebookUser = User.newFacebookUser(4) \n>> println(subscribingUser.nickname)\nbob\n```\n\n### å°ç»“ï¼š\n\n\n- Kotlin çš„æ¥å£ä¸ Java çš„ç›¸ä¼¼ï¼Œä½†æ˜¯å¯ä»¥åŒ…å«é»˜è®¤å®ç° (Java ä»ç¬¬8ç‰ˆæ‰å¼€å§‹æ”¯æŒ)å’Œå±æ€§ã€‚\n- æ‰€æœ‰çš„å£°æ˜é»˜è®¤éƒ½æ˜¯ final å’Œ public çš„ã€‚\n- è¦æƒ³ä½¿å£°æ˜ä¸æ˜¯ final çš„ï¼Œå°†å…¶æ ‡è®°ä¸º openã€‚\n- internal å£°æ˜åœ¨åŒä¸€æ¨¡å—ä¸­å¯è§ã€‚\n- åµŒå¥—ç±»é»˜è®¤ä¸æ˜¯å†…éƒ¨ç±»ã€‚ä½¿ç”¨innerå…³é”®å­—æ¥å­˜å‚¨å¤–éƒ¨ç±»çš„å¼•ç”¨ã€‚\n- sealed ç±»çš„å­ç±»åªèƒ½åµŒå¥—åœ¨è‡ªèº«çš„å£°æ˜ä¸­ï¼ˆKotlin 1.1 å…è®¸å°†å­ç±»æ”¾ç½®åœ¨åŒä¸€æ–‡ä»¶çš„ä»»æ„åœ°æ–¹ï¼‰ã€‚\n- åˆå§‹åŒ–è¯­å¥å—å’Œä»æ„é€ æ–¹æ³•ä¸ºåˆå§‹åŒ–ç±»å®ä¾‹æä¾›äº†çµæ´»æ€§ã€‚ \n- ä½¿ç”¨ field æ ‡è¯†ç¬¦åœ¨è®¿é—®å™¨æ–¹æ³•ä½“ä¸­å¼•ç”¨å±æ€§çš„æ”¯æŒå­—æ®µã€‚\n- æ•°æ®ç±»æä¾›äº†ç¼–è¯‘å™¨ç”Ÿæˆçš„ equalsã€ hashCodeã€ toStringã€ copy å’Œå…¶ä»–æ–¹æ³•ã€‚ \n- ç±»å§”æ‰˜å¸®åŠ©é¿å…åœ¨ä»£ç ä¸­å‡ºç°è®¸å¤šç›¸ä¼¼çš„å§”æ‰˜æ–¹æ³•ã€‚ \n- å¯¹è±¡å£°æ˜æ˜¯ Kotlin ä¸­å®šä¹‰å•ä¾‹ç±»çš„æ–¹æ³•ã€‚\n- ä¼´ç”Ÿå¯¹è±¡ï¼ˆä¸åŒ…çº§åˆ«å‡½æ•°å’Œå±æ€§ä¸€èµ·ï¼‰æ›¿ä»£äº†Javaé™æ€æ–¹æ³•å’Œå­—æ®µå®šä¹‰ã€‚ \n- ä¼´ç”Ÿå¯¹è±¡ä¸å…¶ä»–å¯¹è±¡ä¸€æ ·ï¼Œå¯ä»¥å®ç°æ¥å£ï¼Œä¹Ÿå¯ä»¥æ‹¥æœ‰æœ‰æ‰©å±•å‡½æ•°å’Œå±æ€§ã€‚\n- å¯¹è±¡è¡¨è¾¾å¼æ˜¯ Kotlinä¸­é’ˆå¯¹JavaåŒ¿åå†…éƒ¨ç±»çš„æ›¿ä»£å“ï¼Œå¹¶å¢åŠ äº†è¯¸å¦‚å®ç°å¤šä¸ªæ¥å£çš„èƒ½åŠ›å’Œä¿®æ”¹åœ¨åˆ›å»ºå¯¹è±¡çš„ä½œç”¨åŸŸä¸­å®šä¹‰çš„å˜é‡çš„èƒ½åŠ›ç­‰åŠŸèƒ½ã€‚"},{"articleName":"Kotlinå­¦ä¹ ç¬”è®°ï¼ˆç¬¬ä¸‰ç« ï¼‰","createTime":"2018-10-01T21:49:47.000","lastModifiedTime":"2020-02-03T10:39:49.000","tag":"Kotlin","summary":" 1.é¡¶å±‚å‡½æ•°å’Œå±æ€§\n\nåœ¨Kotlinä¸­ï¼Œå¯ä»¥æŠŠé‚£äº›å·¥å…·ç±»é‡Œçš„å‡½æ•°ç›´æ¥æ”¾åˆ°ä»£ç æ–‡ä»¶çš„é¡¶å±‚ï¼Œä¸ç”¨","imageAddress":"/img/kotlin_2.png","articleAddress":"/config/study/Kotlinå­¦ä¹ ç¬”è®°ï¼ˆç¬¬ä¸‰ç« ï¼‰.md","articleContent":"---\ntitle: Kotlinç¬”è®°(äºŒ):åŸºç¡€ç¯‡plus\ndate: 2018-10-01 21:49:47\nindex_img: /img/kotlin_2.png\ntags: Kotlin\n---\n\n### 1.é¡¶å±‚å‡½æ•°å’Œå±æ€§\n\nåœ¨Kotlinä¸­ï¼Œå¯ä»¥æŠŠé‚£äº›å·¥å…·ç±»é‡Œçš„å‡½æ•°ç›´æ¥æ”¾åˆ°ä»£ç æ–‡ä»¶çš„é¡¶å±‚ï¼Œä¸ç”¨ä»å±äºä»»ä½•çš„ç±»ã€‚è¿™äº›æ”¾åœ¨æ–‡ä»¶é¡¶å±‚çš„å‡½æ•°ä¾ç„¶æ˜¯åŒ…å†…çš„æˆå‘˜ï¼Œå¦‚æœä½ éœ€è¦ä»åŒ…å¤–è®¿é—®å®ƒï¼Œåˆ™éœ€è¦importï¼Œä½†ä¸å†éœ€è¦é¢å¤–åŒ…ä¸€å±‚\n\n\n### 2.ç»™åˆ«äººçš„ç±»æ·»åŠ æ–¹æ³•ï¼šæ‰©å±•å‡½æ•°å’Œå±æ€§\n\næ‰©å±•å‡½æ•°éå¸¸ç®€å•ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªç±»çš„æˆå‘˜å‡½æ•°ï¼Œä¸è¿‡å®šä¹‰åœ¨ç±»çš„å¤–é¢ã€‚ä¸¾ä¸ªä¾‹å­ï¼š\n\n```\npackage strings \nfun String.lastChar(): Char = this.get(this.length - 1) //thiså¯ä»¥çœç•¥\n```\nä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œä½ å·²ç»ä¸ºStringç±»æ·»åŠ äº†è‡ªå·±çš„æ–¹æ³•ã€‚å³ä½¿å­—ç¬¦ä¸²ä¸æ˜¯ä»£ç çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿæ²¡æœ‰ç±»çš„æºä»£ç ï¼Œä½ ä»ç„¶å¯ä»¥åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­æ ¹æ®éœ€è¦å»æ‰©å±•æ–¹æ³•ã€‚\n\n> æ³¨æ„ï¼Œæ‰©å±•å‡½æ•°å¹¶ä¸å…è®¸ä½ æ‰“ç ´å®ƒçš„å°è£…æ€§ã€‚å’Œåœ¨ç±»å†…éƒ¨å®šä¹‰çš„æ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œæ‰©å±•å‡½æ•°ä¸èƒ½è®¿ç§æœ‰çš„æˆ–è€…æ˜¯å—ä¿æŠ¤çš„æˆå‘˜ã€‚ \n>    \n> å¯¹äºä½ å®šä¹‰çš„ä¸€ä¸ªæ‰©å±•å‡½æ•°ï¼Œå®ƒä¸ä¼šè‡ªåŠ¨åœ°åœ¨æ•´ä¸ªç›®èŒƒå›´å†…ç”Ÿæ•ˆã€‚ç›¸åï¼Œå¦‚æœä½ è¦ä½¿ç”¨å®ƒï¼Œéœ€è¦è¿›è¡Œå¯¼å…¥\n>      \n> æ‰©å±•å‡½æ•°å¹¶ä¸å­˜åœ¨é‡å†™ï¼Œå› ä¸ºKotiinä¼šæŠŠå®ƒä»¬å½“ä½œé™æ€å‡½æ•°å¯¹å¾…\n\n\nä¸‹é¢æ˜¯å£°æ˜ä¸€ä¸ªæ‰©å±•å±æ€§ï¼š\n\n```\nval String.lastChar: Char get() = get(length - 1) \n```\n\nå¯ä»¥çœ‹åˆ°ï¼Œå’Œæ‰©å±•å‡½æ•°ä¸€æ ·ï¼Œæ‰©å±•å±æ€§ä¹Ÿåƒæ¥æ”¶è€…çš„ä¸€ä¸ªæ™®é€šçš„æˆå‘˜å±æ€§ä¸€æ ·ã€‚è¿™é‡Œï¼Œå¿…é¡»å®šä¹‰getterå‡½æ•°ï¼Œå› ä¸ºæ²¡æœ‰æ”¯æŒå­—æ®µï¼Œå› æ­¤æ²¡æœ‰é»˜è®¤getterçš„å®ç°ã€‚åŒç†ï¼Œåˆå§‹åŒ–ä¹Ÿä¸å¯ä»¥ï¼šå› ä¸ºæ²¡æœ‰åœ°æ–¹å­˜å‚¨åˆå§‹å€¼ã€‚\n\n    æ³¨æ„ï¼Œå½“ä½ éœ€è¦ä»Javaä¸­è®¿é—®æ‰©å±•å±æ€§çš„æ—¶å€™ï¼Œåº”è¯¥æ˜¾å¼åœ°è°ƒç”¨å®ƒçš„getterå‡½æ•°\n    \n    \n### 3.å¯å˜å‚æ•°ï¼šè®©å‡½æ•°æ”¯æŒä»»æ„æ•°é‡çš„å‚æ•°\n\nå½“ä½ åœ¨è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ¥åˆ›å»ºåˆ—è¡¨çš„æ—¶å€™ï¼Œå¯ä»¥ä¼ é€’ä»»æ„ä¸ªæ•°çš„å‚æ•°ç»™å®ƒï¼š\n\n```\nval list= list0f(2, 3, 5, 7, 11) \n```\nKotlinçš„å¯å˜å‚æ•°ä¸Javaç±»ä¼¼ï¼Œä½†è¯­æ³•ç•¥æœ‰ä¸åŒï¼šKotlinåœ¨è¯¥ç±»å‹ä¹‹åä¸ä¼šå†ä½¿ç”¨ä¸‰ä¸ªç‚¹ï¼Œè€Œæ˜¯åœ¨å‚æ•°ä¸Šä½¿ç”¨varargä¿®é¥°ç¬¦ã€‚\n\nKotlinå’ŒJava ä¹‹é—´çš„å¦ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œå½“éœ€è¦ä¼ é€’çš„å‚æ•°å·±ç»åŒ…è£…åœ¨æ•°ç»„ä¸­æ—¶ï¼Œè°ƒç”¨è¯¥å‡½æ•°çš„è¯­æ³•ã€‚åœ¨Javaä¸­ï¼Œå¯ä»¥æŒ‰åŸæ ·ä¼ é€’æ•°ç»„ï¼Œè€ŒKotlin åˆ™è¦æ±‚ä½ æ˜¾å¼åœ°è§£åŒ…æ•°ç»„ï¼Œä»¥ä¾¿æ¯ä¸ªæ•°ç»„å…ƒç´ åœ¨å‡½æ•°ä¸­èƒ½ä½œä¸ºå•ç‹¬çš„å‚æ•°æ¥è°ƒç”¨ã€‚ä»æŠ€æœ¯çš„è§’åº¦æ¥è®²ï¼Œè¿™ä¸ªåŠŸèƒ½è¢«ç§°ä¸ºå±•å¼€è¿ç®—ç¬¦ï¼Œè€Œä½¿ç”¨çš„æ—¶å€™ï¼Œä¸è¿‡æ˜¯åœ¨å¯¹åº”çš„å‚æ•°å‰é¢æ”¾ä¸€ä¸ª*ï¼š\n\n```\nfun main(args: Array<String>ï¼‰{\nval list = listOf(\"args:â€,*args) \nprintln(list) \n}\n\n```\n\n\n### 4.é”®å€¼å¯¹çš„å¤„ç†ï¼šä¸­ç¼€è°ƒç”¨å’Œè§£æ„å£°æ˜\n\nå¯ä»¥ä½¿ç”¨ mapOf å‡½æ•°æ¥åˆ›å»º map:\n\n```\nval map= mapOf(l to \"one\"ï¼Œ 7 to \"seven\"ï¼Œ 53 to \"fifty-three\")\n```\nè¿™è¡Œä»£ç ä¸­çš„å•è¯toä¸æ˜¯å†…ç½®çš„ç»“æ„ï¼Œè€Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°è°ƒç”¨ï¼Œè¢«ç§°ä¸ºä¸­ç¼€è°ƒç”¨ã€‚ \n\nåœ¨ä¸­ç¼€è°ƒç”¨ä¸­ï¼Œæ²¡æœ‰æ·»åŠ é¢å¤–çš„åˆ†éš”ç¬¦ï¼Œå‡½æ•°åç§°æ˜¯ç›´æ¥æ”¾åœ¨ç›®æ ‡å¯¹è±¡åç§°å’Œ å‚æ•°ä¹‹é—´çš„ã€‚ä»¥ä¸‹ä¸¤ç§è°ƒç”¨æ–¹å¼æ˜¯ç­‰ä»·çš„ï¼š\n\n\n```\n1.to(\"one\")\n1 to \"one\"\n```\n\nä¸­ç¼€è°ƒç”¨å¯ä»¥ä¸åªæœ‰ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ä¸€èµ·ä½¿ç”¨ï¼Œæ— è®ºæ˜¯æ™®é€šçš„å‡½æ•°è¿˜æ˜¯æ‰©å±•å‡½ æ•°ã€‚è¦å…è®¸ä½¿ç”¨ä¸­ç¼€ç¬¦å·è°ƒç”¨å‡½æ•°ï¼Œéœ€è¦ä½¿ç”¨ infix ä¿®é¥°ç¬¦æ¥æ ‡è®°å®ƒã€‚ä¸‹é¢æ˜¯ä¸€ä¸ª ç®€å•çš„ to å‡½æ•°çš„å£°æ˜ï¼š\n\n\n```\ninfix fun Any.to(other: Any) = Pair(this, other)\n```\n\nto å‡½æ•°æ˜¯ä¸€ä¸ªæ‰©å±•å‡½æ•°ï¼Œå¯ä»¥åˆ›å»ºä¸€å¯¹ä»»ä½•å…ƒç´ ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯æ³›å‹æ¥æ”¶è€…çš„ æ‰©å±•ï¼šå¯ä»¥ä½¿ç”¨ 1 to \"one\" ã€\"one\" to 1ã€list to list.size()ç­‰å†™æ³•ã€‚ \n\n\n\n### 5.è®©ä½ çš„ä»£ç æ›´æ•´æ´ï¼šå±€éƒ¨å‡½æ•°å’Œæ‰©å±•\n\nKotlinå¯ä»¥åœ¨å‡½æ•°ä¸­åµŒå¥—ç±»ä¸­æå–çš„å‡½æ•°ã€‚è¿™æ ·ï¼Œæ—¢å¯ä»¥è·å¾—æ‰€éœ€çš„ç»“æ„ï¼Œä¹Ÿæ— é¡»é¢å¤–çš„è¯­æ³•å¼€é”€ã€‚\n\nä¸¾ä¸ªæ —å­ï¼š\n\n```\nclass User(val id: Int, val name: String, val address: String) \n\nfun saveUser(user : User){\n    if(user.name.isEmpty()){\n        ...\n    }\n    if(user.address.isEmpty()){\n        ...\n    }\n    //ä¿å­˜...\n}\n```\nå¦‚æœå°†éªŒè¯ä»£ç æ”¾åˆ°å±€éƒ¨å‡½æ•°ä¸­ï¼Œå¯ä»¥æ‘†è„±é‡å¤ï¼Œå¹¶ä¿æŒæ¸…æ™°çš„ä»£ç ç»“æ„ï¼Œå¯ä»¥è¿™æ ·åš ï¼š\n\n\n```\nclass User(val id: Int, val name: String, val address: String) \n\nfun saveUser(user : User){\n    fun validate(user: User, value: String, fieldName: String){\n        if(value.isEmpty()){\n            ...\n        }\n    }\n    \n    validate (user, user.name, \"Name\")\n    validate (user, user.address, \"Address\")\n    //ä¿å­˜...\n    \n}\n```\n\nä¸Šé¢çš„ä»£ç çœ‹èµ·æ¥å¥½å¤šäº†ï¼Œè€Œä¸”å±€éƒ¨å‡½æ•°å¯ä»¥è®¿é—®æ‰€åœ¨å‡½æ•°ä¸­çš„æ‰€æœ‰å‚æ•°å’Œå˜é‡ã€‚ æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œå»æ‰å†—ä½™çš„Userå‚æ•°ï¼Œè¿™é‡Œå°±ä¸å†æ¼”ç¤ºäº†\n\næˆ‘ä»¬å¯ä»¥ç»§ç»­æ”¹è¿›ï¼ŒæŠŠéªŒè¯é€»è¾‘æ”¾åˆ° User ç±»çš„æ‰©å±•å‡½æ•°ä¸­ã€‚\n\n```\nclass User(val id: Int, val name: String, val address: String) \n\nfun User.validateBeforeSave(){\n    fun validate(value: String, fieldName: String){\n        if(value.isEmpty()){\n            ...\n        }\n    }\n    \n    validate (user.name, \"Name\")\n    validate (user.address, \"Address\")\n}\n\n\nfun saveUser(user : User){\n    user.validateBeforeSave()\n    //ä¿å­˜...\n}\n```\n\n**å°ç»“ï¼š**\n\n- Kotlinæ²¡æœ‰å®šä¹‰è‡ªå·±çš„é›†åˆç±»ï¼Œè€Œæ˜¯åœ¨Javaé›†åˆç±»çš„åŸºç¡€ä¸Šæä¾›äº†æ›´ä¸°å¯Œçš„APIã€‚\n\n- Kotlinå¯ä»¥ç»™å‡½æ•°å‚æ•°å®šä¹‰é»˜è®¤å€¼ï¼Œè¿™æ ·å¤§å¤§é™ä½äº†é‡è½½å‡½æ•°çš„å¿…è¦æ€§ï¼Œè€Œä¸”å‘½åå‚æ•°è®©å¤šå‚æ•°å‡½æ•°çš„è°ƒç”¨æ›´åŠ æ˜“è¯»ã€‚\n\n- Kotlinå…è®¸æ›´çµæ´»çš„ä»£ç ç»“æ„ï¼šå‡½æ•°å’Œå±æ€§éƒ½å¯ä»¥ç›´æ¥åœ¨æ–‡ä»¶ä¸­å£°æ˜ï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨ç±»ä¸­ä½œä¸ºæˆå‘˜ã€‚\n\n- Kotlinå¯ä»¥ç”¨æ‰©å±•å‡½æ•°å’Œå±æ€§æ¥æ‰©å±•ä»»ä½•ç±»çš„APIï¼ŒåŒ…æ‹¬åœ¨å¤–éƒ¨åº“ä¸­å®šä¹‰çš„ç±»ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹å…¶æºä»£ç ï¼Œä¹Ÿæ²¡æœ‰è¿è¡Œæ—¶å¼€é”€ã€‚ \n\n- ä¸­ç¼€è°ƒç”¨æä¾›äº†å¤„ç†å•ä¸ªå‚æ•°çš„ï¼Œç±»ä¼¼è°ƒç”¨è¿ç®—ç¬¦æ–¹æ³•çš„ç®€æ˜è¯­æ³•ã€‚\n\n- Kotlinä¸ºæ™®é€šå­—ç¬¦ä¸²å’Œæ­£åˆ™è¡¨è¾¾å¼éƒ½æä¾›äº†å¤§é‡çš„æ–¹ä¾¿å­—ç¬¦ä¸²å¤„ç†çš„å‡½æ•°ã€‚ \n\n- ä¸‰é‡å¼•å·çš„å­—ç¬¦ä¸²æä¾›äº†ä¸€ç§ç®€æ´çš„æ–¹å¼ï¼Œè§£å†³äº†åŸæœ¬åœ¨Javaä¸­éœ€è¦è¿›è¡Œå¤§é‡å•°å—¦çš„è½¬ä¹‰å’Œå®‡ç¬¦ä¸²è¿æ¥çš„é—®é¢˜ã€‚\n\n- å±€éƒ¨å‡½æ•°å¸®åŠ©ä½ ä¿æŒä»£ç æ•´æ´çš„åŒæ—¶ï¼Œé¿å…é‡å¤ã€‚\n\n\n\n"},{"articleName":"Kotlinå­¦ä¹ ç¬”è®°ï¼ˆç¬¬äºŒç« ï¼‰","createTime":"2018-09-30T21:49:47.000","lastModifiedTime":"2020-02-03T10:41:24.000","tag":"Kotlin","summary":">  åœ¨2017å¹´çš„Googleå¼€å‘è€…å¤§ä¼šä¸Šï¼ŒKotlinæ­£å¼ä½œä¸ºAndroidçš„å®˜æ–¹å¼€å‘è¯­è¨€é—ªäº®ç™»","imageAddress":"/img/kotlin_1.png","articleAddress":"/config/study/Kotlinå­¦ä¹ ç¬”è®°ï¼ˆç¬¬äºŒç« ï¼‰.md","articleContent":"---\ntitle: Kotlinç¬”è®°(ä¸€):åŸºç¡€ç¯‡\ndate: 2018-09-30 21:49:47\nindex_img: /img/kotlin_1.png\ntags: Kotlin\n---\n\n>  åœ¨2017å¹´çš„Googleå¼€å‘è€…å¤§ä¼šä¸Šï¼ŒKotlinæ­£å¼ä½œä¸ºAndroidçš„å®˜æ–¹å¼€å‘è¯­è¨€é—ªäº®ç™»åœºã€‚è€Œç°åœ¨å·²ç»åˆ°äº†2018å¹´çš„ä¸‹åŠå¹´æœ«ï¼Œèº«ä¸ºä¸€åAndroidå¼€å‘è€…ï¼Œå¦‚æœä¸ä¼šä¸€ç‚¹Kotlinï¼Œæ€»æ„Ÿè§‰å°‘äº†ä»€ä¹ˆã€‚  \r\n>   \r\n> äºæ˜¯ä¹ï¼Œæˆ‘å‡†å¤‡åŠ¨æ‰‹å­¦ä¸€å­¦è¿™é—¨â€œå¹´è½»â€çš„æ–°è¯­è¨€äº†ã€‚ä¸è¿‡æ–°å­¦ä¸€äº›ä¸œè¥¿å¾€å¾€ä¼šå› ä¸ºçŸ¥è¯†çš„æ¶ˆåŒ–éœ€è¦æ—¶é—´è€Œå¯¼è‡´çŸ¥è¯†æ¥æ”¶çš„æ•ˆç‡ä¸é«˜ï¼Œæ‰€ä»¥è¿™æ—¶å€™å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´çš„ä¼˜åŠ¿æ‰å¾—ä»¥ä½“ç°å˜›ï¼  \r\n> \r\n> æ‰€ä»¥ï¼Œåˆå­¦é˜¶æ®µï¼Œæˆ‘è¿˜æ˜¯å‡†å¤‡è®°ä¸€è®°ç¬”è®°ï¼Œè¿™æ ·ä¹Ÿè®¸ä¼šå¯¹æˆ‘å­¦è¿™é—¨è¯­è¨€æœ‰æ‰€å¸®åŠ©å§ï¼Ÿ!\r\n\r\n\r\nå…³äºKotlinçš„å®˜æ–¹æ–‡æ¡£ï¼Œåœ°å€å¦‚ä¸‹ï¼š\r\n\r\n[Kotlinå­¦ä¹ ](https://www.kotlincn.net/docs/reference/)\r\n<!--more--> \r\n\r\n### 1.åœ¨ Kotlin ä¸­ï¼Œifæ˜¯è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯è¯­å¥ã€‚\r\n\r\n è¯­å¥å’Œè¡¨è¾¾å¼çš„åŒºåˆ«åœ¨äºï¼Œè¡¨è¾¾å¼æœ‰å€¼ï¼Œå¹¶ä¸”èƒ½ä½œä¸ºå¦ä¸€ä¸ªè¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ä½¿ç”¨ï¼›è€Œè¯­å¥æ€»æ˜¯åŒ…å›´ç€å®ƒçš„ä»£ç å—ä¸­çš„é¡¶å±‚å…ƒç´ ï¼Œå¹¶ä¸”æ²¡æœ‰è‡ªå·±çš„å€¼ã€‚\r\n- åœ¨Javaä¸­ï¼Œæ‰€æœ‰çš„æ§åˆ¶ç»“æ„éƒ½æ˜¯è¯­å¥ã€‚è€Œåœ¨Kotlinä¸­ï¼Œé™¤äº†å¾ªç¯ï¼ˆ for, do å’Œ do/while ï¼‰ä»¥å¤–å¤§å¤šæ•°æ§åˆ¶ç»“æ„éƒ½æ˜¯ è¡¨è¾¾å¼ã€‚\r\nè¿™ç§ç»“åˆæ§åˆ¶ç»“æ„å’Œå…¶ä»–è¡¨è¾¾å¼çš„èƒ½åŠ›è®©ä½ å¯ä»¥ç®€æ˜æ‰¼è¦åœ°è¡¨ç¤ºè®¸å¤š å¸¸è§çš„æ¨¡å¼ï¼Œç¨åä½ ä¼šåœ¨æœ¬ä¹¦ä¸­çœ‹åˆ°è¿™äº›å†…å®¹ã€‚\r\n- å¦ä¸€æ–¹é¢ï¼ŒJavaä¸­çš„èµ‹å€¼æ“ä½œæ˜¯è¡¨è¾¾å¼ï¼Œåœ¨Kotlinä¸­åè€Œå˜æˆäº†è¯­å¥ã€‚è¿™æœ‰åŠ©äºé¿å…æ¯”è¾ƒå’Œèµ‹å€¼ä¹‹é—´çš„æ··æ·†ï¼Œè€Œè¿™ç§æ··æ·†æ˜¯å¸¸è§çš„é”™è¯¯æ¥æºã€‚\r\n\r\n\r\n### 2.å£°æ˜å˜é‡çš„å…³é”®å­—æœ‰ä¸¤ä¸ª ï¼š\r\n\r\n- val ï¼ˆæ¥è‡ª valueï¼‰ ä¸€ä¸€ä¸å¯å˜å¼•ç”¨ã€‚ä½¿ç”¨ val å£°æ˜çš„å˜é‡ä¸èƒ½åœ¨åˆå§‹åŒ–ä¹‹ åå†æ¬¡èµ‹å€¼ã€‚å®ƒå¯¹åº”çš„æ˜¯ Java çš„ final å˜é‡ã€‚  \r\n- var ï¼ˆæ¥è‡ª variableï¼‰ ä¸€ä¸€å¯å˜å¼•ç”¨ã€‚è¿™ç§å˜é‡çš„å€¼å¯ä»¥è¢«æ”¹å˜ã€‚è¿™ç§å£°æ˜å¯¹ åº”çš„æ˜¯æ™®é€šï¼ˆé finalï¼‰çš„ Java å˜é‡ã€‚\r\n\r\n\r\n### 3.å±€éƒ¨å˜é‡çš„å¼•ç”¨\r\n\r\nå’Œè®¸å¤šè„šæœ¬è¯­è¨€ä¸€æ ·ï¼Œ Kotlin è®©ä½ å¯ ä»¥åœ¨å­—ç¬¦ä¸²å­—é¢å€¼ä¸­å¼•ç”¨å±€éƒ¨å˜é‡ï¼Œåªéœ€è¦åœ¨å˜é‡åç§°å‰é¢åŠ ä¸Šå­—ç¬¦$ã€‚\r\n\r\nè¿™ç­‰ä»·äº Java ä¸­çš„å­—ç¬¦ä¸²è¿æ¥ï¼ˆ \"Hello,\"+ name ï¼‹\"ï¼\"ï¼‰ï¼Œæ•ˆç‡ä¸€æ ·ä½†æ˜¯æ›´ç´§å‡‘ã€‚\r\n\r\n```\r\nfun main(args: Array<String>) {\r\n    val name = if(args.size > 0) args[0] else \"Kotlin\"\r\n    println(\"Hello, $name !\")\r\n}\r\n```\r\n\r\n\r\nè¿˜å¯ä»¥å¼•ç”¨æ›´å¤æ‚çš„è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯ä»…é™äºç®€å•çš„å˜é‡åç§°ï¼Œåªéœ€è¦æŠŠè¡¨è¾¾å¼ ç”¨èŠ±æ‹¬å·æ‹¬èµ·æ¥.\r\n\r\n### 4.åœ¨Javaä¸­å¯ä»¥ç”¨switchè¯­å¥å®Œæˆçš„ï¼Œè€ŒKotlin å¯¹åº”çš„ç»“æ„æ˜¯when\r\n\r\n```\r\nfun getMnemonic(color: Color) = \r\nwhen (color) { \r\nColor . RED ->â€Richard\" \r\nColor.ORANGE ->â€Ofâ€ \r\nColor.YELLOW ->â€York\" \r\nColor .GREEN ->â€Gaveâ€ \r\nColor.BLUE ->â€Battle\" \r\nColor ï¼å·¥NDIGO ->â€Inâ€ \r\nColor.VIOLET ->â€Vain \r\n}\r\n```\r\n\r\n  åœ¨ä¸€ä¸ª when åˆ†æ”¯ä¸Šåˆå¹¶å¤šä¸ªé€‰é¡¹ï¼š\r\n  \r\n```\r\nfun getWarmth(color: Color) = when(color) {\r\nColor.RED, Color.ORANGE, Color.YELLOW - > â€warmâ€\r\nColor.GREEN -> â€neutralâ€\r\nColor.BLUE, Color.INDIGO, Color.VIOLET ->â€coldâ€\r\n}\r\n```\r\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œä¹Ÿå¯ä»¥å¯¼å…¥æšä¸¾å¸¸é‡åä¸ç”¨é™å®šè¯å°±å¯ä»¥è®¿é—®ã€‚æ¯”å¦‚å»æ‰èŠ±æ‹¬å·é‡Œçš„Colorä¹Ÿæ˜¯å¯ä»¥çš„ã€‚\r\n\r\n> Kotlinä¸­çš„whenç»“æ„æ¯”Javaä¸­çš„switchå¼ºå¤§å¾—å¤šã€‚switchè¦æ±‚å¿…é¡»ä½¿ç”¨å¸¸é‡ï¼ˆæšä¸¾å¸¸é‡ã€å­—ç¬¦ä¸²æˆ–è€…æ•°å­—å­—é¢å€¼ï¼‰ä½œä¸ºåˆ†æ”¯æ¡ä»¶ï¼Œå’Œå®ƒä¸ä¸€æ ·ï¼Œ whenå…è®¸ä½¿ç”¨ä»»ä½•å¯¹è±¡ã€‚\r\n\r\n\r\n\r\n### 5.ç±»å‹åˆ¤æ–­\r\n\r\nåœ¨Kotlinä¸­ï¼Œä½ è¦ä½¿ç”¨isæ£€æŸ¥æ¥åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦æ˜¯æŸç§ç±»å‹ã€‚isæ£€æŸ¥å’ŒJavaä¸­çš„instanceOfç›¸ä¼¼ï¼Œä¸è¿‡åœ¨instanceOfæ£€æŸ¥ä¹‹åè¿˜éœ€è¦æ˜¾å¼åœ°åŠ ä¸Šç±»å‹è½¬æ¢ã€‚\r\n\r\nåœ¨Kotlinä¸­ï¼Œç¼–è¯‘å™¨å¸®ä½ å®Œæˆäº†è¿™äº›å·¥ä½œã€‚å¦‚æœä½ æ£€æŸ¥è¿‡ä¸€ä¸ªå˜é‡æ˜¯æŸç§ç±»å‹ï¼Œåé¢å°±ä¸å†éœ€è¦è½¬æ¢å®ƒï¼Œå¯ä»¥å°±æŠŠå®ƒå½“ä½œä½ æ£€æŸ¥è¿‡çš„ç±»å‹ä½¿ç”¨ã€‚\r\n\r\nä½¿ç”¨aså…³é”®å­—æ¥è¡¨ç¤ºåˆ°ç‰¹å®šç±»å‹çš„æ˜¾å¼è½¬æ¢ï¼›\r\n\r\n\r\n### 6.å¾ªç¯ä¸­çš„\"in\"å…³é”®å­—\r\n\r\nKotliné‡Œé¢å…³é”®å­—â€œinâ€æœ‰è®¸å¤šä½œç”¨ï¼Œæ¯”å¦‚æ£€æŸ¥åŒºé—´çš„æˆå‘˜ï¼›ä½œä¸ºwhençš„åˆ†æ”¯ï¼›åœ¨forå¾ªç¯ä¸­ä½¿ç”¨ç­‰ã€‚å…³äºinå¦‚ä½•åœ¨listä¸­ä½¿ç”¨ï¼Œä¸‹ç« å†ä»‹ç»\r\n\r\n\r\n### 7.å…³äº\"try\"\r\n\r\nKotlinä¸­çš„tryå…³é”®å­—å°±åƒifå’Œwhenä¸€æ ·,å¼•å…¥äº†ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¯ä»¥æŠŠå®ƒçš„å€¼èµ‹ç»™ä¸€ä¸ªå˜é‡ã€‚ä¸åŒäºifï¼Œä½ æ€»æ˜¯éœ€è¦ç”¨èŠ±æ‹¬å·æŠŠè¯­å¥ä¸»ä½“æ‹¬èµ·æ¥ã€‚å’Œå…¶ä»–è¯­å¥ä¸€æ ·ï¼Œå¦‚æœå…¶ä¸»ä½“åŒ…å«å¤šä¸ªè¡¨è¾¾å¼ï¼Œé‚£ä¹ˆæ•´ä¸ª try è¡¨è¾¾å¼çš„å€¼å°±æ˜¯æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚"},{"articleName":"Buglyçƒ­ä¿®å¤ä½¿ç”¨åŠå¤šæ¸ é“æ‰“åŒ…","createTime":"2018-09-26T21:49:47.000","lastModifiedTime":"2020-02-03T10:06:52.000","tag":"Android","summary":" <font color=\"7FFF00\">å¤´\n\nä¸çŸ¥é“ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™ä¸ªæƒ…å†µï¼Œé¡¹ç›®ä¸Šçº¿åæˆ–è€…å¼€","imageAddress":"/img/bugly.png","articleAddress":"/config/study/Buglyçƒ­ä¿®å¤ä½¿ç”¨åŠå¤šæ¸ é“æ‰“åŒ….md","articleContent":"---\ntitle: Buglyçƒ­ä¿®å¤ä½¿ç”¨åŠå¤šæ¸ é“æ‰“åŒ…\ndate: 2018-09-26 21:49:47\nindex_img: /img/bugly.png\ntags: Android\n---\n\n## <font color=\"#7FFF00\">å¤´\n\nä¸çŸ¥é“ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™ä¸ªæƒ…å†µï¼Œé¡¹ç›®ä¸Šçº¿åæˆ–è€…å¼€å§‹ç»™åˆ«äººä½¿ç”¨çš„æ—¶å€™ï¼Œå†·ä¸ä¸çš„å†’å‡ºä¸ªBugï¼Œè¿™æ—¶å€™é¦–å…ˆè¦å¹²å˜›ï¼Ÿ\n\n**å…ˆçœ‹å´©æºƒæ—¥å¿—å•Š**\n\nçœ‹å®Œå´©æºƒæ—¥å¿—ä½ çŸ¥é“äº†é€ æˆå´©æºƒçš„åŸå› ï¼Œç„¶åå¹²å˜›ï¼Ÿ\n\n**å¼€å§‹ç”©é”…å•Š**\n\nå½“æŸ¥æ˜äº†æ˜¯è°é€ æˆçš„è¿™ä¸ªå´©æºƒåï¼Œä½ å‘ç°ä¸æ˜¯ä½ çš„é—®é¢˜ï¼Œäºæ˜¯ä½ å¿ƒä¸­ä¸€ä¹ï¼Œé•¿èˆ’ä¸€å£æ°”ï¼Œä»°å¤©å¤§ç¬‘ï¼šç æµ·æ²‰æµ®åˆå‡ è½½ï¼Œæˆ‘è¾ˆå²‚æ˜¯è“¬è’¿äººï¼›ç¬‘å®Œä¾¿å‡†å¤‡èººåºŠä¸Šç¡è§‰å»â€”â€”ç§‹è±†éº»è¢‹ï¼Œæ˜¯ä¸æ˜¯å¿˜äº†ä»€ä¹ˆä¸œè¥¿ï¼Ÿ\n\næ˜¯çš„ï¼Œå³ä½¿ä½ å‘ç°äº†é—®é¢˜ï¼Œå¹¶ä¸”æ‰¾åˆ°äº†é—®é¢˜çš„æ¥æºï¼Œè¿™æ—¶å€™è¿˜å·®ä¸€æ­¥ï¼šè§£å†³é—®é¢˜çš„åŠæ³•ï¼å¦‚ä½•è§£å†³ï¼Ÿ\n\n**å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Ÿ**\n\nè¿™æ ·ä¸è§‰å¾—å¾ˆéº»çƒ¦å—ï¼Ÿç‰¹åˆ«æ˜¯å¦‚æœä¸€ä¸ªé¡¹ç›®å¤„äºåˆæœŸé˜¶æ®µï¼ŒBugæ˜¯æƒ³ç”©éƒ½ç”©ä¸æ‰çš„ï¼Œå¦‚æœæ¯å‘ç°ä¸€æ¬¡å´©æºƒï¼Œéƒ½éœ€è¦é å‘å¸ƒä¸€ä¸ªæ–°ç‰ˆæœ¬å»è§£å†³çš„è¯ï¼Œé‚£æœªå…å°±å¤ªéº»çƒ¦äº†ã€‚ä¸å…‰æ˜¯å¼€å‘è€…éº»çƒ¦ï¼Œä½¿ç”¨è€…ä¹Ÿä¼šå› ä¸ºé¢‘ç¹çš„å‡çº§è€Œä¸è€çƒ¦ï¼ˆjust like meï¼‰ï¼Œé‚£é—®é¢˜åˆå›æ¥äº†ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ\n\n**çƒ­ä¿®å¤å•Š**\n\né€šè¿‡çº¿ä¸Šä¿®å¤Bugï¼Œè®©ç”¨æˆ·åœ¨ç¥ä¸çŸ¥é¬¼ä¸è§‰çš„æƒ…å†µä¸‹å°±è¿›è¡Œäº†ä¸€æ¬¡åº”ç”¨æ›´æ–°ï¼Œéº»éº»å†ä¹Ÿä¸ç”¨æ‹…å¿ƒAppå´©æºƒå•¦ï¼ï¼ˆä¸å­˜åœ¨çš„ï¼‰\n\nçƒ­ä¿®å¤è¿˜æœ‰ä¸ªéšè—çš„å¥½å¤„ï¼Œé‚£å°±æ˜¯åœ¨æµ‹è¯•äººå‘˜ä¸å¤Ÿï¼ˆå¼€å‘å…¼æµ‹è¯•ï¼‰ï¼Œæµ‹è¯•æœºå‹ä¸å¤Ÿçš„æƒ…å†µä¸‹å¯ä»¥æ˜¾è‘—æ”¹å–„Appçš„å´©æºƒç‡ã€‚å¥½å§ï¼Œå‡†å¤‡å¼€å§‹ä½¿ç”¨å§ã€‚\n\n## <font color=\"#000066\">èº«\n\n### ä¸€ã€ä¸ºä»€ä¹ˆè¦ç”¨Bugly\n\nå¸‚é¢ä¸Šå…³äºçƒ­ä¿®å¤å’Œå´©æºƒæ—¥å¿—ç›‘æµ‹çš„ç›¸å…³æŠ€æœ¯å’ŒSDKç§ç±»å„ä¸ç›¸åŒï¼Œä¸ºä»€ä¹ˆååè¦ç”¨Buglyå‘¢ï¼Ÿ\n\n- å¯ä»¥è·å–åˆ°Appå´©æºƒæ—¥å¿—\n- å¯ä»¥é›†æˆThinkçƒ­ä¿®å¤\n- ç•Œé¢å¥½çœ‹ï¼Œæ–¹ä¾¿ç®¡ç†ç‰ˆæœ¬\n- å…è´¹\n- ï¼ˆå‡‘å·§å°±ç”¨äº†è¿™ä¸€æ¬¾ï¼Œå…¶ä»–çš„éƒ½æ²¡æœ‰ç”¨è¿‡ï¼‰\n\nåŸºäºä»¥ä¸ŠåŸå› ï¼Œæœ€åå°±ä½¿ç”¨äº†Buglyå»è§£å†³ä¸Šé¢æåˆ°è¿‡çš„é—®é¢˜ï¼›\n\n### äºŒã€Buglyçƒ­æ›´æ–°æ¥å…¥æµç¨‹\n\nå…¶å®å…³äºBuglyçƒ­æ›´æ–°çš„è¯¦ç»†æ¥å…¥æµç¨‹ï¼Œå®˜æ–¹çš„æ–‡æ¡£ä»‹ç»çš„éå¸¸è¯¦ç»†ï¼Œå¯¹æ–°æ‰‹æ¯”è¾ƒå‹å¥½ï¼Œæˆ‘ç¬¬ä¸€æ¬¡ä½¿ç”¨ä¹Ÿæ˜¯ç›´æ¥å‚ç…§çš„æ–‡æ¡£ï¼Œä¸‹é¢æ˜¯å®˜æ–¹æ–‡æ¡£çš„åœ°å€ï¼š\n\n[ã€Bugly Androidçƒ­æ›´æ–°ä½¿ç”¨æŒ‡å—ã€‘](https://bugly.qq.com/docs/user-guide/instruction-manual-android-hotfix/?v=20180709165613)\n\nè™½ç„¶å®˜æ–¹æœ‰ä¾‹å­ï¼Œè¿™é‡Œè¿˜æ˜¯å†™äº†ä¸€ä¸ªç®€åŒ–ç‰ˆï¼Œä¹Ÿæ–¹ä¾¿ä»¥åå“ªå¤©è‡ªå·±å¿˜è®°äº†ä¾æ—§èƒ½å¿«é€Ÿä½¿ç”¨ï¼š\n\n#### ç¬¬ä¸€æ­¥ï¼šæ·»åŠ ä¾èµ–æ’ä»¶\n\nåœ¨ä½ çš„é¡¹ç›®æ›´ç›®å½•ä¸‹çš„â€œbuild.gradleâ€ä¸­æ·»åŠ ï¼š\n\n```\nbuildscript {\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        // tinkersupportæ’ä»¶, å…¶ä¸­lastest.releaseæŒ‡æ‹‰å–æœ€æ–°ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šæ˜ç¡®ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚1.0.4\n        classpath \"com.tencent.bugly:tinker-support:1.1.2\"\n    }\n}\n```\nåœ¨å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œæœ€æ–°çš„ç‰ˆæœ¬å°±æ˜¯1.1.2\n\n#### ç¬¬äºŒæ­¥ï¼šé…ç½®ä¾èµ–æ’ä»¶\n\n##### gradleé…ç½®\n\nåœ¨app moduleçš„â€œbuild.gradleâ€æ–‡ä»¶ä¸­æ·»åŠ ï¼ˆç¤ºä¾‹é…ç½®ï¼‰ï¼š\n\n\n```\n...\n// ä¾èµ–æ’ä»¶è„šæœ¬\napply from: 'tinker-support.gradle'\n\nandroid {\n        defaultConfig {\n          ndk {\n            //è®¾ç½®æ”¯æŒçš„SOåº“æ¶æ„\n            abiFilters 'armeabi' //, 'x86', 'armeabi-v7a', 'x86_64', 'arm64-v8a'\n          }\n        }\n      }\n      dependencies {\n         implementation 'com.android.support:multidex:1.0.1'\n        // å¤šdexé…ç½®\n        //æ³¨é‡Šæ‰åŸæœ‰buglyçš„ä»“åº“\n        //compile 'com.tencent.bugly:crashreport:latest.release'//å…¶ä¸­latest.releaseæŒ‡ä»£æœ€æ–°ç‰ˆæœ¬å·ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šæ˜ç¡®çš„ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚1.3.4\n        implementation 'com.tencent.bugly:crashreport_upgrade:1.3.5'\n        // æŒ‡å®štinkerä¾èµ–ç‰ˆæœ¬ï¼ˆæ³¨ï¼šåº”ç”¨å‡çº§1.3.5ç‰ˆæœ¬èµ·ï¼Œä¸å†å†…ç½®tinkerï¼‰\n        implementation 'com.tencent.tinker:tinker-android-lib:1.9.6'\n        implementation 'com.tencent.bugly:nativecrashreport:latest.release'\n        //å…¶ä¸­latest.releaseæŒ‡ä»£æœ€æ–°ç‰ˆæœ¬å·ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šæ˜ç¡®çš„ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚2.2.0\n      }\n```\nåœ¨è¿™ä¸ªç‰ˆæœ¬çš„SDKé‡Œé¢ï¼Œå·²ç»é›†æˆäº†å´©æºƒæ—¥å¿—ä¸Šä¼ çš„åŠŸèƒ½å“¦ï¼\n\n##### tinker-support.gradleçš„é…ç½®\n\næ¥ä¸‹æ¥ï¼Œä½ è¦åœ¨app moduleç›®å½•ä¸‹åˆ›å»ºå¦å¤–ä¸€ä¸ªgradleæ–‡ä»¶ï¼Œå‘½åä¸ºâ€œtinker-support.gradleâ€ï¼Œç„¶åå¯¹å®ƒè¿›è¡Œé…ç½®ï¼š\n\n```\napply plugin: 'com.tencent.bugly.tinker-support'\n\ndef bakPath = file(\"${buildDir}/bakApk/\")\n\n/**\n * æ­¤å¤„å¡«å†™æ¯æ¬¡æ„å»ºç”Ÿæˆçš„åŸºå‡†åŒ…ç›®å½•\n */\ndef baseApkDir = \"app-0921-14-52-06\"\n\n/**\n * å¯¹äºæ’ä»¶å„å‚æ•°çš„è¯¦ç»†è§£æè¯·å‚è€ƒ\n */\ntinkerSupport {\n\n    // å¼€å¯tinker-supportæ’ä»¶ï¼Œé»˜è®¤å€¼true\n    enable = true\n\n    // æŒ‡å®šå½’æ¡£ç›®å½•ï¼Œé»˜è®¤å€¼å½“å‰moduleçš„å­ç›®å½•tinker\n    autoBackupApkDir = \"${bakPath}\"\n\n    // æ˜¯å¦å¯ç”¨è¦†ç›–tinkerPatché…ç½®åŠŸèƒ½ï¼Œé»˜è®¤å€¼false\n    // å¼€å¯åtinkerPatché…ç½®ä¸ç”Ÿæ•ˆï¼Œå³æ— éœ€æ·»åŠ tinkerPatch\n    overrideTinkerPatchConfiguration = true\n\n    // ç¼–è¯‘è¡¥ä¸åŒ…æ—¶ï¼Œå¿…éœ€æŒ‡å®šåŸºçº¿ç‰ˆæœ¬çš„apkï¼Œé»˜è®¤å€¼ä¸ºç©º\n    // å¦‚æœä¸ºç©ºï¼Œåˆ™è¡¨ç¤ºä¸æ˜¯è¿›è¡Œè¡¥ä¸åŒ…çš„ç¼–è¯‘\n    // @{link tinkerPatch.oldApk }\n    baseApk = \"${bakPath}/${baseApkDir}/app-release.apk\"\n\n    // å¯¹åº”tinkeræ’ä»¶applyMapping\n    baseApkProguardMapping = \"${bakPath}/${baseApkDir}/app-release-mapping.txt\"\n\n    // å¯¹åº”tinkeræ’ä»¶applyResourceMapping\n    baseApkResourceMapping = \"${bakPath}/${baseApkDir}/app-release-R.txt\"\n\n    // æ„å»ºåŸºå‡†åŒ…å’Œè¡¥ä¸åŒ…éƒ½è¦æŒ‡å®šä¸åŒçš„tinkerIdï¼Œå¹¶ä¸”å¿…é¡»ä¿è¯å”¯ä¸€æ€§\n    tinkerId = \"1.0.1-patch\"                //tinkerId = \"1.0.1-patch\"            tinkerId = \"1.0.1-base\"\n\n    // æ„å»ºå¤šæ¸ é“è¡¥ä¸æ—¶ä½¿ç”¨\n    // buildAllFlavorsDir = \"${bakPath}/${baseApkDir}\"\n\n    // æ˜¯å¦å¯ç”¨åŠ å›ºæ¨¡å¼ï¼Œé»˜è®¤ä¸ºfalse.(tinker-spport 1.0.7èµ·æ”¯æŒï¼‰\n    // isProtectedApp = true\n\n    // æ˜¯å¦å¼€å¯åå°„Applicationæ¨¡å¼\n    enableProxyApplication = false\n\n    // æ˜¯å¦æ”¯æŒæ–°å¢éexportçš„Activityï¼ˆæ³¨æ„ï¼šè®¾ç½®ä¸ºtrueæ‰èƒ½ä¿®æ”¹AndroidManifestæ–‡ä»¶ï¼‰\n    supportHotplugComponent = true\n\n}\n\n/**\n * ä¸€èˆ¬æ¥è¯´,æˆ‘ä»¬æ— éœ€å¯¹ä¸‹é¢çš„å‚æ•°åšä»»ä½•çš„ä¿®æ”¹\n * å¯¹äºå„å‚æ•°çš„è¯¦ç»†ä»‹ç»è¯·å‚è€ƒ:\n * https://github.com/Tencent/tinker/wiki/Tinker-%E6%8E%A5%E5%85%A5%E6%8C%87%E5%8D%97\n */\ntinkerPatch {\n    //oldApk =\"${bakPath}/${appName}/app-release.apk\"\n    ignoreWarning = false\n    useSign = true\n    dex {\n        dexMode = \"jar\"\n        pattern = [\"classes*.dex\"]\n        loader = []\n    }\n    lib {\n        pattern = [\"lib/*/*.so\"]\n    }\n\n    res {\n        pattern = [\"res/*\", \"r/*\", \"assets/*\", \"resources.arsc\", \"AndroidManifest.xml\"]\n        ignoreChange = []\n        largeModSize = 100\n    }\n\n    packageConfig {\n    }\n    sevenZip {\n        zipArtifact = \"com.tencent.mm:SevenZip:1.1.10\"\n//        path = \"/usr/local/bin/7za\"\n    }\n    buildConfig {\n        keepDexApply = false\n        //tinkerId = \"1.0.1-base\"\n        //applyMapping = \"${bakPath}/${appName}/app-release-mapping.txt\" //  å¯é€‰ï¼Œè®¾ç½®mappingæ–‡ä»¶ï¼Œå»ºè®®ä¿æŒæ—§apkçš„proguardæ··æ·†æ–¹å¼\n        //applyResourceMapping = \"${bakPath}/${appName}/app-release-R.txt\" // å¯é€‰ï¼Œè®¾ç½®R.txtæ–‡ä»¶ï¼Œé€šè¿‡æ—§apkæ–‡ä»¶ä¿æŒResIdçš„åˆ†é…\n    }\n}\n\n```\nè¿™é‡Œé¢çš„é…ç½®æ¯”è¾ƒå¤šï¼Œä¸€å¼€å§‹çœ‹è¿˜æ˜¯æœ‰ç‚¹å„¿çœ¼èŠ±ç¼­ä¹±çš„ï¼Œæ‰€ä»¥å¾—æ…¢æ…¢æ¥ï¼›\n\nè¿™é‡Œå¯¹å…¶ä¸­çš„å‡ ç‚¹è¿›è¡Œè¯´æ˜ï¼š\n\n - *baseApkDir* ï¼š è¿™é‡Œå¡«å†™æ¯æ¬¡æ„å»ºç”Ÿæˆçš„åŸºå‡†åŒ…ç›®å½•ï¼Œæ¯æ¬¡æ‰“åŒ…çš„æ—¶å€™ï¼Œéƒ½ä¼šæœ‰æ–°çš„ç›®å½•å’Œæ–°çš„åŸºå‡†åŒ…ç”Ÿæˆï¼Œä½†æ˜¯åªæœ‰ä½ æ‰“ç®—å‘å¸ƒçš„é‚£ä¸€ä¸ªçš„ç›®å½•æ‰æ˜¯æœ‰æ•ˆçš„ã€‚\n - *tinkerId* ï¼š æ„å»ºåŸºå‡†åŒ…å’Œè¡¥ä¸åŒ…éƒ½è¦æŒ‡å®šä¸åŒçš„tinkerIdï¼Œå¹¶ä¸”å¿…é¡»ä¿è¯å”¯ä¸€æ€§ã€‚æ¯”å¦‚ä½ çš„ç¬¬ä¸€ä¸ªåŸºå‡†åŒ…æ‰“åŒ…çš„æ—¶å€™å¯ä»¥æŠŠè¿™ä¸ªidè®¾ç½®ä¸ºâ€œ1.0.0-baseâ€ï¼Œå½“ä½ æƒ³æ‰“åŒ…çƒ­ä¿®å¤è¡¥ä¸åŒ…çš„æ—¶å€™ï¼Œéœ€è¦æŠŠè¿™ä¸ªidæ¢æˆ1.0.0-patchã€‚\n\n\næ›´è¯¦ç»†çš„é…ç½®é¡¹å‚è€ƒï¼š[tinker-supporté…ç½®è¯´æ˜](https://bugly.qq.com/docs/utility-tools/plugin-gradle-hotfix/)\n\n#### ç¬¬ä¸‰æ­¥ï¼šåˆå§‹åŒ–SDK\n\n\nä¸Šé¢çš„â€œtinker-support.gradleâ€ä¸­çš„enableProxyApplicationå±æ€§è®¾ç½®çš„æ˜¯falseï¼Œæ˜¯Tinkeræ¨èçš„æ¥å…¥æ–¹å¼ã€‚\n\n##### è‡ªå®šä¹‰Applicationï¼Œå½“enableProxyApplicationä¸ºfalseçš„æƒ…å†µ\n\n```\npublic class SampleApplication extends TinkerApplication {\n    public SampleApplication() {\n        super(ShareConstants.TINKER_ENABLE_ALL, \"xxx.xxx.SampleApplicationLike\",\n                \"com.tencent.tinker.loader.TinkerLoader\", false);\n    }\n}\n```\n**SampleApplicationLike**éœ€è¦æ˜¯è‡ªå®šä¹‰çš„ç»§æ‰¿**DefaultApplicationLike**çš„ç±»ï¼Œä¸è¦å¿˜äº†åœ¨**AndroidManifest.xml**ä¸­å£°åä¸Šé¢çš„è¿™ä¸ªApplicationå“¦ã€‚\n\n\n```\npublic class SampleApplicationLike extends DefaultApplicationLike {\n\n\n    public static final String TAG = \"Tinker.SampleApplicationLike\";\n\n    public SampleApplicationLike(Application application, int tinkerFlags,\n                                 boolean tinkerLoadVerifyFlag, long applicationStartElapsedTime,\n                                 long applicationStartMillisTime, Intent tinkerResultIntent) {\n        super(application, tinkerFlags, tinkerLoadVerifyFlag, applicationStartElapsedTime, applicationStartMillisTime, tinkerResultIntent);\n    }\n\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n        // è¿™é‡Œå®ç°SDKåˆå§‹åŒ–ï¼ŒappIdæ›¿æ¢æˆä½ çš„åœ¨Buglyå¹³å°ç”³è¯·çš„appId\n        // è°ƒè¯•æ—¶ï¼Œå°†ç¬¬ä¸‰ä¸ªå‚æ•°æ”¹ä¸ºtrue\n        Bugly.init(getApplication(), \"900029763\", false);\n    }\n\n\n    @TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)\n    @Override\n    public void onBaseContextAttached(Context base) {\n        super.onBaseContextAttached(base);\n        // you must install multiDex whatever tinker is installed!\n        MultiDex.install(base);\n\n        // å®‰è£…tinker\n        // TinkerManager.installTinker(this); æ›¿æ¢æˆä¸‹é¢Buglyæä¾›çš„æ–¹æ³•\n        Beta.installTinker(this);\n    }\n\n    @TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)\n    public void registerActivityLifecycleCallback(Application.ActivityLifecycleCallbacks callbacks) {\n        getApplication().registerActivityLifecycleCallbacks(callbacks);\n    }\n}\n```\n\nä¸Šé¢éœ€è¦æ³¨æ„çš„æ˜¯åœ¨â€œonCreate()â€æ–¹æ³•ä¸­è¿›è¡Œåˆå§‹åŒ–çš„æ—¶å€™ï¼Œå¡«å…¥çš„appIdæ˜¯ä½ åœ¨Buglyåˆ›å»ºçš„é¡¹ç›®çš„Appidï¼Œå…¶ä»–åœ°æ–¹åŸºæœ¬ä¸Šä¸ç”¨æ”¹äº†\n\n\n##### è‡ªå®šä¹‰Applicationï¼Œå½“enableProxyApplicationä¸ºtrueçš„æƒ…å†µ\n\nè¿™ç§çš„æ¥å…¥æ–¹å¼è¦ç®€å•è®¸å¤šï¼Œæ— é¡»ä½ æ”¹é€ Application\n\n```\npublic class MyApplication extends Application {\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n        // è¿™é‡Œå®ç°SDKåˆå§‹åŒ–ï¼ŒappIdæ›¿æ¢æˆä½ çš„åœ¨Buglyå¹³å°ç”³è¯·çš„appId\n        // è°ƒè¯•æ—¶ï¼Œå°†ç¬¬ä¸‰ä¸ªå‚æ•°æ”¹ä¸ºtrue\n        Bugly.init(this, \"900029763\", false);\n    }\n\n    @Override\n    protected void attachBaseContext(Context base) {\n        super.attachBaseContext(base);\n        // you must install multiDex whatever tinker is installed!\n        MultiDex.install(base);\n\n\n        // å®‰è£…tinker\n        Beta.installTinker();\n    }\n\n}\n```\n\n#### ç¬¬å››æ­¥ï¼šAndroidManifest.xmlé…ç½®\n\n##### 1.æƒé™é…ç½®ï¼š\n\n```\n<uses-permission android:name=\"android.permission.READ_PHONE_STATE\" />\n<uses-permission android:name=\"android.permission.INTERNET\" />\n<uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" />\n<uses-permission android:name=\"android.permission.ACCESS_WIFI_STATE\" />\n<uses-permission android:name=\"android.permission.READ_LOGS\" />\n<uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\n```\n##### 2.Activityé…ç½®ï¼š\n\n```\n<activity\n    android:name=\"com.tencent.bugly.beta.ui.BetaActivity\"\n    android:configChanges=\"keyboardHidden|orientation|screenSize|locale\"\n    android:theme=\"@android:style/Theme.Translucent\" />\n```\n##### 3.é…ç½®FileProvider\n\n    æ³¨æ„ï¼šå¦‚æœæ‚¨æƒ³å…¼å®¹Android Næˆ–è€…ä»¥ä¸Šçš„è®¾å¤‡ï¼Œå¿…é¡»è¦åœ¨AndroidManifest.xmlæ–‡ä»¶ä¸­é…ç½®FileProvideræ¥è®¿é—®å…±äº«è·¯å¾„çš„æ–‡ä»¶ã€‚\n\n\n```\n        <!--çƒ­æ›´æ–°éœ€è¦çš„Provider-->\n        <provider\n            android:name=\"android.support.v4.content.FileProvider\"\n            android:authorities=\"${applicationId}.fileProvider\"\n            android:exported=\"false\"\n            android:grantUriPermissions=\"true\">\n            <meta-data\n                android:name=\"android.support.FILE_PROVIDER_PATHS\"\n                android:resource=\"@xml/provider_paths\"/>\n        </provider>\n```\nåœ¨resç›®å½•æ–°å»ºxmlæ–‡ä»¶å¤¹ï¼Œåˆ›å»ºprovider_paths.xmlæ–‡ä»¶å¦‚ä¸‹ï¼š\n```\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<paths xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <!-- /storage/emulated/0/Download/${applicationId}/.beta/apk-->\n    <external-path name=\"beta_external_path\" path=\"Download/\"/>\n    <!--/storage/emulated/0/Android/data/${applicationId}/files/apk/-->\n    <external-path name=\"beta_external_files_path\" path=\"Android/data/\"/>\n</paths>\n```\n#### ç¬¬äº”æ­¥ï¼šæ··æ·†é…ç½®\n\nä¸ºäº†é¿å…æ··æ·†SDKï¼Œåœ¨Proguardæ··æ·†æ–‡ä»¶ä¸­å¢åŠ ä»¥ä¸‹é…ç½®ï¼š\n```\n-dontwarn com.tencent.bugly.**\n-keep public class com.tencent.bugly.**{*;}\n# tinkeræ··æ·†è§„åˆ™\n-dontwarn com.tencent.tinker.**\n-keep class com.tencent.tinker.** { *; }\n```\n\n### ä¸‰ã€æ‰“åŒ…\n\nå½“ä¸Šé¢çš„ç¯å¢ƒé…ç½®éƒ½æ²¡æœ‰é—®é¢˜ä¹‹åï¼Œå°±å¯ä»¥è¿›è¡Œæ‰“åŒ…äº†ã€‚\n\næ‰“åŒ…ä¹‹å‰ï¼Œä½ è¿˜å¾—é…ç½®ä¸€ä¸‹ç¼–è¯‘æ­£å¼ç‰ˆapkæ‰€éœ€è¦çš„**keystore.jks**æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ€ä¹ˆåˆ›å»ºçš„å°±ä¸ä»‹ç»äº†ï¼Œè¿™é‡Œä¸»è¦ä»‹ç»ä¸€ä¸‹å¦‚ä½•é…ç½®ï¼š\n\nåœ¨app moudleç›®å½•ä¸‹çš„â€œbuild.gradleâ€ä¸­é…ç½®ï¼š\n\n```\nandroid {\n    signingConfigs {\n        release {\n            keyAlias 'xxxxxxxx'\n            keyPassword 'xxxxxxxx'\n            storeFile file('../keystore.jks')\n            storePassword 'xxxxxxxx'\n        }\n    }\n    ...\n    buildTypes {\n        release {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n            signingConfig signingConfigs.release\n        }\n    }\n}\n```\nå…¶ä¸­çš„å„é¡¹å‚æ•°å°±ä¸å¿…åšè¯´æ˜äº†\n\n\n\nç„¶åå°±æ˜¯æ‰“åŒ…è¿‡ç¨‹![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Bugly%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/bugly-001.png)\n\n**æ‰“åŒ…è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„ä¹‹å‰æåˆ°è¿‡çš„tinkerIdçš„é…ç½®ï¼Œä»¥åŠç›®å½•çš„é…ç½®ï¼Œå¾ˆé‡è¦å“¦ï¼**\n\nç”Ÿæˆçš„åŸºå‡†åŒ…ä¼šåœ¨è¿™ä¸ªç›®å½•\n\n![image](https://bugly.qq.com/docs/img/hotfix/android/Snip20170209_2.png?v=20180709165613)\n\nç”Ÿæˆçš„è¡¥ä¸åŒ…ä¼šåœ¨è¿™ä¸ªç›®å½•\n\n![image](https://bugly.qq.com/docs/img/hotfix/android/1479216059696.png?v=20180709165613)\n\nç„¶åå°±å‡†å¤‡å¼€å§‹ä½¿ç”¨å§\n\n### å››ã€ä½¿ç”¨\n\næ‰¾åˆ°ä½ åˆ›å»ºçš„äº§å“ï¼Œç„¶åè¿›å…¥åˆ°ä¸‹é¢çš„ç•Œé¢\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Bugly%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/bugly-002.png)\n\næ¥ç€ï¼Œå‘å¸ƒæ–°è¡¥ä¸å§ï¼Œçœ‹ä¸€çœ‹æ•ˆæœ\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Bugly%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/bugly-003.png)\n\nå…·ä½“çš„æ•ˆæœå¯ä»¥è‡ªè¡Œå°è¯•ä¸€ä¸‹ï¼Œä¸è¿‡æœ‰æ—¶å€™ä½ ä¼šé‡åˆ°ä¸Šä¼ ä¸æˆåŠŸçš„æƒ…å†µï¼Œä¸€èˆ¬ä¸‹å‘åè¦è¿‡5åˆ°10åˆ†é’Ÿæ‰ä¼šç”Ÿæ•ˆï¼ˆå¯èƒ½æ˜¯æˆ‘çš„ç½‘ç»œé—®é¢˜ï¼‰ï¼Œå¦‚æœå¤ªä¹…æ²¡æ•ˆæœï¼Œåº”è¯¥æ˜¯å“ªé‡Œå‡ºé—®é¢˜äº†\n\n## <font color=\"#660066\">å°¾\n\nå‰é¢çš„æ‰€æœ‰æ“ä½œéƒ½å°è¯•è¿‡åï¼Œæ¥ä¸‹æ¥ä½ å¯èƒ½å°±ä¼šé¢ä¸´æ–°çš„éœ€æ±‚äº†ã€‚æ¯”å¦‚è¯´ï¼Œå¤šæ¸ é“æ‰“åŒ…çš„å®ç°ï¼Œæ¯”è¾ƒæ—§çš„åŠæ³•æ˜¯é€šè¿‡productFlavorså»å®ç°åˆ†åˆ«æ‰“åŒ…ï¼Œä¸è¿‡è¿™æ ·ä¼šæœ‰ä¸€ä¸ªå¼Šç«¯ï¼Œå³æœ‰å¤šå°‘æ¸ é“æ‰“åŒ…æµç¨‹å°±æ‰§è¡Œå¤šå°‘æ¬¡ï¼Œè¿™æ ·æ•ˆç‡æ˜¾ç„¶æ˜¯ä¸å¤Ÿçš„ï¼›\n\näºæ˜¯ä¹ï¼Œæ–°çš„æ‰“åŒ…æ–¹æ¡ˆå‡ºæ¥äº†ï¼š\n\n### ä½¿ç”¨Walleè¿›è¡Œå¤šæ¸ é“æ‰“åŒ…\n\nä¸‹é¢æ˜¯Walleçš„githubåœ°å€ï¼š\n\n[Walleï¼ˆç“¦åŠ›ï¼‰ï¼šAndroid Signature V2 Schemeç­¾åä¸‹çš„æ–°ä¸€ä»£æ¸ é“åŒ…æ‰“åŒ…ç¥å™¨](https://github.com/Meituan-Dianping/walle)\n\nå®ƒçš„æ¥å…¥æ–‡æ¡£å†™çš„ä¹Ÿååˆ†å‹å¥½ï¼Œæ¥ä¸‹æ¥å®é™…æ“ä½œä¸€éï¼š\n\n\n#### Walleçš„Gradleæ¥å…¥\n\nåœ¨é¡¹ç›®æ ¹ç›®å½•çš„ **build.gradle** ä¸­æ·»åŠ ä¾èµ–ï¼š\n\n```\nbuildscript {\n    dependencies {\n        classpath 'com.meituan.android.walle:plugin:1.1.6'\n    }\n}\n```\nç„¶ååœ¨app moduleä¸­çš„ **build.gradle** æ·»åŠ ï¼š\n\n```\napply plugin: 'walle'\n\ndependencies {\n    compile 'com.meituan.android.walle:library:1.1.6'\n}\n```\nå¹¶è¿›è¡Œæ’ä»¶é…ç½®\n\n```\nwalle {\n    // æŒ‡å®šæ¸ é“åŒ…çš„è¾“å‡ºè·¯å¾„\n    apkOutputFolder = new File(\"${project.buildDir}/outputs/channels\");\n    // å®šåˆ¶æ¸ é“åŒ…çš„APKçš„æ–‡ä»¶åç§°\n    apkFileNameFormat = '${appName}-${packageName}-${channel}-${buildType}-v${versionName}-${versionCode}-${buildTime}.apk';\n    // æ¸ é“é…ç½®æ–‡ä»¶\n    channelFile = new File(\"${project.getProjectDir()}/channel\")\n}\n```\næ¥ç€åœ¨app moduleç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå’Œä¸Šé¢é…ç½®ä¸­è¦ä¿æŒä¸€è‡´ï¼Œå°±å« **channel**\n```\n360\nyingyongbao\nbaidu\nwandoujia\nxiaomi\noppo\nlenovo\nhuawei\ndefault_channel\n# æ‰“åŒ…å‘½ä»¤ gradlew clean assembleReleaseChannels  æˆ–è€… gradlew assembleReleaseChannels\n```\næœ€åï¼Œåœ¨ä½ çš„Applicationä¸­çš„**onCreate**æ–¹æ³•é‡Œæ·»åŠ ï¼š\n\n```\n        String channel = WalleChannelReader.getChannel(getApplication());\n        Bugly.setAppChannel(getApplication(), channel);\n```\nå¦‚æœä½ å®ç°çš„æ˜¯**SampleApplicationLike**ï¼Œä¹Ÿæ˜¯åœ¨å®ƒçš„**onCreate**æ–¹æ³•é‡Œæ·»åŠ å³å¯ã€‚\n\næ¥ä¸‹æ¥é€šè¿‡è¿è¡Œä¸Šé¢çš„æ‰“åŒ…å‘½ä»¤æˆ–è€…é€šè¿‡å›¾ä¸­çš„æ‰‹åŠ¨æ“ä½œï¼Œéƒ½æ˜¯å¯ä»¥æ‰“åŒ…çš„\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Bugly%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/bugly-004.png)\n\n\n## <font color=\"#dddd00\">æœ«\n\nè‡³æ­¤ï¼ŒåŸºæœ¬ä¸Šæ•´ä¸ªé…ç½®æµç¨‹å°±åˆ°æ­¤ç»“æŸ!!!\n\nä¸è¿‡æœ‰ä¸€ä¸ªé—®é¢˜æˆ‘ä¸€ç›´ä¸çŸ¥é“å¦‚ä½•è§£å†³ï¼Œå°±æ˜¯æ‰“åŒ…åŸºå‡†åŒ…çš„å‘½åï¼Œåœ¨ **tinker-support.gradle** è¿›è¡Œé…ç½®æ˜¯ä¸èµ·æ•ˆæœçš„ï¼Œè¯•äº†å¥½ä¹…éƒ½æ²¡æ•ˆæœï¼Œçœ‹æ¥è¿˜å¾—äº¤ç»™å…¶ä»–å°ä¼™ä¼´ä»¬è§£å†³äº†\n\n\n\n*é‚£ä¹ˆ*\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Bugly%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/zaihui.png)\n"},{"articleName":"Androidå¼€å‘è€…ç¼–å†™è‡ªå·±çš„APIæ¥å£ï¼šä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰","createTime":"2018-08-14T21:49:47.000","lastModifiedTime":"2020-02-03T10:18:51.000","tag":"Android","summary":" å‰è¨€\n\n\n\nåœ¨ä¸Šä¸€ç¯‡[Androidå¼€å‘è€…ç¼–å†™è‡ªå·±çš„APIæ¥å£ï¼ˆä¸Šï¼‰](https://old","imageAddress":"/img/api_2.png","articleAddress":"/config/study/Androidå¼€å‘è€…ç¼–å†™è‡ªå·±çš„APIæ¥å£ï¼šä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰.md","articleContent":"---\ntitle: Androidå¼€å‘è€…ç¼–å†™è‡ªå·±çš„APIæ¥å£ï¼šä»é›¶å¼€å§‹ï¼ˆäºŒï¼‰\ndate: 2018-08-14 21:49:47\nindex_img: /img/api_2.png\ntags: Android\n---\n\n## å‰è¨€\n\n\n\nåœ¨ä¸Šä¸€ç¯‡[Androidå¼€å‘è€…ç¼–å†™è‡ªå·±çš„APIæ¥å£ï¼ˆä¸Šï¼‰](https://oldchen.top/2018/08/05/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%B8%80%EF%BC%89/)ä¸­ï¼Œå·²ç»ä»‹ç»äº†å¦‚ä½•æ­å»ºä¸€ä¸ªåŸºæœ¬çš„å¼€å‘ç¯å¢ƒï¼Œä»¥åŠæ¥å£çš„ç¼–å†™ï¼Œæœ€åæ˜¯èƒ½å¤ŸæˆåŠŸè¿è¡Œçš„ã€‚\n\nè¿™ä¸€ç¯‡å°†æ›´è¿›ä¸€æ­¥ï¼Œä¸»è¦è§£å†³ä¸‹é¢ä¸¤ä¸ªé—®é¢˜ï¼š\n\n- â‘ ï¼šå¦‚ä½•è®©åå°é¡¹ç›®è¿è¡Œåœ¨TomCatä¸Š\n- â‘¡ï¼šå¦‚ä½•åœ¨äº‘æœåŠ¡å™¨ä¸Šéƒ¨ç½²è‡ªå·±çš„é¡¹ç›®\n    \n## Start\n\n#### ä¸€ã€æœ¬åœ°Tomcatçš„ä½¿ç”¨\n\n##### 1.1ã€å®‰è£…Tomcat\nä½¿ç”¨TomCatï¼Œè‡ªç„¶æ˜¯è¦TomCatçš„å®‰è£…åŒ…å’¯\n\n[å®‰è£…åŒ…ä¸‹è½½åœ°å€](https://tomcat.apache.org/download-90.cgi)\n\n![image](\nhttps://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%BA%8C%EF%BC%89/001.png)\n\nç”±äºæˆ‘ä»¬æœ¬åœ°åº”è¯¥éƒ½æ˜¯å·²ç»å®‰è£…é…ç½®è¿‡JDKäº†çš„ï¼Œæ‰€ä»¥å®‰è£…Tomcatçš„æ—¶å€™ä¸€è·¯Nextå°±è¡Œäº†\n\n\n##### 1.2ã€é…ç½®Gradle\né¦–å…ˆï¼Œåœ¨é¡¹ç›®çš„gradleæ‰€åœ¨çš„ç›®å½•ä¸‹åˆ›å»ºgradle.propertiesï¼Œç„¶ååœ¨é‡Œé¢æ·»åŠ ï¼š\n```\n# trueå°±å»æ‰“åŒ…Warï¼Œå¦åˆ™ä¸æ‰“åŒ…\nBUILD_WAR=true\n```\n![image](\nhttps://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%BA%8C%EF%BC%89/002.png)\n\næ¥ç€åœ¨build.gradleä¸­æ·»åŠ ï¼š\n\n\n```\nif (BUILD_WAR.toBoolean()) {\n    apply plugin: 'war'\n}\n\ndependencies {\n    ...\n    if (BUILD_WAR.toBoolean()) {\n        providedRuntime('org.springframework.boot:spring-boot-starter-tomcat')\n    }\n}\n```\n![image](\nhttps://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%BA%8C%EF%BC%89/003.png)\n\nåŒæ—¶ï¼Œä¸è¦å¿˜äº†åˆ›å»ºä¸€ä¸ªServletInitializerç±»ï¼Œç”¨äºSpringBootçš„åˆå§‹åŒ–\n\n```\npublic class ServletInitializer extends SpringBootServletInitializer {\n\n\t@Override\n\tprotected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n\t\treturn application.sources(TestForDemoApplication.class);\n\t}\n\n}\n```\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%BA%8C%EF%BC%89/008.png)\n\n\nè¿™äº›éƒ½å®Œæˆåï¼Œåœ¨Terminalæ§åˆ¶å°è¾“å…¥ï¼š\n\n```\ngradlew assemble\n```\n\nç­‰å¾…ç»“æœï¼Œç„¶åå°±å¯ä»¥çœ‹åˆ°ä¸€ä¸ªwaråŒ…äº†\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%BA%8C%EF%BC%89/004.png)\n\n##### 1.3ã€é…ç½®Tomcat\n\næ‰¾åˆ°demo-0.0.1-SNAPSHOT.waræ‰€åœ¨ç›®å½•ï¼Œç„¶åå°†å…¶æ›´åä¸ºoldchen.war\n\n    æ³¨æ„ï¼Œè¿™é‡Œä¿®æ”¹åçš„åå­—å°†ä¼šä¸éƒ¨ç½²åˆ°Tomcatä¸Šçš„ç½‘ç»œè¯·æ±‚åœ°å€æœ‰å…³å“¦\n\n![image](\nhttps://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%BA%8C%EF%BC%89/005.png)\n\nç„¶åæ‰¾åˆ°Tomcatçš„å®‰è£…ç›®å½•ä¸‹çš„webappsç›®å½•ï¼Œå°†é‡Œé¢çš„å…¶ä»–æ–‡ä»¶å’Œæ–‡ä»¶å¤¹åˆ é™¤ï¼ŒæŠŠoldchen.warå¤åˆ¶åˆ°è¯¥ç›®å½•\n\næ¥ä¸‹æ¥ï¼Œåœ¨Tomcatç›®å½•ä¸‹çš„binç›®å½•ä¸­è¿è¡ŒTomcat9w.exe\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%BA%8C%EF%BC%89/006.png)\n\nç„¶åä½ ä¼šå‘ç°ï¼Œwebappsç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªæ–‡ä»¶\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%BA%8C%EF%BC%89/007.png)\n\n\n##### 1.4ã€æµ‹è¯•æœ¬åœ°Tomcat\n\næ¥ä¸‹æ¥ï¼Œè®¿é—®åœ°å€ï¼š\n\nhttp://localhost:8080/oldchen/user/user?account=oldchen\n\nç»“æœï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%BA%8C%EF%BC%89/009.png)\n\nå¯ä»¥çœ‹åˆ°ï¼Œæœ¬åœ°çš„Tomcatå·²ç»éƒ¨ç½²æˆåŠŸï¼Œæ¥ä¸‹æ¥å°±æ˜¯äº‘æœåŠ¡å™¨ä¸Šéƒ¨ç½²Tomcatäº†ã€‚\n\n\n#### äºŒã€äº‘æœåŠ¡å™¨ä¸ŠTomcatçš„éƒ¨ç½²\n\n##### 2.1ã€è´­ä¹°äº‘æœåŠ¡å™¨\n\næƒ³åœ¨äº‘æœåŠ¡å™¨ä¸Šéƒ¨ç½²Tomcatï¼Œé¦–å…ˆéœ€è¦è´­ä¹°ä¸€ä¸ªæœåŠ¡å™¨ï¼Œæˆ‘ä¹°çš„æ˜¯è…¾è®¯äº‘çš„æœåŠ¡å™¨ï¼Œåˆæ¬¡æ¥è§¦çš„åŒå­¦å»ºè®®å»ä½¿ç”¨è¯•ç”¨çš„äº‘æœåŠ¡å™¨ï¼Œç­‰æ“ä½œæˆåŠŸåå†ä¹°ä¹Ÿä¸è¿Ÿ\n\n\nå‡ºäºå¯¹åˆå­¦è€…çš„äººæ–‡å…³æ€€ï¼ˆæ²¡é”™ï¼ŒIs meï¼‰ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯Windowsç‰ˆçš„æœåŠ¡å™¨ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%BA%8C%EF%BC%89/010.png)\n\n\nä¸ºäº†èƒ½å¤Ÿæ­£å¸¸è®¿é—®æœåŠ¡å™¨çš„åœ°å€ï¼Œéœ€è¦ç»™æœåŠ¡å™¨é…ç½®ä¸€ä¸‹å®‰å…¨ç»„ï¼Œå®‰å…¨ç»„ä¸­éœ€è¦æ·»åŠ è¿™æ ·ä¸€é¡¹è§„åˆ™ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%BA%8C%EF%BC%89/011.png)\n\nç„¶åï¼Œä½¿ç”¨è¿œç¨‹è¿æ¥ï¼Œè¿æ¥åˆ°äº‘æœåŠ¡å™¨ï¼Œå…·ä½“æ“ä½œæ˜¯ï¼š\n    \n    ä¸€ã€win+R\n    äºŒã€è¾“å…¥mstsc\n    ä¸‰ã€è¾“å…¥äº‘æœåŠ¡å™¨çš„Ipåœ°å€ï¼Œç”¨æˆ·åä»¥åŠå¯†ç ï¼Œè¿æ¥\n\nå¦‚æœä½ ä½¿ç”¨çš„æ˜¯windows2016ç‰ˆçš„æœåŠ¡å™¨ï¼ŒåŒæ—¶é‡åˆ°äº†\"èº«ä»½éªŒè¯é”™è¯¯ï¼Œè¦æ±‚çš„å‡½æ•°ä¸æ”¯æŒ\"ï¼Œè€Œä¸”ä½ æ°å¥½æ˜¯win10å®¶åº­ç‰ˆï¼Œé‚£ä¹ˆä¸‹é¢æœ‰è§£å†³åŠæ³•ï¼š\n[windows10å®¶åº­ç‰ˆ è¿œç¨‹æ¡Œé¢æŠ¥é”™](https://jingyan.baidu.com/album/67508eb47ae5499ccb1ce410.html?picindex=3)\n\n\næˆåŠŸç™»å½•åï¼Œæ•´ä¸ªç•Œé¢åªæœ‰ä¸€ä¸ªå­¤ä¼¶ä¼¶çš„å›æ”¶ç«™ï¼Œåˆ°äº†è¿™æ­¥ï¼Œå°±å‡†å¤‡å¼€å§‹é…ç½®å§ã€‚\n\n\n##### 2.2ã€é…ç½®äº‘æœåŠ¡å™¨\n\näº‘æœåŠ¡å™¨ä¸Šé¢è¿è¡Œé¡¹ç›®åªéœ€è¦Tomcat+Mysql+Navicat+JDKï¼Œé…ç½®æ–¹æ³•å’Œä¹‹å‰åœ¨æœ¬åœ°é…ç½®æ˜¯ä¸€æ ·çš„ï¼Œä¸è¿‡è¿™é‡Œä¸å»ºè®®ä½¿ç”¨ä¸Šä¼ çš„æ–¹æ³•ï¼Œå› ä¸ºä¸Šä¼ å®é™…ä¸Šå’Œä¸‹è½½æ˜¯ä¸€æ ·çš„ï¼Œæœ‰æ—¶å€™è¿˜ä¼šå—é™äºä½ è‡ªå·±å®½å¸¦çš„ä¸Šè¡Œé€Ÿåº¦ã€‚\n\n\n\né‡æ–°ä¸‹è½½å®‰è£…JDKæ˜¯å¾ˆå¤´ç–¼çš„ï¼Œä¸‹é¢æ˜¯è¯¦ç»†æ•™ç¨‹ï¼š\n\n[éå¸¸è¯¦ç»†å›¾æ–‡JDKå’ŒTomcatå®‰è£…å’Œé…ç½®çš„å›¾æ–‡æ•™ç¨‹](https://blog.csdn.net/qq_32519693/article/details/71330930)\n\n\nå…¨éƒ¨éœ€è¦å‡†å¤‡çš„æ–‡ä»¶å¦‚ä¸‹ï¼š\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%BA%8C%EF%BC%89/012.png)\n\nå…¶ä¸­ï¼Œ**PatchNavicat** ç”¨äºNavicatçš„ç ´è§£ï¼Œåœ¨ä¸Šä¸€ç¯‡çš„é“¾æ¥ä¸­å·²ç»è¯´æ˜ã€‚\n\nè€Œ**oldchen.sql**åˆ™æ˜¯é€šè¿‡æœ¬åœ°Navicatç”ŸæˆMysqlæ–‡ä»¶ï¼Œå…·ä½“æ“ä½œæ˜¯ï¼šå³é”®ä½ é€‰ä¸­çš„æ•°æ®åº“ï¼Œé€‰æ‹©ã€è½¬å‚¨SQLæ–‡ä»¶ã€‘â†’ã€ç»“æ„å’Œæ•°æ®ã€‘ï¼Œç„¶åå°±å¯ä»¥ç”Ÿæˆäº†ã€‚ä½¿ç”¨æ–¹æ³•å°±æ˜¯åœ¨äº‘æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ªæ•°æ®åº“åé€‰æ‹©ã€è¿è¡ŒSQLæ–‡ä»¶ã€‘å³å¯ã€‚\n\nè¿™æ ·ï¼Œæœ¬åœ°æ•°æ®åº“çš„è¿ç§»å°±å®Œæˆäº†ã€‚å‰©ä¸‹çš„æ“ä½œä¸ä¹‹å‰ä»‹ç»çš„åŸºæœ¬ä¸€è‡´ï¼Œä¸è¿‡æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œä¸ºäº†å¼€å¯å¤–ç½‘è¿æ¥ï¼Œéœ€è¦åœ¨Tomcatå®‰è£…ç›®å½•ä¸‹æ‰¾åˆ°confç›®å½•ï¼Œä¿®æ”¹å…¶ä¸­çš„server.xmlæ–‡ä»¶ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%BA%8C%EF%BC%89/013.png)\n\nå°†portç”±8080ä¿®æ”¹ä¸º80\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%BA%8C%EF%BC%89/014.png)\n\n\nå½“ä½ å®Œæˆå…¨éƒ¨çš„æ“ä½œåï¼Œå°±å¯ä»¥æµ‹è¯•æ¥å£äº†ã€‚\n\n##### 2.3ã€æµ‹è¯•äº‘æœåŠ¡å™¨æ¥å£\n\n\nåªè¦ä½ çš„æ­¥éª¤æ˜¯okçš„ï¼Œé‚£ä¹ˆäº‘æœåŠ¡å™¨ä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚\n\nç”±äºåœ¨å†™è¿™ç¯‡æ–‡ç« æœŸé—´ï¼Œæˆ‘åˆå¤šå†™äº†ä¸ªç™»å½•æ¥å£ï¼Œæ‰€ä»¥è¿™é‡Œçš„æµ‹è¯•ä¾‹å­ç”¨çš„æ˜¯æ–°çš„æ¥å£ï¼Œä»…ä¾›å‚è€ƒï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%BA%8C%EF%BC%89/015.png)\n\n\nè¯·æ±‚åœ°å€æ˜¯ï¼šhttp://111.230.251.115/oldchen/user/login\n\n\n\n## åè¯­\n\né‚£ä¹ˆï¼Œç¼–å†™æ¥å£çš„å­¦ä¹ å°±åˆ°æ­¤ä¸ºæ­¢äº†ã€‚\n\nè™½ç„¶æœ‰å¾…å®Œå–„çš„åœ°æ–¹è¿˜ä¸å°‘ï¼Œæ¯”å¦‚é€šè¿‡æ•°æ®åº“æŒ‡ä»¤å¯¹æ•°æ®åº“è¿›è¡Œå¢åˆ æ”¹æŸ¥ã€æ•°æ®åº“ä¹‹é—´ç›¸äº’å…³è”ç­‰ç­‰ï¼Œè®¸å¤šçŸ¥è¯†éƒ½éœ€è¦æ…¢æ…¢å­¦çš„ã€‚\n\næ­¤æ–‡ç« æƒå½“å…¥é—¨ä¹‹å¾„ï¼Œå‰©ä¸‹çš„è¿˜å¾—é å¤§å®¶è‡ªå·±å¤šå¤šé’»ç ”å•¦ï¼Œæ¯•ç«Ÿä½œè€…æœ¬äººéœ€è¦å­¦çš„åœ°æ–¹ä¹Ÿå¤ªå¤šäº†ï¼Œå¦‚æœ‰é”™è¯¯ä¹‹å¤„ï¼Œè¿˜æœ›æŒ‡å‡ºï¼Œäº’ç›¸å­¦ä¹ ï¼Œå²‚ä¸ä¹å“‰ã€‚\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E8%A1%A8%E6%83%85%E5%8C%85/%E5%91%8A%E8%BE%9E2.jpg)\n\n\n\n\n\n"},{"articleName":"Androidå¼€å‘è€…ç¼–å†™è‡ªå·±çš„APIæ¥å£ï¼šä»é›¶å¼€å§‹ï¼ˆä¸€ï¼‰","createTime":"2018-08-05T21:49:47.000","lastModifiedTime":"2020-02-03T10:13:57.000","tag":"Android","summary":" åº\n\nä½œä¸ºä¸€åAndroidå¼€å‘äººå‘˜ï¼Œæƒ³è¦å®ç°å¯¹ä¸€äº›æ•°æ®çš„æ“ä½œå’Œå±•ç¤ºï¼Œå¯ä»¥é€šè¿‡ä¸€äº›æä¾›Apiæ¥","imageAddress":"/img/api_1.png","articleAddress":"/config/study/Androidå¼€å‘è€…ç¼–å†™è‡ªå·±çš„APIæ¥å£ï¼šä»é›¶å¼€å§‹ï¼ˆä¸€ï¼‰.md","articleContent":"---\ntitle: Androidå¼€å‘è€…ç¼–å†™è‡ªå·±çš„APIæ¥å£ï¼šä»é›¶å¼€å§‹ï¼ˆä¸€ï¼‰\ndate: 2018-08-05 21:49:47\nindex_img: /img/api_1.png\ntags: Android\n---\n\n## åº\n\nä½œä¸ºä¸€åAndroidå¼€å‘äººå‘˜ï¼Œæƒ³è¦å®ç°å¯¹ä¸€äº›æ•°æ®çš„æ“ä½œå’Œå±•ç¤ºï¼Œå¯ä»¥é€šè¿‡ä¸€äº›æä¾›Apiæ¥å£çš„ç½‘ç«™å»è·å–ï¼Œè™½ç„¶Apiå¸‚åœºä¸Šç§ç±»ç¹å¤šï¼Œä¸è¿‡åˆ«äººæä¾›çš„æ¥å£æœªå¿…å°±æ˜¯è‡ªå·±æƒ³è¦çš„ï¼Œåˆ°æœ€åï¼Œè¿˜æ˜¯å¾—è‡ªå·±å»å®ç°Apiæ¥å£ã€‚\n\næ¯•ç«Ÿï¼Œæœ€äº†è§£è‡ªå·±éœ€æ±‚çš„äººï¼Œè¿˜å¾—æ˜¯è‡ªå·±ã€‚\n\n## å‡†å¤‡\n\nå¾ˆå¤šå°ä¼™ä¼´åº”è¯¥éƒ½ä¼šæœ‰ç€ç±»ä¼¼çš„éœ€æ±‚ï¼Œä¸è¿‡æƒ³å»åšçš„æ—¶å€™ï¼Œå¸¸å¸¸æ— ä»ä¸‹æ‰‹ã€‚\n\næ‰€ä»¥è¿™é‡Œåšäº†ä¸€ä¸ªæ•´åˆï¼Œå…³äºå¦‚ä½•æ­å»ºå¼€å‘ç¯å¢ƒï¼Œä»¥åŠæ‰€éœ€å·¥å…·çš„ä¸‹è½½ç­‰ã€‚\n\n\nå‚è€ƒæ–‡ç« ï¼š\n\n- [Androidç¨‹åºå‘˜æ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„æœåŠ¡å™¨ï¼Œä¸å†æ±‚å„ç§å…¬å…±API](https://www.jianshu.com/p/4a0d40806ea2)\n- [JAVAåå°æ­å»º(springboot+mybatis+mysql)é¡¹ç›®æ­å»º](https://www.jianshu.com/p/f91ca5814bcf)\n\n## æ­¥éª¤\n\nä¸€å¥—å¼€å‘ç¯å¢ƒä¸‹æ¥ï¼Œéœ€è¦ä¸‹é¢è¿™äº›æ­¥éª¤ï¼š\n\n- 1ï¼šæ­å»ºå¼€å‘ç¯å¢ƒï¼ŒIntelliJ + spring-boot + mybatis\n- 2ï¼šæ­å»ºæ•°æ®åº“ï¼Œmysql + navicat\n- 3ï¼šæ­å»ºè¿è¡Œç¯å¢ƒï¼Œtomcat + è…¾è®¯äº‘ï¼ˆæˆ–è€…é˜¿é‡Œäº‘ï¼‰\n\n\n## å¼€å§‹\n\n### ä¸€ã€æ­å»ºå¼€å‘ç¯å¢ƒ\n\n\n#### 1.1 IntelliJ IDEAçš„å®‰è£…\n\nAndroidå¼€å‘è€…æ‰€ä½¿ç”¨çš„Android studioæ˜¯åŸºäºè¿™ä¸ªIDEAå¼€å‘çš„ï¼Œæ‰€ä»¥ä¸¤è€…çš„ç•Œé¢éå¸¸éå¸¸ç›¸ä¼¼ã€‚\n\nè€Œä¸”ç°åœ¨æ¯”è¾ƒæµè¡Œçš„Androidå¼€å‘è¯­è¨€Kotlinä¹Ÿæ˜¯ç”±IntelliJ IDEAçš„å¼€å‘å…¬å¸JetBrainsæ‰€å¼€å‘çš„ã€‚\n\n##### ä¸‹è½½ IntelliJ IDEA\n\né¦–å…ˆï¼Œä¸‹è½½å®‰è£…åŒ…â€”â€”[ã€IntelliJä¸‹è½½åœ°å€ã€‘](https://www.jetbrains.com/idea/download/#section=windows)\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%B8%80%EF%BC%89/001.png)\n\n##### å®‰è£… IntelliJ IDEA\n\nä¸‹è½½å®Œæˆåï¼Œå°±å¼€å§‹å®‰è£…äº†\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%B8%80%EF%BC%89/001-001.png)\n\nNextåˆ°ä¸‹é¢çš„ç•Œé¢ï¼Œå¯ä»¥è‡ªè¡Œé€‰æ‹©\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%B8%80%EF%BC%89/001-002.png)\n\n\nç„¶åä¸€ç›´ä¸‹ä¸€æ­¥ï¼Œåˆ°å¯ä»¥è¿è¡ŒIDEAï¼Œç„¶åä½ åº”è¯¥ä¼šé‡åˆ°éœ€è¦è´­ä¹°çš„æç¤ºï¼Œç ´è§£çš„æ•™ç¨‹è¯·çœ‹ï¼š\n\n[Windows7ä¸‹å®‰è£…ä¸ç ´è§£IntelliJ IDEA2017](https://blog.csdn.net/yangying496875002/article/details/73603303)\n\nwin10ä¹Ÿæ˜¯é€‚ç”¨çš„ã€‚\n\n\n#### 1.2 MySQLçš„å®‰è£…\n\n##### ä¸‹è½½MySQL\n\nè¿™é‡Œä½¿ç”¨çš„æ˜¯mysql-5.7.17.msiï¼Œä¸‹è½½åœ°å€æ˜¯ï¼š\n\n[MYSQLä¸‹è½½åœ°å€](https://downloads.mysql.com/archives/installer/)\n\n\n##### å®‰è£…MySQL\n\nä¸‹è½½å®Œæˆåè¿›è¡Œå®‰è£…ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%B8%80%EF%BC%89/001-006.png)\n\nè¿™é‡Œåªé€‰æ‹©äº†Server\n\nç„¶åä¸€ç›´ä¸‹ä¸€æ­¥\n\nåˆ°äº†è®¾ç½®å¯†ç è¿™é‡Œï¼Œæˆ‘è®¾ç½®çš„å¯†ç æ˜¯ã€oldchenã€‘,åé¢é¡¹ç›®é…ç½®çš„å¯†ç ä¹Ÿæ˜¯è¿™ä¸ªï¼Œè¿™é‡Œä½ å¯ä»¥éšä¾¿è®¾ç½®è‡ªå·±çš„å¯†ç ï¼Œä¸è¿‡åé¢é…ç½®çš„æ—¶å€™è¦ä¿è¯å¯†ç è¾“å…¥ä¸€è‡´å°±æ˜¯ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%B8%80%EF%BC%89/001-007.png)\n\n\nç„¶åä¸€ç›´ä¸‹ä¸€æ­¥ï¼Œç›´åˆ°å®‰è£…æˆåŠŸï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¦‚ä½•å»æ“ä½œæ•°æ®åº“ã€‚\n\n\n#### 1.3 Navicatçš„å®‰è£…\n\nNavicatç”¨æ¥å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œï¼Œä¹Ÿæ˜¯éœ€è¦ä»˜è´¹è´­ä¹°çš„ï¼Œç ´è§£åœ°å€ï¼š\n[Navicat for MySQL å®‰è£…å’Œç ´è§£ï¼ˆå®Œç¾ï¼‰](https://blog.csdn.net/wypersist/article/details/79834490)\n\n\nå¯ä»¥ä½¿ç”¨ä¹‹åï¼Œæ¥åˆ°å¦‚ä¸‹ç•Œé¢ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%B8%80%EF%BC%89/001-008.png)\n\nç„¶ååˆ›å»ºMYSQLè¿æ¥ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%B8%80%EF%BC%89/001-009.png)\n\nè¾“å…¥ç›¸å…³ä¿¡æ¯ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%B8%80%EF%BC%89/001-010.png)\n\nç„¶åå°±å¯ä»¥çœ‹åˆ°åˆ›å»ºçš„è¿æ¥äº†ï¼Œå³é”®â†’æ–°å»ºæ•°æ®åº“ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%B8%80%EF%BC%89/001-011.png)\n\n\næ–°å»ºçš„æ•°æ®åº“åå­—è®¾ç½®ä¸ºoldchen,æ¥ä¸‹æ¥åŒå‡»è¿™ä¸ªæ•°æ®åº“ï¼Œæ–°å»ºä¸€ä¸ªuserè¡¨,è¡¨ä¸­åŒ…å«account,password,usernameä»¥åŠè‡ªå¢ä¸»é”®idï¼Œå…·ä½“æ“ä½œå¦‚å›¾æ‰€ç¤ºï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/gif/001.gif)\n\n\nåˆ›å»ºè¿™ä¸ªè¡¨åï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€æ¡æ•°æ®ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%B8%80%EF%BC%89/001-012.png)\n\n\nç„¶åï¼Œå¼€å§‹é…ç½®IntelliJ IDEA\n\n#### 1.4 IntelliJ IDEAçš„é…ç½®\n\n\n##### æ­å»ºSpringBooté¡¹ç›®\n\næ‰“å¼€IntelliJï¼Œå·¦ä¸Šè§’ File â†’ New â†’ Projectï¼Œåˆ›å»ºæ–°é¡¹ç›®ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%B8%80%EF%BC%89/001-013.png)\n\n\nç„¶å\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%B8%80%EF%BC%89/001-004.png)\n\n\næ¥ä¸‹æ¥æ˜¯é€‰æ‹©ä¾èµ–çš„ç•Œé¢ï¼Œé€‰ä¸­å›¾ä¸­çš„å…¨éƒ¨ä¾èµ–\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%B8%80%EF%BC%89/001-005.png)\n\nä¸‹ä¸€æ­¥\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%B8%80%EF%BC%89/001-019.png)\n\n\nå¼€å§‹é¡¹ç›®æ„å»ºï¼Œéœ€è¦ç­‰å¾…ä¸€å®šçš„æ—¶é—´ï¼Œæ„å»ºå®Œæˆåçš„é¡¹ç›®ç»“æ„æ˜¯è¿™æ ·çš„ï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%B8%80%EF%BC%89/001-015.png)\n\n\nç»“åˆä¹‹å‰æ–°å»ºçš„æ•°æ®åº“ï¼Œåœ¨resourcesç›®å½•ä¸‹çš„application.propertiesä¸­è¿›è¡Œé…ç½®ï¼š\n\n\n```\n#oldchenä¸ºåˆ›å»ºçš„æ•°æ®åº“åå­—\nspring.datasource.url =jdbc:mysql://localhost:3306/oldchen\nmybatis.type-aliases-package = com.example.demo\n# æ•°æ®åº“ç”¨æˆ·å\nspring.datasource.username = root\n# æ•°æ®åº“å¯†ç \nspring.datasource.password = oldchen\n\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\n\n#ç«¯å£å·\nspring.session.store-type=none\nspring.http.encoding.charset=UTF-8\n```\n\næ¥ä¸‹æ¥å°±å¼€å§‹å†™æ¥å£å•¦\n\n\n#### 1.5 æ¥å£çš„ç¼–å†™\n\n\nç”±äºæˆ‘ä»¬ä¹‹å‰åœ¨æ“ä½œåä¸ºã€oldchenã€‘çš„æ•°æ®åº“æ—¶ï¼Œè¿˜æ–°å»ºäº†ä¸€ä¸ªã€userã€‘è¡¨ï¼Œæ‰€ä»¥è¿™é‡Œå…ˆåˆ›å»ºä¸€ä¸ªUserç±»ï¼š\n\n\n```\npublic class User {\n    private Integer id;\n    private String account;\n    private String password;\n    private String userName;\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public String getAccount() {\n        return account;\n    }\n\n    public void setAccount(String account) {\n        this.account = account;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    public String getUserName() {\n        return userName;\n    }\n\n    public void setUserName(String userName) {\n        this.userName = userName;\n    }\n}\n```\n\n\nç„¶ååˆ›å»ºUserMapperï¼Œç”¨äºæŸ¥è¯¢ï¼ˆæ ¹æ®å­—æ®µaccountæŸ¥è¯¢ï¼‰\n\n\n```\n@Mapper\npublic interface UserMapper {\n\n    @Select(\"select * from user where account = #{account}\")\n    User findByAccount(String account);\n\n}\n```\n\n\næ¥ç€åˆ›å»ºUserControllerï¼Œç”¨äºå¯¹æ•°æ®çš„å¤„ç†ï¼š\n\n\n```\n@RestController\n@RequestMapping({\"/user\"})\npublic class UserController {\n\n    @Autowired\n    private UserMapper userMapper;\n\n    @RequestMapping(value=\"/user\")\n    @ResponseBody\n    public String getUserInfoByName(String account) {\n        User user = userMapper.findByAccount(account);\n        if (user == null){\n            return \"ç”¨æˆ·åä¿ä¸å­˜åœ¨\";\n        } else {\n            return \"ç”¨æˆ·åå­˜åœ¨â€”â€”\" + user.getUserName();\n        }\n    }\n}\n```\n\n\næœ€åé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š\n\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%B8%80%EF%BC%89/001-016.png)\n\n\n### äºŒã€æµ‹è¯•æ¥å£\n\né¦–å…ˆï¼Œè¿è¡Œé¡¹ç›®\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%B8%80%EF%BC%89/001-017.png)\n\n\nå½“é¡¹ç›®æ­£å¸¸è¿è¡Œåï¼Œæµ‹è¯•ä¸‹é¢çš„åœ°å€ï¼š\n\nhttp://localhost:8080/user/user?account=oldchen\n\nç»“æœï¼š\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%B8%80%EF%BC%89/001-018.png)\n\næµ‹è¯•æˆåŠŸå•¦ï¼\n\n\n## åç»­\n\n\nå…³äºApiæ¥å£çš„å­¦ä¹ ï¼Œå…ˆåˆ°è¿™é‡Œã€‚\n\nåé¢è¿˜ä¼šå†™å…³äºå¦‚ä½•å°†é¡¹ç›®æ”¾åœ¨TomCatä¸Šï¼Œæœ€åæ”¾åœ¨äº‘æœåŠ¡å™¨ä¸Šï¼Œé€šè¿‡å¤–ç½‘åœ°å€è®¿é—®æ¥å£\n\né‚£ä¹ˆï¼Œæœªå®Œå¾…ç»­...\n\n\n\n![image](https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E8%A1%A8%E6%83%85%E5%8C%85/%E5%91%8A%E8%BE%9E.jpg)\n\n\n\n\n"}]